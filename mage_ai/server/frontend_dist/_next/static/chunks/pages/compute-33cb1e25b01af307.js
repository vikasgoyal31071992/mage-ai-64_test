(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4913],{94629:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(82394),i=t(21831),o=t(82684),l=t(50724),s=t(1402),c=t(97618),u=t(70613),a=t(31557),d=t(68899),f=t(28598);function p(e,n){var t=e.children,r=e.noPadding;return(0,f.jsx)(d.HS,{noPadding:r,ref:n,children:t})}var v=o.forwardRef(p),m=t(62547),h=t(82571),j=t(77417),x=t(46684),g=t(75375);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,r=e.afterHeader,o=e.afterHidden,p=e.afterWidth,Z=e.afterWidthOverride,y=e.appendBreadcrumbs,P=e.before,k=e.beforeHeader,_=e.beforeWidth,O=e.breadcrumbs,C=e.children,S=e.contained,w=e.errors,I=e.headerMenuItems,E=e.headerOffset,M=e.hideAfterCompletely,A=e.mainContainerHeader,B=e.navigationItems,T=e.setAfterHidden,R=e.setAfterWidth,D=e.setBeforeWidth,N=e.setErrors,z=e.subheaderChildren,H=e.subheaderNoPadding,W=e.title,F=e.uuid,L=(0,g.Z)(F,{beforeResizeOffset:g.H,setWidthAfter:R,setWidthBefore:D,widthAfter:p,widthBefore:_,widthOverrideAfter:Z}),V=L.mainContainerRef,U=L.mousedownActiveAfter,G=L.mousedownActiveBefore,X=L.setMousedownActiveAfter,q=L.setMousedownActiveBefore,J=L.setWidthAfter,K=L.setWidthBefore,Y=L.widthAfter,Q=L.widthBefore,$=(0,j.Z)().project,ee=[];return O&&ee.push.apply(ee,(0,i.Z)(O)),null!==O&&void 0!==O&&O.length&&!y||!$||null!==O&&void 0!==O&&O.length||ee.unshift({bold:!y,label:function(){return W}}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.Z,{title:W}),(0,f.jsx)(a.Z,{breadcrumbs:ee,menuItems:I}),(0,f.jsxs)(d.Nk,{ref:n,children:[0!==(null===B||void 0===B?void 0:B.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(h.Z,{navigationItems:B,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(m.Z,{after:t,afterHeader:r,afterHeightOffset:x.Mz,afterHidden:o,afterMousedownActive:U,afterWidth:Y,before:P,beforeHeader:k,beforeHeightOffset:x.Mz,beforeMousedownActive:G,beforeWidth:P?Q:d.k1,contained:S,headerOffset:E,hideAfterCompletely:!t||M,leftOffset:P?d.k1:null,mainContainerHeader:A,mainContainerRef:V,setAfterHidden:T,setAfterMousedownActive:X,setAfterWidth:J,setBeforeMousedownActive:q,setBeforeWidth:K,children:[z&&(0,f.jsx)(v,{noPadding:H,children:z}),C]})})]}),w&&(0,f.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===N||void 0===N?void 0:N(null)},children:(0,f.jsx)(s.Z,b(b({},w),{},{onClose:function(){return null===N||void 0===N?void 0:N(null)}}))})]})}var P=o.forwardRef(y)},93808:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var r=t(77837),i=t(26304),o=t(62243),l=t(29385),s=t(80022),c=t(13692),u=t(93189),a=t(15544),d=t(82394),f=t(38860),p=t.n(f),v=t(82684),m=t(56663),h=t.n(m),j=t(40761),x=t(34661),g=t(36105),Z=t(50178),b=t(69419),y=t(28598),P=["auth"];function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function O(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,a.Z)(e);if(n){var i=(0,a.Z)(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return(0,u.Z)(this,t)}}function C(e){return function(n){(0,c.Z)(u,n);var t=O(u);function u(){var e;(0,o.Z)(this,u);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),(0,d.Z)((0,s.Z)(e),"state",{auth:new j.Z(e.props.token)}),e}return(0,l.Z)(u,[{key:"componentDidMount",value:function(){this.setState({auth:new j.Z(this.props.token)})}},{key:"render",value:function(){var n=this.props,t=(n.auth,(0,i.Z)(n,P));return(0,y.jsx)(e,_({auth:this.state.auth},t))}}],[{key:"getInitialProps",value:function(){var n=(0,r.Z)(p().mark((function n(t){var r,i,o,l,s,c,u,a,d;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=h()(t),i=(0,Z.ex)(t),o=i.id,l=r[x.Mv],s=r[g.qt],c=new j.Z(l),u=_(_({},t),{},{auth:c,currentGroupId:o,theme:s}),(0,Z.YB)(t)&&c.isExpired&&(console.log("OAuth token has expired."),a=_(_({},t.query),{},{redirect_url:t.asPath}),(0,b.nL)("/sign-in?".concat((0,b.uM)(a)),t.res)),!e.getInitialProps){n.next=12;break}return n.next=10,e.getInitialProps(u);case 10:return d=n.sent,n.abrupt("return",_(_({},d),{},{auth:c,currentGroupId:o,theme:s}));case 12:return n.abrupt("return",u);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}]),u}(v.Component)}},4910:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return qe}});var r=t(77837),i=t(38860),o=t.n(i),l=t(82684),s=t(82394),c=t(75582),u=t(69864),a=t(71180),d=t(92083),f=t.n(d),p=t(21764),v=t(28071),m=t(15338),h=t(55485),j=t(85854),x=t(97618),g=t(38276),Z=t(30160),b=t(70515),y=t(28598);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _=function(e){var n=e.rows;return(0,y.jsx)(y.Fragment,{children:null===n||void 0===n?void 0:n.map((function(e){var n=e.key,t=e.textProps,r=e.value;return(0,y.jsxs)("div",{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(h.ZP,{flexDirection:"column",children:(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:n})}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,justifyContent:"flex-end",children:(0,y.jsx)(Z.ZP,k(k({default:!0,large:!0},t),{},{children:r}))})]})})]},n)}))})},O=t(65956),C=t(4190),S=t(75499),w=t(69650),I=t(35686),E=t(72473),M=t(3917),A=t(25976),B=t(44897),T=A.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-169asq7-0"})(["position:sticky;top:0;z-index:1;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||B.Z.background).codeArea,";\n  ")})),R=t(81728);function D(e){var n;if(null===e||void 0===e||!e.length)return null;var t=null===e||void 0===e?void 0:e[0],r=null===(n=Object.keys(t||{}))||void 0===n?void 0:n.map((function(e){return{uuid:(0,R.vg)(e)}}));return(0,y.jsx)(S.Z,{columnFlex:null===r||void 0===r?void 0:r.map((function(e,n){return 0===n?null:1})),columns:r,rows:null===e||void 0===e?void 0:e.map((function(e){return Object.entries(e||{}).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return[(0,y.jsx)(Z.ZP,{default:!0,monospace:!0,children:r},t)]}))}))})}var N=t(72619),z=t(95924),H=t(42122),W=t(70320),F=t(23780);function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=2*b.iI,G={default:!0,monospace:!0};var X=function(e){var n=e.clusters,t=e.computeService,r=e.fetchAll,i=e.includeAllStates,o=e.loading,s=e.setIncludeAllStates,d=(0,l.useMemo)((function(){return"".concat(null===t||void 0===t?void 0:t.uuid,"/clusters")}),[t]),x=(0,W.qB)(),P=(0,l.useState)(null),k=P[0],A=P[1],B=(0,F.VI)(null,{},[],{uuid:d}),L=(0,c.Z)(B,1)[0],X=(0,u.Db)(I.ZP.compute_clusters.compute_services.useCreate(null===t||void 0===t?void 0:t.uuid),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){r().then((function(){return A(0)}))},onErrorCallback:function(e,n){return L({errors:n,response:e})}})}}),q=(0,c.Z)(X,2),J=q[0],K=q[1].isLoading,Y=(0,u.Db)((function(e){return I.ZP.compute_clusters.compute_services.useDelete(null===t||void 0===t?void 0:t.uuid,null===e||void 0===e?void 0:e.id)()}),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){r().then((function(){return A(null)}))},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.exception,i=n.message,o=n.type;p.Am.error((null===t||void 0===t?void 0:t.error)||r||i,{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:o})}})}}),Q=(0,c.Z)(Y,2),$=Q[0],ee=Q[1].isLoading,ne=(0,u.Db)((function(e){return I.ZP.compute_clusters.compute_services.useUpdate(null===t||void 0===t?void 0:t.uuid,null===e||void 0===e?void 0:e.id)({compute_cluster:(0,H.GL)(e,["active"])})}),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){r()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.exception,i=n.message,o=n.type;p.Am.error((null===t||void 0===t?void 0:t.error)||r||i,{position:p.Am.POSITION.BOTTOM_RIGHT,toastId:o})}})}}),te=(0,c.Z)(ne,2),re=te[0],ie=te[1].isLoading,oe=(0,l.useMemo)((function(){return(null===n||void 0===n?void 0:n.length)||0}),[n]),le=(0,l.useMemo)((function(){return(0,y.jsx)(a.ZP,{beforeIcon:(0,y.jsx)(E.WorkspacesUsersIcon,{size:U}),compact:oe>=1,loading:K,onClick:function(){return J()},primary:!0,small:oe>=1,children:"Launch new cluster"})}),[oe,J,K]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(T,{children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,y.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,y.jsx)(j.Z,{level:4,children:(0,R._6)("cluster",oe,!0)}),s&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(w.Z,{checked:i,compact:!0,onCheck:function(e){return s(e(i))}}),(0,y.jsx)(g.Z,{mr:1}),(0,y.jsx)(Z.ZP,{default:i,muted:!i,small:!0,children:"Include terminated clusters"})]})]}),(0,y.jsx)(g.Z,{mr:b.cd}),oe>=1&&le]})}),(0,y.jsx)(m.Z,{light:!0})]}),(0,y.jsx)(S.Z,{apiForFetchingAfterAction:I.ZP.compute_clusters.compute_services.detail,buildApiOptionsFromObject:function(e){return[null===t||void 0===t?void 0:t.uuid,null===e||void 0===e?void 0:e.id,{},{refreshInterval:3e3,revalidateOnFocus:!0}]},columnFlex:[null,null,null,null,null],columns:[{uuid:"Cluster ID"},{uuid:"Cluster Name"},{uuid:"Status"},{uuid:"Created"},{center:!0,uuid:"Hours"},{label:function(){return""},rightAligned:!0,uuid:"Active"}],onClickRow:function(e,n){A((function(n){return n===e?null:e}))},renderExpandedRowWithObject:function(e,n){var t,r,i,o,l=null===n||void 0===n||null===(t=n.compute_cluster)||void 0===t?void 0:t.cluster;if(!l)return(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(C.Z,{inverted:!0})});var s=l.active,c=l.applications,u=l.ec2_instance_attributes,d=l.name,p=l.status,P=l.tags,k=null===p||void 0===p?void 0:p.state,S=[v.X.TERMINATED,v.X.TERMINATED_WITH_ERRORS,v.X.TERMINATING].includes(k),w=[v.X.RUNNING,v.X.WAITING].includes(k),I=null===p||void 0===p||null===(r=p.timeline)||void 0===r?void 0:r.creation_date_time;return(0,y.jsxs)(g.Z,{p:b.cd,children:[!S&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"Actions"})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{children:[w&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.ZP,{beforeIcon:(0,y.jsx)(E.PowerOnOffButton,{size:U,success:s}),loading:ie,notClickable:s,onClick:s?null:function(){return re(V(V({},l),{},{active:!0}))},primary:!s,children:s?"Activated":"Activate cluster for compute"}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(a.ZP,{loading:ee,onClick:function(){window.confirm("Are you sure you want to terminate this cluster?")&&$(l)},secondary:!0,children:"Terminate cluster"})]}),!w&&(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(C.Z,{inverted:!0,small:!0}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:(null===p||void 0===p||null===(i=p.state_change_reason)||void 0===i?void 0:i.message)||"Cluster is still launching."})]})]})})]}),(0,y.jsx)(g.Z,{mb:b.cd})]}),(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"Details"})}),(0,y.jsx)(_,{rows:[{key:"ID",textProps:{monospace:!0},value:null===l||void 0===l?void 0:l.id},{key:"Name",value:d},{key:"Master public DNS name",value:(null===l||void 0===l?void 0:l.master_public_dns_name)||"Available after cluster starts."},{key:"Created at",textProps:{monospace:!0},value:I?(0,M.XG)(f()(I).format(M.BL),x):"-"},{key:"Status message",value:(null===p||void 0===p||null===(o=p.state_change_reason)||void 0===o?void 0:o.message)||"None"},{key:"Release label",textProps:{monospace:!0},value:null===l||void 0===l?void 0:l.release_label},{key:"Service role",textProps:{monospace:!0},value:null===l||void 0===l?void 0:l.service_role},{key:"Scale down behavior",value:null!==l&&void 0!==l&&l.scale_down_behavior?(0,R.vg)(null===l||void 0===l?void 0:l.scale_down_behavior):null===l||void 0===l?void 0:l.scale_down_behavior},{key:"Auto terminate",value:null!==l&&void 0!==l&&l.auto_terminate?(0,y.jsx)(E.Check,{size:U,success:!0}):(0,y.jsx)(E.Close,{danger:!0,size:U})},{key:"Termination protected",value:null!==l&&void 0!==l&&l.termination_protected?(0,y.jsx)(E.Check,{size:U,success:!0}):(0,y.jsx)(E.Close,{danger:!0,size:U})},{key:"Visible to all users",value:null!==l&&void 0!==l&&l.visible_to_all_users?(0,y.jsx)(E.Check,{size:U,success:!0}):(0,y.jsx)(E.Close,{danger:!0,size:U})},{key:"EBS root volume size",textProps:{monospace:!0},value:null===l||void 0===l?void 0:l.ebs_root_volume_size},{key:"Normalized instance hours",textProps:{monospace:!0},value:null===l||void 0===l?void 0:l.normalized_instance_hours},{key:"Step concurrency level",textProps:{monospace:!0},value:null===l||void 0===l?void 0:l.step_concurrency_level}]})]}),(0,y.jsx)(g.Z,{mb:b.cd}),(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"EC2 instance attributes"})}),(0,y.jsx)(_,{rows:[{key:"Availability zone",textProps:{monospace:!0},value:null===u||void 0===u?void 0:u.ec2_availability_zone},{key:"Master security group",textProps:{monospace:!0},value:null===u||void 0===u?void 0:u.emr_managed_master_security_group},{key:"Slave security group",textProps:{monospace:!0},value:null===u||void 0===u?void 0:u.emr_managed_slave_security_group},{key:"IAM profile",textProps:{monospace:!0},value:null===u||void 0===u?void 0:u.iam_instance_profile}]})]}),(0,y.jsx)(g.Z,{mb:b.cd}),(0,y.jsxs)(h.ZP,{children:[(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{px:b.cd,py:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"Applications"})}),(0,y.jsx)(m.Z,{light:!0,short:!0}),D(c||[])]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{px:b.cd,py:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"Tags"})}),(0,y.jsx)(m.Z,{light:!0,short:!0}),D(P||[])]})]})]})},getObjectAtRowIndex:function(e){return null===n||void 0===n?void 0:n[e]},rows:null===n||void 0===n?void 0:n.map((function(e){var n,t,r=e.active,i=e.id,o=e.name,s=e.normalized_instance_hours,c=e.status,u=null===c||void 0===c||null===(n=c.timeline)||void 0===n?void 0:n.creation_date_time,d=null===c||void 0===c?void 0:c.state,p=null===c||void 0===c||null===(t=c.state_change_reason)||void 0===t?void 0:t.message,m=[v.X.BOOTSTRAPPING,v.X.STARTING].includes(d),j=[v.X.TERMINATING].includes(d);return[(0,l.createElement)(Z.ZP,V(V({},G),{},{key:"id",success:r}),i),(0,l.createElement)(Z.ZP,V(V({},G),{},{key:"name",monospace:!1,preWrap:!0}),o),(0,y.jsxs)("div",{children:[(0,y.jsx)(Z.ZP,V(V({},G),{},{danger:[v.X.TERMINATED_WITH_ERRORS].includes(d),default:[v.X.STARTING].includes(d),muted:[v.X.TERMINATED].includes(d),success:[v.X.RUNNING,v.X.WAITING].includes(d),warning:[v.X.TERMINATING].includes(d),children:null!==c&&void 0!==c&&c.state?(0,R.vg)(null===c||void 0===c?void 0:c.state):null===c||void 0===c?void 0:c.state})),p&&(0,y.jsx)(Z.ZP,{muted:!0,preWrap:!0,small:!0,children:p})]},"state"),(0,l.createElement)(Z.ZP,V(V({},G),{},{key:"created",preWrap:!0}),u?(0,M.XG)(f()(u).format(M.BL),x):"-"),(0,l.createElement)(Z.ZP,V(V({},G),{},{center:!0,key:"normalizedInstanceHours"}),s||0),(0,y.jsx)(h.ZP,{justifyContent:"flex-end",children:m||j?(0,y.jsx)(C.Z,{inverted:m,small:!0}):(0,y.jsx)(a.ZP,{iconOnly:!0,loading:ie,noBackground:!0,noBorder:!0,noPadding:!0,notClickable:r,onClick:r?null:function(n){(0,z.j)(n),re(V(V({},e),{},{active:!0}))},children:(0,y.jsx)(E.PowerOnOffButton,{muted:!r,size:U,success:r})})},"active")]})),selectedRowIndexInternal:k,uuid:d}),o&&(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(C.Z,{inverted:!0})}),!o&&!oe&&(0,y.jsx)(g.Z,{p:b.cd,children:le})]})},q=t(48670),J=t(90299),K=t(89308),Y=t(74521),Q=t(93004),$=t(8970);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te="Applications",re="Connections",ie="Jobs",oe="SQLs";var le=function(e){var n,t=e.applications,r=e.computeConnections,i=e.computeService,o=e.connectionsLoading,s=e.fetchAll,c=e.jobs,u=e.loadingApplications,a=e.loadingJobs,d=(e.objectAttributes,e.refButtonTabs),f=(e.selectedComputeService,e.setSelectedSql),p=e.setSelectedTab,v=(0,l.useContext)(A.ThemeContext),h=(0,l.useState)(),j=h[0],x=h[1],P=(0,l.useCallback)((function(e){f((function(){return null})),x(e)}),[f,x]),k=(0,W.qB)(),_=I.ZP.spark_stages.list({details:!0,_format:"with_details"}).data,O=(0,l.useMemo)((function(){return((null===_||void 0===_?void 0:_.spark_stages)||[]).reduce((function(e,n){var t=null===n||void 0===n?void 0:n.application;return(null===t||void 0===t?void 0:t.calculated_id)in e||(e[null===t||void 0===t?void 0:t.calculated_id]={}),e[null===t||void 0===t?void 0:t.calculated_id][null===n||void 0===n?void 0:n.stage_id]=n,e}),{})}),[_]),C=(0,l.useMemo)((function(){return(0,y.jsx)(K.Z,{computeService:i,computeConnections:r,fetchAll:s,onClickStep:function(e){return p((function(){return{main:e}}))}})}),[r,i,s,p]),w=(0,l.useMemo)((function(){return(0,y.jsx)(S.Z,{columnFlex:[null,null,null,null,null,null,null],columns:[{uuid:"ID"},{uuid:"URL"},{uuid:"Name"},{uuid:"Version"},{uuid:"Spark user"},{uuid:"Started at"},{rightAligned:!0,uuid:"Last updated"}],rows:null===t||void 0===t?void 0:t.map((function(e){var n=e.attempts,t=e.id,r=e.name,i=e.spark_ui_url,o=(null===n||void 0===n?void 0:n[0])||{},s=o.app_spark_version,c=o.last_updated_epoch,u=o.start_time_epoch,a=o.spark_user,d=u&&(0,M.JX)(u/1e3,{withSeconds:!0}),f=d&&(0,M.XG)(d,k);return[(0,l.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"id"}),t),(0,l.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"sparkUIURL"}),i),(0,l.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"name"}),r),(0,l.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"version"}),s),(0,l.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"sparkUser"}),a),(0,l.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"startTime"}),f||"-"),(0,l.createElement)(Z.ZP,ne(ne({},$.eB),{},{key:"lastUpdated",rightAligned:!0}),c?(0,M.XG)((0,M.JX)(c/1e3,{withSeconds:!0}),k):"-")]})),uuid:"applications"})}),[t,k]),E=(0,l.useMemo)((function(){var e={};return null===c||void 0===c||c.forEach((function(n){var t,r,i=null===n||void 0===n?void 0:n.application;(null===i||void 0===i?void 0:i.calculated_id)in e||(e[null===i||void 0===i?void 0:i.calculated_id]={application:i,jobs:[]}),null===(t=e[null===i||void 0===i?void 0:i.calculated_id])||void 0===t||null===(r=t.jobs)||void 0===r||r.push(n)})),Object.values(e).map((function(e){var n=e.application,t=e.jobs;return(0,y.jsxs)("div",{children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(Z.ZP,{default:!0,bold:!0,children:["Application ",null===n||void 0===n?void 0:n.calculated_id]})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(Y.Z,{jobs:t,stagesMapping:O})]},null===n||void 0===n?void 0:n.calculated_id)}))}),[c,O]),B=(0,l.useMemo)((function(){return(0,y.jsx)(Q.Z,{setSelectedSql:f,stagesMapping:O})}),[f,O]),T=(0,l.useMemo)((function(){var e=[{label:function(){return(0,y.jsxs)(y.Fragment,{children:[te,"\xa0\xa0\xa0",u?"":(null===t||void 0===t?void 0:t.length)||0]})},uuid:te},{label:function(){return(0,y.jsxs)(y.Fragment,{children:[ie,"\xa0\xa0\xa0",a?"":(null===c||void 0===c?void 0:c.length)||0]})},uuid:ie},{label:function(){return oe},uuid:oe}];return(null===r||void 0===r?void 0:r.length)>=1&&e.unshift({label:function(){return re},uuid:re}),e}),[r,s]);return(0,l.useEffect)((function(){j||o||((null===r||void 0===r?void 0:r.length)>=1?P(re):P(te))}),[r,o,j,P]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{px:b.cd,children:(0,y.jsx)(J.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return P(n)},ref:d,regularSizeText:!0,selectedTabUUID:j,tabs:T,underlineColor:null===v||void 0===v||null===(n=v.accent)||void 0===n?void 0:n.blue,underlineStyle:!0})}),(0,y.jsx)(m.Z,{light:!0}),re===j&&C,te===j&&w,ie===j&&E,oe===j&&B]})},se=t(17488),ce=t(8193);function ue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ue(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var de=function(e){var n=e.addButtonText,t=e.addTextInputPlaceholder,r=e.alreadyExistsMessage,i=e.configurationValuePlaceholder,o=e.configurations,u=e.createButtonText,d=e.description,f=e.emptyState,p=e.setConfigurations,v=e.title,P=(0,l.useRef)(null),k=(0,l.useState)(!1),_=k[0],C=k[1],S=(0,l.useState)(null),w=S[0],I=S[1],M=(0,l.useMemo)((function(){var e;return(null===(e=Object.keys(o||{}))||void 0===e?void 0:e.length)>=1}),[o]),A=(0,l.useMemo)((function(){return w in(o||{})}),[o,w]),B=(0,l.useMemo)((function(){return(0,y.jsxs)(h.ZP,{alignItems:"center",children:[!_&&(0,y.jsx)(a.ZP,{beforeIcon:(0,y.jsx)(E.Add,{}),compact:!0,onClick:function(e){(0,z.j)(e),C(!0),setTimeout((function(){var e;return null===P||void 0===P||null===(e=P.current)||void 0===e?void 0:e.focus()}),1)},secondary:!M,small:!0,children:n||"Add configuration"}),_&&(0,y.jsxs)(y.Fragment,{children:[A&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Z.ZP,{danger:!0,small:!0,children:r||"Already exists"}),(0,y.jsx)(g.Z,{mr:1})]}),(0,y.jsx)(se.Z,{autoComplete:"off",compact:!0,meta:{touched:!!A,error:""},monospace:!0,onClick:function(e){return(0,z.j)(e)},paddingVertical:b.iI/2-2,placeholder:t,onChange:function(e){(0,z.j)(e),I(e.target.value)},ref:P,small:!0,value:w||""}),(0,y.jsx)(g.Z,{mr:1}),(0,y.jsx)(a.ZP,{disabled:A,compact:!0,onClick:function(e){(0,z.j)(e),A||(p(ae(ae({},o),{},(0,s.Z)({},w,""))),C(!1),I(null))},primary:!0,small:!0,children:u||"Create configuration"}),(0,y.jsx)(g.Z,{mr:1}),(0,y.jsx)(a.ZP,{compact:!0,onClick:function(e){(0,z.j)(e),C(!1),I(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[n,A,o,M,_,w,P,C,I]),T=(0,l.useMemo)((function(){return Object.entries(o||{}).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return(0,y.jsxs)("div",{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(a.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e=ae({},o);null===e||void 0===e||delete e[t],p(e)},children:(0,y.jsx)(E.Trash,{default:!0,size:ce.Z})}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(Z.ZP,{default:!0,large:!0,monospace:!0,children:t}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return p(ae(ae({},o),{},(0,s.Z)({},t,e.target.value)))},paddingHorizontal:0,paddingVertical:0,placeholder:i,value:r||""})})]})})]},t)}))}),[o,p]);return(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsx)(j.Z,{level:4,children:v}),d&&(0,y.jsx)(g.Z,{mt:1,children:d})]}),(0,y.jsx)(g.Z,{mr:b.cd}),M&&(0,y.jsx)(h.ZP,{alignItems:"center",children:B})]})}),!M&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsxs)(g.Z,{p:b.cd,children:[f&&(0,y.jsx)(g.Z,{mb:b.cd,children:(0,y.jsx)(Z.ZP,{default:!0,children:f})}),(0,y.jsx)(h.ZP,{alignItems:"center",children:B})]})]}),M&&T]})},fe=t(74260);function pe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pe(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var me=function(e){var n,t=e.attributesTouched,r=e.isLoading,i=e.mutateObject,o=e.objectAttributes,s=e.onCancel,c=e.selectedComputeService,u=e.setObjectAttributes,d=(0,l.useCallback)((function(e){return u({emr_config:ve(ve({},null===o||void 0===o?void 0:o.emr_config),e)})}),[o,u]),f=(0,l.useCallback)((function(e){return u({spark_config:ve(ve({},null===o||void 0===o?void 0:o.spark_config),e)})}),[o,u]),p=(0,l.useMemo)((function(){return(null===o||void 0===o?void 0:o.emr_config)||{}}),[o]),v=(0,l.useMemo)((function(){return(null===o||void 0===o?void 0:o.spark_config)||{}}),[o]);return(0,y.jsxs)(ce.N,{children:[(0,y.jsx)(de,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null===v||void 0===v?void 0:v.others,createButtonText:"Create Spark configuration",description:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(Z.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"}),", e.g. ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"spark.executor.memory=4g"}),"."]}),(0,y.jsxs)(Z.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,y.jsx)(q.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no executor Spark configurations.",setConfigurations:function(e){return f({others:e})},title:"Spark configurations"}),(0,y.jsx)(g.Z,{mb:b.HN}),fe.GO.AWS_EMR===c&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsx)(j.Z,{level:4,warning:!(null!==p&&void 0!==p&&p.ec2_key_name)||!(null!==p&&void 0!==p&&p.ec2_key_path),children:"Spark observability"}),(!(null!==p&&void 0!==p&&p.ec2_key_name)||!(null!==p&&void 0!==p&&p.ec2_key_path))&&"ec2_key_name"in((null===t||void 0===t?void 0:t.emr_config)||{})&&"ec2_key_path"in((null===t||void 0===t?void 0:t.emr_config)||{})&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(g.Z,{mt:1,children:(0,y.jsxs)(Z.ZP,{warning:!0,children:["Without all the fields in this section present and valid, Mage won\u2019t automatically create the SSH tunnel.",(0,y.jsx)("br",{}),"You must manually create the SSH tunnel in order for Mage to retrieve and display the Spark jobs, statuses, metrics, and system information."]})})}),(0,y.jsx)(g.Z,{mt:1,children:(0,y.jsxs)(Z.ZP,{muted:!0,children:["In order to see the Spark jobs, statuses, metrics, and system information, an SSH tunnel to the AWS EMR Master Node must be created.",(0,y.jsx)("br",{}),"Mage can automatically create the SSH tunnel for you if every field in this section is present and valid."]})}),(0,y.jsx)(g.Z,{mt:1,children:(0,y.jsx)(Z.ZP,{muted:!0})})]})})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"EC2 key name"}),(0,y.jsxs)(Z.ZP,{muted:!0,small:!0,children:["SSH tunnel into the EMR cluster using a key pair created from the ",(0,y.jsx)(q.Z,{href:"https://console.aws.amazon.com/ec2/home#KeyPairs",inline:!0,openNewWindow:!0,small:!0,children:"AWS guide"}),"."]})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({ec2_key_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. ec2_key_pair_name",value:(null===p||void 0===p?void 0:p.ec2_key_name)||""})})]})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"EC2 key path"}),(0,y.jsx)(Z.ZP,{muted:!0,small:!0,children:"The absolute file path to the EC2 public key that was used when creating a cluster."})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",large:!0,monospace:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({ec2_key_path:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. ec2_key_pair_name",value:(null===p||void 0===p?void 0:p.ec2_key_path)||""})})]})})]}),(0,y.jsx)(g.Z,{mb:b.HN}),(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsx)(j.Z,{level:4,children:"EMR instance types"}),(0,y.jsx)(g.Z,{mt:1,children:(0,y.jsxs)(Z.ZP,{muted:!0,children:["Refer to the ",(0,y.jsx)(q.Z,{href:"https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-supported-instance-types.html",openNewWindow:!0,children:"AWS EMR"})," documentation for all supported EMR instance types."]})})]})})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(h.ZP,{flexDirection:"column",children:(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Master instance type"})}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({master_instance_type:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. r5.4xlarge",value:(null===p||void 0===p?void 0:p.master_instance_type)||""})})]})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(h.ZP,{flexDirection:"column",children:(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Slave instance type"})}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({slave_instance_type:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. r5.2xlarge",value:(null===p||void 0===p?void 0:p.slave_instance_type)||""})})]})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(h.ZP,{flexDirection:"column",children:(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Number of slave instances"})}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){var n=e.target.value||"";(""===n||/^\d+$/.exec(n))&&d({slave_instance_count:n})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. 2",value:(null===p||void 0===p?void 0:p.slave_instance_count)||""})})]})})]}),(0,y.jsx)(g.Z,{mb:b.HN}),(0,y.jsx)(de,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null===p||void 0===p?void 0:p.master_spark_properties,createButtonText:"Create Spark configuration",description:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(Z.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"})," for the master instance."]}),(0,y.jsxs)(Z.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,y.jsx)(q.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no Spark configurations for the master instance.",setConfigurations:function(e){return d({master_spark_properties:e})},title:"Master Spark configurations"}),(0,y.jsx)(g.Z,{mb:b.HN}),(0,y.jsx)(de,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null===p||void 0===p?void 0:p.slave_spark_properties,createButtonText:"Create Spark configuration",description:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(Z.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"})," for the slave instance."]}),(0,y.jsxs)(Z.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,y.jsx)(q.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no Spark configurations for the slave instance.",setConfigurations:function(e){return d({slave_spark_properties:e})},title:"Slave Spark configurations"}),(0,y.jsx)(g.Z,{mb:b.HN}),(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsx)(j.Z,{level:4,children:"Security"}),(0,y.jsx)(g.Z,{mt:1,children:(0,y.jsx)(Z.ZP,{muted:!0,children:"Configure security groups for EMR cluster instances."})})]})})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Master security group"}),(0,y.jsxs)(Z.ZP,{muted:!0,small:!0,children:["The default managed security group is ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"ElasticMapReduce-master"}),"."]})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({master_security_group:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. sg-xxxxxxxxxxxx",value:(null===p||void 0===p?void 0:p.master_security_group)||""})})]})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Slave security group"}),(0,y.jsxs)(Z.ZP,{muted:!0,small:!0,children:["The default managed security group is ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"ElasticMapReduce-slave"}),"."]})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({slave_security_group:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. sg-yyyyyyyyyyyy",value:(null===p||void 0===p?void 0:p.slave_security_group)||""})})]})})]}),(0,y.jsx)(g.Z,{mb:b.HN})]}),(0,y.jsxs)(h.ZP,{children:[(0,y.jsx)(a.ZP,{beforeIcon:(0,y.jsx)(E.Save,{}),disabled:!t||!(null!==(n=Object.keys(t))&&void 0!==n&&n.length),loading:r,onClick:function(){return i()},primary:!0,children:"Save changes"}),s&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(a.ZP,{onClick:function(){return null===s||void 0===s?void 0:s()},secondary:!0,children:"Cancel and go back"})]})]})]})},he=t(77456),je=t(86735);function xe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ge(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xe(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze=function(e){var n,t,r=e.attributesTouched,i=e.computeService,o=e.isLoading,s=e.mutateObject,c=e.objectAttributes,u=e.onCancel,d=e.selectedComputeService,f=e.setObjectAttributes,p=(0,l.useCallback)((function(e){return f({emr_config:ge(ge({},null===c||void 0===c?void 0:c.emr_config),e)})}),[c,f]),v=(0,l.useCallback)((function(e){return f({spark_config:ge(ge({},null===c||void 0===c?void 0:c.spark_config),e)})}),[c,f]),P=(0,l.useMemo)((function(){return(null===c||void 0===c?void 0:c.emr_config)||{}}),[c]),k=(0,l.useMemo)((function(){return(null===c||void 0===c?void 0:c.spark_config)||{}}),[c]),_=(0,l.useRef)(null),C=(0,l.useState)(!1),S=C[0],I=C[1],M=(0,l.useState)(null),A=M[0],B=M[1],T=(0,l.useMemo)((function(){return((null===k||void 0===k?void 0:k.spark_jars)||[]).map((function(e){return{config:$.Ts.SPARK,value:e}}))}),[k]),R=(0,l.useMemo)((function(){return((null===P||void 0===P?void 0:P.spark_jars)||[]).map((function(e){return{config:$.Ts.EMR,value:e}}))}),[P]),D=(0,l.useMemo)((function(){return T.concat(R)}),[R,T]),N=(0,l.useMemo)((function(){return(null===D||void 0===D?void 0:D.length)>=1}),[D]),H=(0,l.useMemo)((function(){return(D||[]).some((function(e){return e.value===A}))}),[D,A]),W=(0,l.useMemo)((function(){return(0,y.jsxs)(h.ZP,{alignItems:"center",children:[!S&&(0,y.jsx)(a.ZP,{beforeIcon:(0,y.jsx)(E.Add,{}),compact:!0,onClick:function(e){(0,z.j)(e),I(!0),setTimeout((function(){var e;return null===_||void 0===_||null===(e=_.current)||void 0===e?void 0:e.focus()}),1)},secondary:!N,small:!0,children:"Add JAR file"}),S&&(0,y.jsxs)(y.Fragment,{children:[H&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Z.ZP,{danger:!0,small:!0,children:"JAR file exists"}),(0,y.jsx)(g.Z,{mr:1})]}),(0,y.jsx)(se.Z,{autoComplete:"off",compact:!0,meta:{error:"",touched:!!H},minWidth:30*b.iI,monospace:!0,onChange:function(e){(0,z.j)(e),B(e.target.value)},onClick:function(e){return(0,z.j)(e)},paddingVertical:b.iI/2-2,placeholder:"e.g. /home/path/example1.jar",ref:_,small:!0,value:A||""}),(0,y.jsx)(g.Z,{mr:1}),(0,y.jsx)(a.ZP,{compact:!0,disabled:H,onClick:function(e){if((0,z.j)(e),!H){if(d===fe.GO.AWS_EMR){var n=R.map((function(e){return e.value})).concat(A);p({spark_jars:n})}else{var t=T.map((function(e){return e.value})).concat(A);v({spark_jars:t})}I(!1),B(null)}},primary:!0,small:!0,children:"Add JAR file"}),(0,y.jsx)(g.Z,{mr:1}),(0,y.jsx)(a.ZP,{compact:!0,onClick:function(e){(0,z.j)(e),I(!1),B(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[S,N,H,A,R,d,p,T,v]),F=(0,l.useMemo)((function(){return null===D||void 0===D?void 0:D.map((function(e,n){var t=e.config,r=e.value;return(0,y.jsxs)("div",{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(a.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){if(t===$.Ts.EMR){var e=R.map((function(e){return e.value}));p({spark_jars:(0,je.oM)(e,n-T.length)})}else{var r=T.map((function(e){return e.value}));v({spark_jars:(0,je.oM)(r,n)})}},children:(0,y.jsx)(E.Trash,{default:!0,size:ce.Z})}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsxs)(Z.ZP,{default:!0,large:!0,monospace:!0,children:["File ",n+1," (",t,")"]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,justifyContent:"flex-end",children:(0,y.jsx)(Z.ZP,{large:!0,monospace:!0,children:r})})]})})]},r)}))}),[D,R,p,v,T]),L=(0,l.useMemo)((function(){var e="remote_variables_dir",n=null===i||void 0===i?void 0:i.setup_steps,t=null===n||void 0===n?void 0:n.find((function(n){return n.uuid===e}));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"flex-start",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsxs)(Z.ZP,{danger:!(null!==c&&void 0!==c&&c.remote_variables_dir)||!(null===t||void 0===t||!t.error),default:!0,large:!0,children:["Remote variables directory ",!(null!==c&&void 0!==c&&c.remote_variables_dir)&&(0,y.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,y.jsx)(Z.ZP,{muted:!0,small:!0,children:"This S3 bucket will be used by Spark."})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return f({remote_variables_dir:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. s3://magically-powerful-bucket",value:(null===c||void 0===c?void 0:c.remote_variables_dir)||""}),(null===t||void 0===t?void 0:t.error)&&(0,y.jsx)(h.ZP,{justifyContent:"flex-end",children:(0,y.jsx)(g.Z,{mt:1,children:(0,y.jsx)(he.Z,{error:null===t||void 0===t?void 0:t.error})})})]})]})})]})}),[i,c,f]);return(0,y.jsxs)(ce.N,{children:[(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"Setup"})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsxs)(Z.ZP,{danger:"app_name"in r&&!(null!==k&&void 0!==k&&k.app_name),default:!0,large:!0,children:["Application name ","app_name"in r&&!(null!==k&&void 0!==k&&k.app_name)&&(0,y.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",fullWidth:!0,large:!0,noBackground:!0,noBorder:!0,onChange:function(e){return v({app_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. Sparkmage",value:(null===k||void 0===k?void 0:k.app_name)||""})})]})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"flex-start",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsxs)(Z.ZP,{danger:"spark_master"in r&&!(null!==k&&void 0!==k&&k.spark_master),default:!0,large:!0,children:["Master URL ","spark_master"in r&&!(null!==k&&void 0!==k&&k.spark_master)&&(0,y.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,y.jsx)(Z.ZP,{muted:!0,small:!0,children:"The URL for connecting to the master."})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,fullWidth:!0,large:!0,noBackground:!0,noBorder:!0,onChange:function(e){return v({spark_master:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. local, yarn, spark://host:port",value:(null===k||void 0===k?void 0:k.spark_master)||""})})]})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"flex-start",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Spark home directory"}),(0,y.jsx)(Z.ZP,{muted:!0,small:!0,children:"Path where Spark is installed on worker nodes."})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return v({spark_home:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. /usr/lib/spark",value:(null===k||void 0===k?void 0:k.spark_home)||""})})]})}),fe.GO.AWS_EMR===d&&L]}),(0,y.jsx)(g.Z,{mb:b.HN}),(null===i||void 0===i?void 0:i.connection_credentials)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"Credentials"})}),null===i||void 0===i||null===(n=i.connection_credentials)||void 0===n?void 0:n.map((function(e){var n=e.description,t=e.error,r=e.name,i=e.required,o=e.uuid,l=e.valid,s=e.value;return(0,y.jsxs)("div",{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsxs)(Z.ZP,{danger:!l,default:!0,large:!0,monospace:!r,children:[r||o," ",!l&&(0,y.jsx)(Z.ZP,{danger:!0,inline:!0,large:!0,children:"is invalid"})]}),n&&(0,y.jsx)(Z.ZP,{muted:!0,small:!0,children:n})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsxs)(x.Z,{flex:1,justifyContent:"flex-end",children:[!l&&(0,y.jsxs)(y.Fragment,{children:[!t&&i&&(0,y.jsx)(Z.ZP,{large:!0,muted:!0,children:"Required but missing"}),!t&&!i&&(0,y.jsx)(Z.ZP,{large:!0,muted:!0,children:"Invalid"}),t&&(0,y.jsx)(he.Z,{error:t,large:!0})]}),l&&s&&(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:s})]})]})})]},o)}))]}),(0,y.jsx)(g.Z,{mb:b.HN})]}),(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(j.Z,{level:4,children:"Customizations"})}),(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"flex-start",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Use custom session"}),(0,y.jsxs)(Z.ZP,{muted:!0,small:!0,children:["Whether to create custom SparkSession via",(0,y.jsx)("br",{}),"code and set it in ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']"}),"."]})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,justifyContent:"flex-end",children:(0,y.jsx)(w.Z,{checked:null===k||void 0===k?void 0:k.use_custom_session,compact:!0,onCheck:function(e){return v({use_custom_session:e(null===k||void 0===k?void 0:k.use_custom_session)})}})})]})}),(null===k||void 0===k?void 0:k.use_custom_session)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"flex-start",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Custom session variable"}),(0,y.jsxs)(Z.ZP,{muted:!0,small:!0,children:["The variable name to set in ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']"}),",",(0,y.jsx)("br",{}),"e.g. If variable name is ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"spark"})," then the Spark session",(0,y.jsx)("br",{}),"is accessed using ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']['spark']"}),"."]})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return v({custom_session_var_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. spark",value:(null===k||void 0===k?void 0:k.custom_session_var_name)||""})})]})})]}),fe.GO.AWS_EMR===d&&(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsxs)(h.ZP,{flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,large:!0,children:"Bootstrap script path"}),(0,y.jsx)(Z.ZP,{muted:!0,small:!0,children:"Use a custom script to bootstrap the EMR cluster."})]}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(x.Z,{flex:1,children:(0,y.jsx)(se.Z,{afterIcon:(0,y.jsx)(E.Edit,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:ce.Z,alignRight:!0,autoComplete:"off",fullWidth:!0,large:!0,noBackground:!0,noBorder:!0,onChange:function(e){return p({bootstrap_script_path:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. /path/to/emr_bootstrap.sh",value:(null===P||void 0===P?void 0:P.bootstrap_script_path)||""})})]})})]}),(0,y.jsx)(g.Z,{mb:b.HN}),(0,y.jsx)(de,{addButtonText:"Add environment variable",addTextInputPlaceholder:"e.g. PYTHONPATH",alreadyExistsMessage:"Environment variable exists",configurationValuePlaceholder:"e.g. /home/path",configurations:null===k||void 0===k?void 0:k.executor_env,createButtonText:"Create environment variable",description:(0,y.jsx)(Z.ZP,{muted:!0,children:"Environment variables for the executor."}),emptyState:"There are currently no executor environment variables.",setConfigurations:function(e){return v({executor_env:e})},title:"Environment variables"}),(0,y.jsx)(g.Z,{mb:b.HN}),(0,y.jsxs)(O.Z,{noPadding:!0,children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsx)(h.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,y.jsx)(j.Z,{level:4,children:"JAR files"}),N&&W]}),(0,y.jsx)(g.Z,{mt:1,children:(0,y.jsxs)(Z.ZP,{muted:!0,children:["These files will be uploaded to the cluster and added to the ",(0,y.jsx)(Z.ZP,{inline:!0,monospace:!0,muted:!0,children:"classpath"}),"."]})})]})})}),!N&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsxs)(g.Z,{p:b.cd,children:[(0,y.jsx)(g.Z,{mb:b.cd,children:(0,y.jsx)(Z.ZP,{default:!0,children:"There are currently no JAR files."})}),(0,y.jsx)(h.ZP,{alignItems:"center",children:W})]})]}),N&&F]}),(0,y.jsx)(g.Z,{mb:b.HN}),(0,y.jsxs)(h.ZP,{children:[(0,y.jsx)(a.ZP,{beforeIcon:(0,y.jsx)(E.Save,{}),disabled:!r||!(null!==(t=Object.keys(r))&&void 0!==t&&t.length),loading:o,onClick:function(){return s()},primary:!0,children:"Save changes"}),u&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(a.ZP,{onClick:function(){return null===u||void 0===u?void 0:u()},secondary:!0,children:"Cancel and go back"})]})]})]})},be=t(35185);var ye=function(e){var n=e.computeService,t=e.onClick,r=(0,l.useMemo)((function(){var e,t=[],r=0;return null===n||void 0===n||null===(e=n.setup_steps)||void 0===e||e.forEach((function(e){var n=e.group,i=e.required,o=e.status_calculated,l=e.steps;n?null===l||void 0===l||l.forEach((function(e){t.push(e);var n=e.required,i=e.status_calculated;n&&fe.br.COMPLETED!==i||(r+=1)})):(t.push(e),i&&fe.br.COMPLETED!==o||(r+=1))})),{steps:t,stepsCompleted:r}}),[n]),i=r.steps,o=r.stepsCompleted,s=(0,l.useMemo)((function(){return(null===i||void 0===i?void 0:i.length)||1}),[i]),c=(0,l.useMemo)((function(){return o/s}),[o,s]);return(0,y.jsxs)(q.Z,{block:!0,noHoverUnderline:!0,noOutline:!0,onClick:t?function(){return null===t||void 0===t?void 0:t()}:null,preventDefault:!0,children:[(0,y.jsx)(m.Z,{light:!0}),(0,y.jsxs)(g.Z,{p:b.cd,children:[(0,y.jsx)(g.Z,{mb:1,children:(0,y.jsxs)(Z.ZP,{monospace:!0,muted:!0,children:[(0,y.jsx)(Z.ZP,{default:!0,inline:!0,children:o})," / ",(0,y.jsx)(Z.ZP,{default:!0,inline:!0,children:s})," ",(0,R._6)("step",s,!1,!0)," completed"]})}),(0,y.jsx)(be.Z,{progress:100*c})]}),(0,y.jsx)(m.Z,{light:!0})]})},Pe=t(78688),ke=t(72748),_e=t(32013),Oe=t(98777);function Ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ce(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var we="Environment",Ie="Executors";var Ee=function(e){e.objectAttributes;var n,t=(0,l.useContext)(A.ThemeContext),r=(0,l.useState)(we),i=r[0],o=r[1],s=I.ZP.spark_executors.list().data,u=(0,l.useMemo)((function(){return null===s||void 0===s?void 0:s.spark_executors}),[s]),a=I.ZP.spark_environments.detail("0").data,d=(0,l.useMemo)((function(){return null===a||void 0===a?void 0:a.spark_environment}),[a]),f=(0,l.useMemo)((function(){var e,n,t,r,i,o,s;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{px:b.cd,children:(0,y.jsxs)(_e.Z,{noBoxShadow:!0,children:[(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Runtime",children:[(0,y.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(e=Object.entries((null===d||void 0===d?void 0:d.runtime)||{}))||void 0===e?void 0:e.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,y.jsx)(g.Z,{p:1})]}),(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Hadoop properties",children:[(0,y.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(n=d.hadoop_properties)||void 0===n?void 0:n.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,y.jsx)(g.Z,{p:1})]}),(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Metrics properties",children:[(0,y.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(t=d.metrics_properties)||void 0===t?void 0:t.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,y.jsx)(g.Z,{p:1})]}),(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Spark properties",children:[(0,y.jsx)(S.Z,{columnFlex:[1,4],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(r=d.spark_properties)||void 0===r?void 0:r.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,y.jsx)(g.Z,{p:1})]}),(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"System properties",children:[(0,y.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(i=d.system_properties)||void 0===i?void 0:i.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),e[0]),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1])]}))}),(0,y.jsx)(g.Z,{p:1})]}),(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Classpath entries",children:[(0,y.jsx)(S.Z,{columnFlex:[null,null],columns:[{uuid:"Type"},{uuid:"Value"}],rows:null===d||void 0===d||null===(o=d.classpath_entries)||void 0===o?void 0:o.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"type"}),e[1]),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[0])]}))}),(0,y.jsx)(g.Z,{p:1})]})]})}),null===d||void 0===d||null===(s=d.resource_profiles)||void 0===s?void 0:s.map((function(e){var n=e.executor_resources,t=e.id,r=e.task_resources;return(0,y.jsxs)("div",{children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(j.Z,{level:4,children:["Executor resources ID ",t]})}),(0,y.jsx)(g.Z,{px:b.cd,children:(0,y.jsx)(_e.Z,{noBoxShadow:!0,children:Object.entries(n||{}).map((function(e){var n,t=(0,c.Z)(e,2),r=t[0],i=t[1];return(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:(0,R.vg)(r),children:[(0,y.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(n=Object.entries(i))||void 0===n?void 0:n.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(e[0])),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1]||"-")]}))}),(0,y.jsx)(g.Z,{p:1})]},r)}))})}),(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(j.Z,{level:4,children:["Task resources ID ",t]})}),(0,y.jsx)(g.Z,{px:b.cd,children:(0,y.jsx)(_e.Z,{noBoxShadow:!0,children:Object.entries(r||{}).map((function(e){var n,t=(0,c.Z)(e,2),r=t[0],i=t[1];return(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:(0,R.vg)(r),children:[(0,y.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(n=Object.entries(i))||void 0===n?void 0:n.map((function(e){return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(e[0])),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),e[1]||"-")]}))}),(0,y.jsx)(g.Z,{p:1})]},r)}))})})]},t)}))]})}),[d]),p=(0,l.useMemo)((function(){return null===u||void 0===u?void 0:u.map((function(e){return(0,y.jsxs)("div",{children:[(0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(j.Z,{level:4,children:["Executor ",null===e||void 0===e?void 0:e.id]})}),(0,y.jsx)(g.Z,{px:b.cd,children:(0,y.jsxs)(_e.Z,{noBoxShadow:!0,children:[(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Metrics",children:[(0,y.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:["active_tasks","add_time","completed_tasks","disk_used","failed_tasks","host_port","is_active","is_blacklisted","is_excluded","max_memory","max_tasks","memory_used","rdd_blocks","resource_profile_id","total_cores","total_duration","total_gc_time","total_input_bytes","total_shuffle_read","total_shuffle_write","total_tasks"].map((function(n){var t=null===e||void 0===e?void 0:e[n];return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(n)),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),"undefined"===typeof t?"-":"boolean"===typeof t?String(t):t)]}))}),(0,y.jsx)(g.Z,{p:1})]}),(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Memory metrics",children:[(0,y.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:Object.entries((null===e||void 0===e?void 0:e.memory_metrics)||{}).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(t)),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),"undefined"===typeof r?"-":"boolean"===typeof r?String(r):r)]}))}),(0,y.jsx)(g.Z,{p:1})]}),(0,y.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Peak memory metrics",children:[(0,y.jsx)(S.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:Object.entries((null===e||void 0===e?void 0:e.peak_memory_metrics)||{}).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return[(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"property"}),(0,R.vg)(t)),(0,l.createElement)(Z.ZP,Se(Se({},$.eB),{},{key:"value"}),"undefined"===typeof r?"-":"boolean"===typeof r?String(r):r)]}))}),(0,y.jsx)(g.Z,{p:1})]})]})})]},null===e||void 0===e?void 0:e.id)}))}),[u]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{px:b.cd,children:(0,y.jsx)(J.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return o(n)},regularSizeText:!0,selectedTabUUID:i,tabs:[{label:function(){return we},uuid:we},{label:function(){return Ie},uuid:Ie}],underlineColor:null===t||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.blue,underlineStyle:!0})}),(0,y.jsx)(g.Z,{mb:b.cd,children:(0,y.jsx)(m.Z,{light:!0})}),we===i&&f,Ie===i&&p]})},Me=t(62547),Ae=t(23657),Be=t(74778),Te=t(75375),Re=t(46684),De=t(53808),Ne=t(10332),ze=t(15610),He=t(69419),We=t(19183);function Fe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Fe(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ve=function(e){var n,t=e.contained,r=e.heightOffset,i=e.mainContainerRef,o=(0,We.i)(),d=o.height,f=(o.width,(0,l.useMemo)((function(){return"ComputeManagement/".concat(t?"contained":"open")}),[t])),p=(0,F.VI)(null,{},[],{uuid:f}),v=(0,c.Z)(p,1)[0],m=((0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null)),P=(0,l.useMemo)((function(){return d-(r||0)}),[r,d]),k=(0,l.useState)(!1),_=k[0],O=k[1],C=(0,l.useState)(null),S=C[0],w=C[1],M=(0,Ae.Z)({clustersRefreshInterval:1e4,includeAllStates:_}),A=M.activeCluster,B=M.clusters,T=M.clustersLoading,R=M.computeService,D=M.connections,z=M.connectionsLoading,W=M.fetchAll,L=M.setupComplete,V=(0,l.useState)(null),U=V[0],G=V[1];(0,l.useEffect)((function(){var e;G(null===m||void 0===m||null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect())}),[d,m]);var J=(0,l.useMemo)((function(){return"compute_management_after_width_".concat(f)}),[f]),K=(0,l.useMemo)((function(){return"compute_management_before_width_".concat(f)}),[f]),Y=(0,l.useState)((0,De.U2)(J,60*b.iI)),Q=Y[0],ee=Y[1],ne=(0,l.useCallback)((function(e){ee(e),(0,De.t8)(J,Math.max(e,60*b.iI))}),[J,ee]),te=(0,l.useState)(!1),re=te[0],ie=te[1],oe=(0,l.useState)(Math.max((0,De.U2)(K),20*b.iI)),se=oe[0],ce=oe[1],ue=(0,l.useCallback)((function(e){ce((e||20*b.iI)-Te.H),(0,De.t8)(K,e||20*b.iI)}),[K,ce]),ae=(0,l.useState)(!1),de=ae[0],fe=ae[1],pe=(0,l.useState)(!0),ve=pe[0],he=pe[1],je=(0,l.useState)(null),xe=je[0],ge=je[1],be=(0,l.useCallback)((function(e){ge((function(n){var t=e(n);return t&&ve?he(!1):t||ve||!L||he(!0),t}))}),[ve,he,ge,L]),_e=(0,l.useState)(null),Oe=_e[0],Ce=_e[1],Se=(0,l.useCallback)((function(e){var n;(0,ze.u)((0,s.Z)({},"tab",null===(n="function"===typeof e?null===e||void 0===e?void 0:e():e)||void 0===n?void 0:n.main)),be((function(){return null}))}),[be]),we=(0,He.iV)();(0,l.useEffect)((function(){var e=null===we||void 0===we?void 0:we.tab;(null===Oe||void 0===Oe?void 0:Oe.main)!==e&&Ce(e?{main:e}:null)}),[Oe,we]);var Ie=(0,l.useState)(null),Fe=Ie[0],Ve=Ie[1],Ue=(0,l.useState)({}),Ge=Ue[0],Xe=Ue[1],qe=(0,l.useCallback)((function(e){Xe((function(n){return Le(Le({},n),e)})),Ve((function(n){return Le(Le({},n),e)}))}),[Xe,Ve]),Je=((0,l.useCallback)((function(e){return qe({spark_config:Le(Le({},null===Fe||void 0===Fe?void 0:Fe.spark_config),e)})}),[Fe,qe]),I.ZP.projects.list({},{revalidateOnFocus:!1})),Ke=Je.data,Ye=Je.mutate,Qe=(0,l.useMemo)((function(){var e;return null===Ke||void 0===Ke||null===(e=Ke.projects)||void 0===e?void 0:e[0]}),[Ke]),$e=(0,l.useMemo)((function(){return null===Qe||void 0===Qe?void 0:Qe.name}),[Qe]),en=I.ZP.spark_applications.list().data,nn=(0,l.useMemo)((function(){return null===en||void 0===en?void 0:en.spark_applications}),[en]),tn=I.ZP.spark_jobs.list().data,rn=(0,l.useMemo)((function(){return null===tn||void 0===tn?void 0:tn.spark_jobs}),[tn]);(0,l.useEffect)((function(){he(L)}),[L]),(0,l.useEffect)((function(){Qe&&(Ve(Qe),w((0,Ne.d)(Qe)))}),[Qe,Ve,w,Se]),(0,l.useEffect)((function(){!Oe&&S&&Se({main:$.uK.SETUP})}),[S,Oe,Se]);var on=(0,u.Db)(I.ZP.projects.useUpdate($e),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(e){var n=e.project;Xe({}),Ve(n),W(),Ye()},onErrorCallback:function(e,n){return v({errors:n,response:e})}})}}),ln=(0,c.Z)(on,2),sn=ln[0],cn=ln[1].isLoading,un=(0,l.useCallback)((function(e){return sn({project:(0,H.GL)(Le(Le({},Fe),e),["emr_config","remote_variables_dir","spark_config"])})}),[Fe,sn]),an=(0,l.useMemo)((function(){var e=(0,$.kI)(R).map((function(e){var n,t=e.Icon,r=e.renderStatus,i=e.uuid;return r&&(n=null===r||void 0===r?void 0:r({applications:nn,applicationsLoading:!en,clusters:B,clustersLoading:T,computeConnections:D,computeService:R,jobs:rn,jobsLoading:!tn})),(0,y.jsx)(q.Z,{block:!0,disabled:!S,noHoverUnderline:!0,noOutline:!0,onClick:function(){return Se((function(){return{main:i}}))},preventDefault:!0,children:(0,y.jsx)(Be.bC,{selected:(null===Oe||void 0===Oe?void 0:Oe.main)===i,children:(0,y.jsxs)(h.ZP,{alignItems:"center",fullHeight:!0,justifyContent:"space-between",children:[(0,y.jsxs)(x.Z,{alignItems:"center",flex:1,children:[(0,y.jsx)(t,{size:2*b.iI}),(0,y.jsx)(g.Z,{mr:2}),(0,y.jsx)(Z.ZP,{bold:!0,large:!0,children:$.TD[i]})]}),n&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g.Z,{mr:b.cd}),n]})]})})},i)}));if(S){var n=String(S),t=$.l[n],r=$.Eb[n],i=$.LF[n];if(t&&r&&i){var o,l;null!==R&&void 0!==R&&R.setup_steps&&(l=L?A?null!==A&&void 0!==A&&A.ready?"Cluster is ready, commence coding.":"Cluster activated and initializing.":"Setup complete but no clusters activated.":"All setup steps have not been completed yet.");var s=[];null!==R&&void 0!==R&&R.setup_steps&&s.push((0,y.jsx)(g.Z,{py:1,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[L&&(0,y.jsx)(E.PowerOnOffButton,{muted:!(null!==A&&void 0!==A&&A.ready),size:1.5*b.iI,success:null===A||void 0===A?void 0:A.ready}),!L&&(0,y.jsx)(E.AlertTriangle,{danger:!0,size:1.5*b.iI}),(0,y.jsx)(g.Z,{mr:1}),(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!L||!A,small:!0,children:L&&A?"Compute service connected":"Compute service unconnected"}),l&&(0,y.jsx)(Z.ZP,{muted:!0,xsmall:!0,children:l})]})]})},"compute-service-setup-steps")),(null===R||void 0===R||null===(o=R.setup_steps)||void 0===o?void 0:o.length)>=1&&!L&&e.unshift((0,y.jsx)(ye,{computeService:R,onClick:function(){return he(!1)}},"setupProgress")),e.unshift((0,y.jsx)(g.Z,{p:b.cd,children:(0,y.jsxs)(Be.UE,{inline:!0,children:[(0,y.jsxs)(h.ZP,{alignItems:"flex-start",children:[(0,y.jsx)(x.Z,{flex:1,children:i()}),(0,y.jsx)(a.ZP,{compact:!0,onClick:function(){w(null),Se(null)},secondary:!0,small:!0,children:"Change"})]}),(0,y.jsx)(g.Z,{mt:b.cd,children:(0,y.jsx)(h.ZP,{alignItems:"flex-end",children:(0,y.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,y.jsx)(Z.ZP,{default:!0,monospace:!0,children:r}),(0,y.jsx)(j.Z,{level:5,children:t})]})})}),(null===s||void 0===s?void 0:s.length)>=1&&(0,y.jsx)(g.Z,{mt:b.cd,children:s})]})},"".concat(t,"-").concat(r)))}}return e}),[A,nn,B,T,R,D,en,tn,rn,S,Oe,he,Se,L]),dn=(0,l.useMemo)((function(){var e;return xe?(0,y.jsx)(ke.Z,{height:P-(((null===U||void 0===U?void 0:U.height)||0)+Re.Mz+1),model:xe}):(null===R||void 0===R||null===(e=R.setup_steps)||void 0===e?void 0:e.length)>=1?(0,y.jsx)(Pe.Z,{onClickStep:function(e){return Se((function(){return{main:e}}))},setupSteps:null===R||void 0===R?void 0:R.setup_steps}):void 0}),[null===U||void 0===U?void 0:U.height,R,P,xe,Se]),fn=(0,l.useMemo)((function(){return(0,y.jsx)(Ze,{attributesTouched:Ge||{},computeService:R,isLoading:cn,mutateObject:un,objectAttributes:Fe,selectedComputeService:S,setObjectAttributes:qe})}),[Ge,R,cn,Fe,S,qe,un]),pn=(0,l.useMemo)((function(){return(0,y.jsx)(me,{attributesTouched:Ge||{},isLoading:cn,mutateObject:un,objectAttributes:Fe,selectedComputeService:S,setObjectAttributes:qe})}),[Ge,cn,Fe,S,qe,un]),vn=(0,l.useMemo)((function(){if([$.B2.AWS_EMR,$.B2.STANDALONE_CLUSTER].includes(S))return(0,y.jsx)(le,{applications:nn,computeConnections:D,computeService:R,connectionsLoading:z,fetchAll:W,jobs:rn,loadingApplications:!en,loadingJobs:!tn,objectAttributes:Fe,refButtonTabs:m,selectedComputeService:S,setSelectedSql:be,setSelectedTab:Se})}),[nn,R,D,z,W,en,tn,rn,Fe,m,S,be,Se]),mn=(0,l.useMemo)((function(){if([$.B2.AWS_EMR,$.B2.STANDALONE_CLUSTER].includes(S))return(0,y.jsx)(Ee,{objectAttributes:Fe})}),[Fe,S]),hn=(0,l.useMemo)((function(){return(0,y.jsxs)(g.Z,{mx:1,py:b.cd,children:[(0,y.jsx)(g.Z,{mb:b.cd,px:b.cd,children:(0,y.jsx)(j.Z,{children:"Select a compute service"})}),(0,y.jsx)(h.ZP,{alignItems:"center",flexWrap:"wrap",children:$.sY.map((function(e){var n=e.buildPayload,t=e.displayName,r=e.documentationHref,i=e.kicker,o=e.renderIcon,l=e.uuid;return(0,y.jsxs)(Be.UE,{children:[o(),(0,y.jsxs)(g.Z,{mt:b.cd,children:[(0,y.jsx)(Z.ZP,{default:!0,monospace:!0,children:i}),(0,y.jsx)(j.Z,{level:4,children:t})]}),(0,y.jsx)(g.Z,{mt:b.cd,children:(0,y.jsxs)(h.ZP,{alignItems:"center",children:[(0,y.jsx)(a.ZP,{loading:cn&&l===S,onClick:function(){w(l),un(n(Fe))},primary:!0,children:"Enable"}),(0,y.jsx)(g.Z,{mr:b.cd}),(0,y.jsx)(q.Z,{href:r,default:!0,openNewWindow:!0,children:"View setup documentation"})]})})]},l)}))})]})}),[cn,Fe,S,w,un]),jn=(0,l.useMemo)((function(){return(0,y.jsx)(X,{clusters:B,computeService:R,fetchAll:W,includeAllStates:_,loading:T,setIncludeAllStates:O})}),[B,T,R,W,_,O]),xn=(0,l.useMemo)((function(){if(!S&&Fe)return hn;if(S&&Qe&&null!==Oe&&void 0!==Oe&&Oe.main){var e=null===Oe||void 0===Oe?void 0:Oe.main;if($.uK.SETUP===e)return fn;if($.uK.RESOURCES===e)return pn;if($.uK.MONITORING===e)return vn;if($.uK.SYSTEM===e)return mn;if($.uK.CLUSTERS===e)return jn}}),[jn,hn,vn,Fe,Qe,pn,S,Oe,fn,mn]);return(0,y.jsx)(Me.Z,{after:dn,afterDividerContrast:!0,afterHeightOffset:Re.Mz,afterHidden:ve&&!xe,afterMousedownActive:re,afterWidth:Q,before:an,beforeDividerContrast:!0,beforeHeightOffset:0,beforeHidden:!S,beforeMousedownActive:de,beforeWidth:se,contained:!0,height:P,hideAfterCompletely:!(null!==R&&void 0!==R&&null!==(n=R.setup_steps)&&void 0!==n&&n.length),hideBeforeCompletely:!S,inline:!0,mainContainerRef:i,setAfterHidden:he,setAfterMousedownActive:ie,setAfterWidth:ne,setBeforeMousedownActive:fe,setBeforeWidth:ue,uuid:f,children:xn})},Ue=t(94629),Ge=t(93808);function Xe(){var e=(0,l.useRef)(null);return(0,y.jsx)(Ue.Z,{title:"Compute management",uuid:"Compute management/index",children:(0,y.jsx)("div",{ref:e,children:(0,y.jsx)(Ve,{heightOffset:Re.Mz,mainContainerRef:e})})})}Xe.getInitialProps=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var qe=(0,Ge.Z)(Xe)},42278:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/compute",function(){return t(4910)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(61049);function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(12539),i=t(80022);function o(e,n){if(n&&("object"===r(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}},function(e){e.O(0,[9774,1557,3366,2888,179],(function(){return n=42278,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
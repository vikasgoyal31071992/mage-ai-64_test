(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4947],{64657:function(e,t,n){"use strict";n.d(t,{CD:function(){return a},NU:function(){return o},a_:function(){return r},hu:function(){return l}});var r,i=n(44897);!function(e){e.BLOCK_RUNS="block_runs",e.BLOCK_RUNTIME="block_runtime",e.PIPELINE_RUNS="pipeline_runs"}(r||(r={}));var o=[i.Z.accent.warning,i.Z.background.success,i.Z.accent.negative,i.Z.content.active,i.Z.interactive.linkPrimary],l=["cancelled","completed","failed","initial","running"],a=-50},7116:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});n(82684);var r=n(34376),i=n(85854),o=n(75457),l=n(38276),a=n(30160),c=n(74395),u=n(25976),s=n(44897),d=n(70515),p=u.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-1in9sst-0"})(["padding:","px ","px;"," ",""],d.iI,d.tr,(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||s.Z.interactive).checked,";\n  ")}),(function(e){return!e.selected&&"\n    cursor: pointer;\n  "})),f=n(64657),h=n(28795),m=n(28598);var v=function(e){var t=e.breadcrumbs,n=e.children,u=e.errors,s=e.monitorType,v=e.pipeline,x=e.setErrors,g=e.subheader,y=(0,r.useRouter)();return(0,m.jsx)(o.Z,{before:(0,m.jsxs)(c.M,{children:[(0,m.jsx)(l.Z,{p:d.cd,children:(0,m.jsx)(i.Z,{level:4,muted:!0,children:"Insights"})}),(0,m.jsx)(p,{onClick:function(e){e.preventDefault(),y.push("/pipelines/[pipeline]/monitors","/pipelines/".concat(null===v||void 0===v?void 0:v.uuid,"/monitors"))},selected:f.a_.PIPELINE_RUNS==s,children:(0,m.jsx)(a.ZP,{children:"Pipeline runs"})}),(0,m.jsx)(p,{onClick:function(e){e.preventDefault(),y.push("/pipelines/[pipeline]/monitors/block-runs","/pipelines/".concat(null===v||void 0===v?void 0:v.uuid,"/monitors/block-runs"))},selected:f.a_.BLOCK_RUNS==s,children:(0,m.jsx)(a.ZP,{children:"Block runs"})}),(0,m.jsx)(p,{onClick:function(e){e.preventDefault(),y.push("/pipelines/[pipeline]/monitors/block-runtime","/pipelines/".concat(null===v||void 0===v?void 0:v.uuid,"/monitors/block-runtime"))},selected:f.a_.BLOCK_RUNTIME==s,children:(0,m.jsx)(a.ZP,{children:"Block runtime"})})]}),breadcrumbs:t,errors:u,pageName:h.M.MONITOR,pipeline:v,setErrors:x,subheader:g,uuid:"pipeline/monitor",children:n})}},74395:function(e,t,n){"use strict";n.d(t,{M:function(){return l},W:function(){return o}});var r=n(25976),i=n(46684),o=34*n(70515).iI,l=r.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},74168:function(e,t,n){"use strict";var r=n(26304),i=n(21831),o=n(82394),l=n(82684),a=n(26226),c=n(25976),u=n(90948),s=n(84969),d=n(65743),p=n(85587),f=n(79487),h=n(52136),m=n(67778),v=n(29989),x=n(17066),g=n(84482),y=n(76771),b=n(98889),k=n(65376),j=n(61655),Z=n(97745),w=n(48072),O=n(10103),P=n(84181),_=n(24903),M=n(55485),L=n(30160),C=n(94035),T=n(44897),E=n(8454),I=n(79633),F=n(95363),N=n(61896),D=n(70515),S=n(86735),B=n(79221),A=n(98684),R=n(28598),U=["areaBetweenLines","data","events","height","lineLegendNames","margin","width","xAxisLabel","xLabelFormat","yAxisLabel","yLabelFormat"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=Y(Y({},k.j),{},{backgroundColor:T.Z.background.muted,border:"none"}),q=(0,j.Z)((function(e){var t=e.areaBetweenLines,n=e.data,r=e.events,o=void 0!==r&&r,a=e.getX,j=e.getY,M=e.getYScaleValues,C=e.gridProps,U=void 0===C?{}:C,X=e.height,q=e.hideGridX,W=e.hideTooltip,z=e.increasedXTicks,V=e.lineLegendNames,J=e.margin,G=e.noCurve,H=e.numYTicks,Q=e.renderXTooltipContent,$=e.renderYTooltipContent,ee=e.showTooltip,te=e.thickStroke,ne=e.tooltipData,re=e.tooltipLeft,ie=void 0===re?0:re,oe=e.tooltipTop,le=void 0===oe?[]:oe,ae=e.width,ce=e.xLabelFormat,ue=e.xLabelRotate,se=void 0===ue||ue,de=e.yLabelFormat,pe=(0,l.useContext)(c.ThemeContext),fe=a||function(e){return null===e||void 0===e?void 0:e.x},he=j||function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null===e||void 0===e||null===(t=e.y)||void 0===t?void 0:t[n]},me=T.Z.monotone.gray,ve=T.Z.brand.wind200,xe=T.Z.content.muted,ge=T.Z.monotone.gray,ye=n.map((function(e){return Number(fe(e))}));if(ae<10)return null;var be=ae-J.left-J.right,ke=X-J.top-J.bottom,je=be/2,Ze=0===n.length?0:Math.max.apply(Math,(0,i.Z)(n.map((function(e){var t=e.y;return(null===t||void 0===t?void 0:t.length)||0})))),we=(0,l.useMemo)((function(){return(0,P.Z)({domain:[Math.min.apply(Math,(0,i.Z)(ye)),Math.max.apply(Math,(0,i.Z)(ye))],range:[0,be]})}),[be,ye]),Oe=Math.min.apply(Math,(0,i.Z)(n.map((function(e){var t=e.y;return Math.min.apply(Math,(0,i.Z)(M?M(t):t||[]))})))),Pe=Math.max.apply(Math,(0,i.Z)(n.map((function(e){var t=e.y;return Math.max.apply(Math,(0,i.Z)(M?M(t):t||[]))})))),_e=(0,l.useMemo)((function(){return(0,P.Z)({domain:[Oe,Pe],nice:!0,range:[ke,0]})}),[ke,Pe,Oe]),Me=ae>520?z?20:10:z?10:5,Le=(0,A.K)(pe),Ce=xe,Te=Le.map((function(e){return{stroke:e}})),Ee=(0,_.Z)({domain:V||[],range:Te.map((function(e){return e.stroke}))}),Ie=(0,l.useCallback)((function(e){var t=((0,w.Z)(e)||{x:0}).x,r=we.invert(t-J.left),i=(0,S.ry)(ye,(function(e){return r>=e})),o=n[i-1],l=n[i],a=o;l&&(r-fe(o)>fe(l)-r?a=l:(a=o,i-=1));var c=(0,O.range)(0,Ze).map((function(e){return _e(he(a,e))})),u=c.some((function(e){return"undefined"===typeof e}));(he(a)||M&&!u)&&ee({tooltipData:Y(Y({},a),{},{index:i}),tooltipLeft:t,tooltipTop:c})}),[n,fe,he,M,J,ee,we,ye,_e]),Fe={};return G||(Fe.curve=Z.ZP),(0,R.jsxs)(R.Fragment,{children:[V&&(0,R.jsx)("div",{style:{marginLeft:null===J||void 0===J?void 0:J.left},children:(0,R.jsx)(x.Z,{labelFormat:function(e){return e},scale:Ee,children:function(e){return(0,R.jsx)("div",{style:{display:"flex",flexDirection:E.qs.ROW},children:e.map((function(e,t){return(0,R.jsxs)(g.Z,{margin:"0 5px",onClick:function(){o&&alert("clicked: ".concat(JSON.stringify(e)))},children:[(0,R.jsx)("svg",{height:15,width:15,children:(0,R.jsx)("rect",{fill:e.value,height:15,width:15})}),(0,R.jsx)(y.Z,{align:"left",margin:"0 0 0 4px",children:(0,R.jsx)(L.ZP,{small:!0,children:e.text})})]},"legend-quantile-".concat(t))}))})}})}),(0,R.jsxs)("svg",{height:X,width:ae,children:[!t&&(0,R.jsx)(d.Z,{fill:"transparent",height:X,onMouseLeave:function(){return W()},onMouseMove:Ie,onTouchMove:Ie,onTouchStart:Ie,rx:14,width:ae-(J.left+J.right),x:J.left,y:0}),(0,R.jsxs)(v.Z,{left:J.left,top:J.top,children:[!q&&(0,R.jsx)(h.Z,Y({height:ke,pointerEvents:"none",scale:we,stroke:me,strokeDasharray:"3,3",strokeOpacity:.4,width:be},U)),(0,R.jsx)(m.Z,Y({height:ke,pointerEvents:"none",scale:_e,stroke:me,strokeDasharray:"3,3",strokeOpacity:.4,width:be},U)),(0,R.jsx)("line",{stroke:me,x1:be,x2:be,y1:0,y2:ke}),(0,R.jsx)(u.Z,{numTicks:Me,scale:we,stroke:Ce,tickFormat:function(e){return ce?ce(e):e},tickLabelProps:function(e){return{fill:xe,fontFamily:F.ry,fontSize:N.J5,textAnchor:"middle",transform:se&&"rotate(-45, ".concat(we(e),", 0) translate(-32, 4)")}},tickStroke:Ce,top:ke}),(0,R.jsx)(s.Z,{hideTicks:!0,numTicks:H,scale:_e,stroke:Ce,tickFormat:function(e){return de?de(e):(0,B.P5)(e)},tickLabelProps:function(e){return{dx:String(e).length>4?3:0,fill:xe,fontFamily:F.ry,fontSize:N.J5,textAnchor:"end",transform:"translate(0,2.5)"}},tickStroke:Ce}),t&&t.map((function(e){var t=e[0],r=e[1];return(0,l.createElement)(b.Z,Y(Y({},Fe),{},{aboveAreaProps:{fill:T.Z.brand.earth400,fillOpacity:.3},belowAreaProps:{fill:ve,fillOpacity:.2},clipAboveTo:0,clipBelowTo:ke,data:n,id:"".concat(Math.random()),key:"".concat(t,"-").concat(r),x:function(e){return we(fe(e))},y0:function(e){return _e("undefined"===typeof r?Oe:he(e,r))},y1:function(e){return _e(he(e,t))}}))})),(0,O.range)(0,Ze).map((function(e){return(0,l.createElement)(p.Z,Y(Y({},Fe),{},{data:n.filter((function(e){return void 0!=e.y})),key:e,pointerEvents:"none",strokeWidth:te?2:1,x:function(e){return we(fe(e))},y:function(t){return _e(t.y&&(e>=t.y.length?Oe:he(t,e)))}},Te[e]))}))]}),ne&&(0,R.jsxs)("g",{children:[(0,R.jsx)(f.Z,{from:{x:ie,y:J.top},pointerEvents:"none",stroke:I.Ej,strokeDasharray:"5,2",strokeWidth:1,to:{x:ie,y:ke+J.top}}),le.map((function(e,t){return(0,R.jsx)("circle",{cx:ie,cy:e+1+J.top,fill:Te[t].stroke,fillOpacity:.1,pointerEvents:"none",r:4,stroke:ge,strokeOpacity:.1,strokeWidth:1},t)})),le.map((function(e,t){return(0,R.jsx)("circle",{cx:ie,cy:e+J.top,fill:Te[t].stroke,pointerEvents:"none",r:4,stroke:Te[t].stroke,strokeWidth:2},t)}))]})]}),ne&&(0,R.jsxs)("div",{children:[le.map((function(e,t){var n=he(ne,t);return t>=1&&Math.abs(le[t-1]-e)<5*D.iI&&(e+=3*D.iI),(0,R.jsxs)(k.Z,{left:ie>je?ie-(0,B.Vs)($,ne,t)*D.iI:ie+D.iI,style:K,top:e-2*D.iI,children:[$&&$(ne,t),!$&&(0,R.jsxs)(L.ZP,{center:!0,small:!0,children:[n.toFixed?n.toFixed(3):n," ",null===V||void 0===V?void 0:V[t]]})]},t)})),(0,R.jsxs)(k.Z,{left:ie>je?ie-4*(0,B.Vs)(Q,ne):ie,style:Y(Y({},K),{},{transform:"translateX(-65%)"}),top:ke+J.top,children:[Q&&Q(ne),!Q&&(0,R.jsx)(L.ZP,{center:!0,small:!0,children:fe(ne).toFixed(3)})]})]})]})}));t.Z=function(e){var t=e.areaBetweenLines,n=e.data,i=(e.events,e.height),o=e.lineLegendNames,l=e.margin,c=void 0===l?{}:l,u=e.width,s=e.xAxisLabel,d=e.xLabelFormat,p=e.yAxisLabel,f=e.yLabelFormat,h=(0,r.Z)(e,U),m=Y(Y({},{bottom:3*D.iI,left:5*D.iI,right:3*D.iI,top:3*D.iI}),c);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{style:{display:"flex",height:i,marginBottom:D.iI,width:"100%"},children:[p&&(0,R.jsx)(M.ZP,{alignItems:"center",fullHeight:!0,justifyContent:"center",width:28,children:(0,R.jsx)(C.Z,{children:(0,R.jsx)(L.ZP,{center:!0,muted:!0,small:!0,children:p})})}),(0,R.jsx)("div",{style:{height:i,width:"undefined"===typeof u?"100%":u},children:(0,R.jsx)(a.Z,{children:function(e){var r=e.width,i=e.height;return(0,R.jsx)(q,Y(Y({},h),{},{areaBetweenLines:t,data:n,height:i,lineLegendNames:o,margin:m,width:r,xLabelFormat:d,yLabelFormat:f}))}})})]}),s&&(0,R.jsx)("div",{style:{paddingLeft:p?36:0,paddingTop:4},children:(0,R.jsx)(L.ZP,{center:!0,muted:!0,small:!0,children:s})})]})}},98684:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var r=n(70987),i=function(e){var t=e||r.Z,n=t.brand,i=n.earth200,o=n.earth300,l=n.earth400,a=n.energy200,c=n.energy300,u=n.energy400,s=n.fire200,d=n.fire300,p=n.fire400,f=n.water200,h=n.water300,m=n.water400,v=n.wind200,x=n.wind300,g=n.wind400,y=t.chart;return[y.backgroundPrimary,y.backgroundSecondary,y.backgroundTertiary].concat([g,m,p,u,l,x,h,d,c,o,v,f,s,a,i])}},94035:function(e,t,n){"use strict";var r=n(25976).default.div.withConfig({displayName:"YAxisLabelContainer",componentId:"sc-qwp21x-0"})(["-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);white-space:nowrap;"]);t.Z=r},79221:function(e,t,n){"use strict";n.d(t,{P5:function(){return r},Vs:function(){return i}});n(81728);function r(e,t){var n=t||{},r=n.maxFractionDigits,i=n.minAmount,o=Intl.NumberFormat("en-US",{maximumFractionDigits:r||2,notation:"compact"});return"number"!==typeof e?e:e>=(i||1e4)?o.format(e):e.toString()}function i(e,t,n){var r,i;if("undefined"===typeof e||"undefined"===typeof t)return 0;var o=null===e||void 0===e||null===(r=e(t,n))||void 0===r||null===(i=r.props)||void 0===i?void 0:i.children;return(Array.isArray(o)?o:[o]).join("").length}},82864:function(e,t,n){"use strict";n.r(t);var r=n(77837),i=n(75582),o=n(82394),l=n(38860),a=n.n(l),c=n(82684),u=n(92083),s=n.n(u),d=n(39867),p=n(55485),f=n(85854),h=n(74168),m=n(7116),v=n(93808),x=n(38276),g=n(44085),y=n(30160),b=n(35686),k=n(44897),j=n(42631),Z=n(46978),w=n(64657),O=n(25976),P=n(81728),_=n(55283),M=n(3917),L=n(86735),C=n(28598);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I="all_blocks";function F(e){var t,n=e.pipeline,r=(0,c.useContext)(O.ThemeContext),l=(0,c.useState)(null),a=l[0],u=l[1],v=n.uuid,T=b.ZP.pipelines.detail(v,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,F=(0,c.useMemo)((function(){return E(E({},null===T||void 0===T?void 0:T.pipeline),{},{uuid:v})}),[T,v]),N=b.ZP.pipeline_schedules.pipelines.list(v).data,D=(0,c.useMemo)((function(){return null===N||void 0===N?void 0:N.pipeline_schedules}),[N]),S=(0,c.useMemo)((function(){return(0,L.HK)(null===F||void 0===F?void 0:F.blocks,(function(e){return e.uuid}))||{}}),[F]),B={pipeline_uuid:v};(a||0===a)&&(B.pipeline_schedule_id=Number(a));var A=b.ZP.monitor_stats.detail("block_run_time",B),R=A.data,U=A.mutate;(0,c.useEffect)((function(){U(a)}),[U,a]);var X=((null===R||void 0===R?void 0:R.monitor_stat)||{}).stats,Y=(0,c.useMemo)((function(){return(0,M.Y_)()}),[]),K=(0,c.useMemo)((function(){var e,t;return X&&(e=(0,o.Z)({},I,[]),t={},Object.entries(X).forEach((function(n){var r=(0,i.Z)(n,2),o=r[0],l=r[1].data;t[o]=[],Y.forEach((function(n,r){t[o].push({x:n,y:n in l?[l[n]]:null}),e.all_blocks[r]||(e.all_blocks[r]={x:n,y:null}),n in l&&(e.all_blocks[r].y||(e.all_blocks[r].y=[]),e.all_blocks[r].y.push({blockUUID:o,runtime:l[n]}))}))}))),E(E({},e),t)}),[Y,X]),q=(0,c.useMemo)((function(){var e=[];return e.push({bold:!0,label:function(){return"Monitors"}}),e}),[]);return(0,C.jsx)(m.Z,{breadcrumbs:q,monitorType:w.a_.BLOCK_RUNTIME,pipeline:F,subheader:(0,C.jsx)(p.ZP,{children:(0,C.jsxs)(g.Z,{backgroundColor:k.Z.interactive.defaultBackground,label:"Trigger:",onChange:function(e){var t=e.target.value;"initial"!==t?(u(t),U(t)):(U(),u(null))},value:a||"initial",children:[(0,C.jsx)("option",{value:"initial",children:"All"}),D&&D.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),children:(0,C.jsx)(x.Z,{mx:2,children:(null===K||void 0===K||null===(t=K.all_blocks)||void 0===t?void 0:t.length)>0&&Object.entries(K).map((function(e,t){var n,o,l=(0,i.Z)(e,2),a=l[0],c=l[1];return(0,C.jsxs)(x.Z,{mt:2,children:[(0,C.jsxs)(p.ZP,{alignItems:"center",children:[(0,C.jsx)(x.Z,{mx:1,children:(0,C.jsx)(d.Z,{color:(0,_.qn)(null===(n=S[a])||void 0===n?void 0:n.type,{blockColor:null===(o=S[a])||void 0===o?void 0:o.color,theme:r}).accent,size:Z.ZG,square:!0})}),(0,C.jsx)(f.Z,{level:4,children:a===I?(0,P.J3)((0,P.kC)(a)):a})]}),(0,C.jsx)("div",{style:{backgroundColor:k.Z.background.chartBlock,borderRadius:"".concat(j.TR,"px"),marginTop:"8px"},children:(0,C.jsx)(h.Z,{data:c,getX:function(e){return s()(e.x).valueOf()},getY:a===I?function(e,t){var n,r;return null===e||void 0===e||null===(n=e.y)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.runtime}:null,getYScaleValues:a===I?function(e){return(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.runtime})))||[]}:null,gridProps:{stroke:"black",strokeDasharray:null,strokeOpacity:.2},height:a===I?800:200,hideGridX:!0,margin:{bottom:30,left:35,right:-1,top:10},noCurve:!0,renderXTooltipContent:function(e){return(0,C.jsx)(y.ZP,{center:!0,inverted:!0,small:!0,children:s()(e.x).format("MMM DD")})},renderYTooltipContent:function(e,t){var n,r=null===e||void 0===e||null===(n=e.y)||void 0===n?void 0:n[t];if(a===I){var i=null===r||void 0===r?void 0:r.blockUUID,o=null===r||void 0===r?void 0:r.runtime;return void 0!==o&&(0,C.jsxs)(y.ZP,{center:!0,inverted:!0,small:!0,children:[i||"",": ",o.toFixed?o.toFixed(3):o,"s"]})}return void 0!==r&&(0,C.jsxs)(y.ZP,{center:!0,inverted:!0,small:!0,children:[r.toFixed?r.toFixed(3):r,"s"]})},thickStroke:!0,xLabelFormat:function(e){return s()(e).format("MMM DD")},xLabelRotate:!1,yLabelFormat:function(e){return e%1===0?e:e.toFixed(1)}})})]},"".concat(a,"_").concat(t))}))})})}F.getInitialProps=function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query.pipeline,e.abrupt("return",{pipeline:{uuid:n}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=(0,v.Z)(F)},76017:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/monitors/block-runtime",function(){return n(82864)}])}},function(e){e.O(0,[3662,125,2714,9832,1557,3782,9774,2888,179],(function(){return t=76017,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
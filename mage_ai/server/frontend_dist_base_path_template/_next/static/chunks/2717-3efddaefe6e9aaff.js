"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2717],{81334:function(e,n,i){i.d(n,{Z:function(){return k}});var t=i(82394),r=i(82684),l=i(27277),o=i(31882),u=i(38276),s=i(48381),c=i(30160),a=i(17488),d=i(25976),h=i(44897),v=i(42631),p=i(47041),m=i(70515),f=d.default.div.withConfig({displayName:"indexstyle__DropdownStyle",componentId:"sc-suwkha-0"})([""," border-radius:","px;max-height:","px;overflow:auto;position:absolute;width:100%;z-index:1;"," ",""],p.w5,v.BG,40*m.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||h.Z.background).popup,";\n    box-shadow: ").concat((e.theme.shadow||h.Z.shadow).popup,";\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset-.5*m.iI,"px;\n  ")})),j=d.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-suwkha-1"})(["padding:","px;position:relative;z-index:2;&:hover{cursor:pointer;}",""],.5*m.iI,(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||h.Z.interactive).hoverBackground,";\n  ")})),x=i(39643),g=i(95924),Z=i(86735),b=i(44688),y=i(28598);function P(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function _(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?P(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var k=function(e){var n,i=e.removeTag,t=e.selectTag,d=e.selectedTags,h=void 0===d?[]:d,v=e.tags,p=void 0===v?[]:v,m=e.uuid,P=(0,r.useRef)(null),k=(0,r.useState)(!1),O=k[0],S=k[1],w=(0,r.useState)(null),C=w[0],I=w[1],T=(0,r.useMemo)((function(){return(0,Z.YC)(p||[],"uuid")}),[p]),M=(0,r.useMemo)((function(){return null===T||void 0===T?void 0:T.map((function(e){return{itemObject:e,searchQueries:[e.uuid],value:e.uuid}}))}),[T]),E=(0,r.useMemo)((function(){return(null===C||void 0===C?void 0:C.length)>=1?M.concat({itemObject:{uuid:C},searchQueries:[C],value:"Add tag: ".concat(C)}):M}),[M,C]),A=(0,b.y)(),D=A.registerOnKeyDown,N=A.unregisterOnKeyDown;return(0,r.useEffect)((function(){return function(){return N(m)}}),[N,m]),null===D||void 0===D||D(m,(function(e,n){var i;O&&n[x.vP]&&(S(!1),null===P||void 0===P||null===(i=P.current)||void 0===i||i.blur())}),[O,P]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.Z,{onClickTag:i,tags:h}),(0,y.jsxs)(u.Z,{mt:1,style:{position:"relative"},children:[(0,y.jsx)(a.Z,{onBlur:function(){return setTimeout((function(){return S(!1)}),150)},onChange:function(e){return I(e.target.value)},onFocus:function(){return S(!0)},ref:P,value:C||""}),(0,y.jsx)(f,{topOffset:null===P||void 0===P||null===(n=P.current)||void 0===n?void 0:n.getBoundingClientRect().height,children:(0,y.jsx)(l.Z,{itemGroups:[{items:O?E:[],renderItem:function(e,n){var i=e.value;return(0,y.jsx)(j,_(_({},n),{},{onClick:function(e){var i;(0,g.j)(e),null===n||void 0===n||null===(i=n.onClick)||void 0===i||i.call(n,e)},children:(0,y.jsx)(o.Z,{small:!0,children:(0,y.jsx)(c.ZP,{children:i})})}))}}],onSelectItem:function(e){var n=e.itemObject;null===t||void 0===t||t(n),I(null)},searchQuery:C,uuid:m})})]})]})}},71610:function(e,n,i){var t=i(82394),r=i(75582),l=i(12691),o=i.n(l),u=i(25976),s=i(82684),c=i(32013),a=i(98777),d=i(15338),h=i(48670),v=i(88543),p=i(38276),m=i(4190),f=i(75499),j=i(30160),x=i(35686),g=i(70515),Z=i(30229),b=i(32080),y=i(81728),P=i(3917),_=i(55283),k=i(70320),O=i(28598);function S(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function w(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?S(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var C={large:!1};n.Z=function(e){var n=e.bookmarkValues,i=e.originalBookmarkValues,l=e.setBookmarkValues,S=e.pipeline,I=(0,s.useContext)(u.ThemeContext),T=(0,k.qB)(),M=(0,s.useState)(null),E=M[0],A=M[1],D=(0,s.useMemo)((function(){return null!==S&&void 0!==S&&S.blocks?(0,b.n)(S):null}),[S]),N=(0,s.useMemo)((function(){return Object.keys(D||{})||[]}),[D]),L=x.ZP.integration_sources.pipelines.list(null===S||void 0===S?void 0:S.uuid,{block_uuid:N},{},{pauseFetch:!(null!==N&&void 0!==N&&N.length)}).data,q=(0,s.useMemo)((function(){return null===L||void 0===L?void 0:L.integration_sources}),[L]);return(0,s.useEffect)((function(){if((null===q||void 0===q?void 0:q.length)>=1&&(!n||!E)){var e={};null===q||void 0===q||q.map((function(n){var i,t=n.block,l=n.streams,o=null===t||void 0===t?void 0:t.uuid;e[o]={},null===(i=Object.entries(l||{}))||void 0===i||i.forEach((function(n){var i,t,l=(0,r.Z)(n,2),u=l[0],s=l[1];e[o][u]=null===s||void 0===s||null===(i=s.state)||void 0===i||null===(t=i.bookmarks)||void 0===t?void 0:t[u]}))})),n||l(e),E||A(e)}}),[n,E,l,A,q]),(0,O.jsxs)(p.Z,{p:g.cd,children:[!L&&(0,O.jsx)(m.Z,{inverted:!0,small:!0}),null===q||void 0===q?void 0:q.map((function(e){var u=e.block,m=e.pipeline_run,x=e.pipeline_schedule,b=e.streams,k=null===u||void 0===u?void 0:u.uuid;return(0,O.jsx)(v.Z,{title:(0,O.jsx)(j.ZP,{color:(0,_.qn)(null===u||void 0===u?void 0:u.type,{blockColor:null===u||void 0===u?void 0:u.color,theme:I}).accent,monospace:!0,children:k}),children:(0,O.jsx)(c.Z,{noBorder:!0,noBoxShadow:!0,children:Object.entries(b||{}).map((function(e){var u,c,b,_,I=(0,r.Z)(e,2),M=I[0],A=I[1],D=A.record,N=A.state,L=(null===N||void 0===N||null===(u=N.bookmarks)||void 0===u?void 0:u[M])||{};return(0,O.jsxs)(a.Z,{noBorderRadius:!0,noPaddingContent:!0,title:(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:M}),titleXPadding:g.cd*g.iI,titleYPadding:g.cd*g.iI,children:[(0,O.jsx)(v.S,w(w({},C),{},{title:"Last pipeline run started at",children:(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:(null===m||void 0===m?void 0:m.started_at)&&(0,P.XG)(null===m||void 0===m?void 0:m.started_at,T)})})),(0,O.jsx)(d.Z,{light:!0}),(0,O.jsx)(v.S,w(w({},C),{},{title:"Last pipeline run completed at",children:(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:(null===m||void 0===m?void 0:m.completed_at)&&(0,P.XG)(null===m||void 0===m?void 0:m.completed_at,T)})})),(0,O.jsx)(d.Z,{light:!0}),(0,O.jsx)(d.Z,{light:!0}),(0,O.jsx)(v.S,w(w({},C),{},{title:"Trigger",children:(0,O.jsx)(o(),{as:"/pipelines/".concat(null===S||void 0===S?void 0:S.uuid,"/triggers/").concat(null===x||void 0===x?void 0:x.id),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,O.jsx)(h.Z,{block:!0,default:!0,openNewWindow:!0,children:(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:null===x||void 0===x?void 0:x.name})})})})),(0,O.jsx)(d.Z,{light:!0}),(0,O.jsx)(v.S,w(w({},C),{},{title:"Type",children:(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:(0,y.kC)((null===(c=Z.Z4[null===x||void 0===x?void 0:x.schedule_type])||void 0===c?void 0:c.call(Z.Z4))||"")})})),(0,O.jsx)(d.Z,{light:!0}),(0,O.jsx)(v.S,w(w({},C),{},{title:"Frequency",children:(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:null===x||void 0===x?void 0:x.schedule_interval})})),(0,O.jsx)(d.Z,{light:!0}),(0,O.jsxs)(p.Z,{p:g.cd,children:[(0,O.jsx)(j.ZP,{bold:!0,large:!0,children:"Bookmark values"}),(0,O.jsx)(p.Z,{mt:1,children:(0,O.jsxs)(j.ZP,{muted:!0,small:!0,children:["Overriding the bookmark values will be applied to all pipeline runs",(0,O.jsx)("br",{}),"for this trigger until there is at least 1 successful pipeline run in this trigger."]})})]}),(0,O.jsx)(d.Z,{light:!0,short:!0}),!(null!==(b=Object.values(L||{}))&&void 0!==b&&b.length)&&(0,O.jsx)(p.Z,{p:g.cd,children:(0,O.jsx)(j.ZP,{muted:!0,children:"There are currently no bookmark values for this stream."})}),Object.entries(L||{}).map((function(e){var o,u,c,a,d,h,p=(0,r.Z)(e,2),m=p[0],f=(p[1],null===n||void 0===n||null===(o=n[k])||void 0===o||null===(u=o[M])||void 0===u?void 0:u[m]),x=(null===i||void 0===i||null===(c=i[k])||void 0===c||null===(a=c[M])||void 0===a||a[m],null===E||void 0===E||null===(d=E[k])||void 0===d||null===(h=d[M])||void 0===h?void 0:h[m]);return(0,s.createElement)(v.S,w(w({},C),{},{title:(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:m}),description:x&&x!==f&&(0,O.jsxs)(j.ZP,{muted:!0,small:!0,children:["Original bookmark value from the last pipeline run: ",(0,O.jsx)(j.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:x})]}),key:"".concat(k,"-bookmark-values-").concat(m),textInput:{monospace:!0,onChange:function(e){return l((function(i){var r;return w(w({},i),{},(0,t.Z)({},k,w(w({},null===n||void 0===n?void 0:n[k]),{},(0,t.Z)({},M,w(w({},null===n||void 0===n||null===(r=n[k])||void 0===r?void 0:r[M]),{},(0,t.Z)({},m,e.target.value))))))}))},value:String(f||"")}}))})),(0,O.jsx)(d.Z,{light:!0}),(0,s.createElement)(v.S,w(w({},C),{},{title:"Record",description:"The most recently synced record.",key:"block-uuid-".concat(k,"-").concat(M)}),(0,O.jsx)(f.Z,{columnFlex:[1,null],columns:[{uuid:"Column"},{uuid:"Value"}],rows:null===(_=Object.entries(D||{}))||void 0===_?void 0:_.map((function(e){var n=(0,r.Z)(e,2),i=n[0],t=n[1];return[(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:i},i),(0,O.jsx)(j.ZP,{default:!0,monospace:!0,children:String(t)},"".concat(i,"-").concat(t))]}))}))]})}))})})}))]})}},12717:function(e,n,i){i.d(n,{Z:function(){return ze}});var t=i(21831),r=i(82394),l=i(75582),o=i(12691),u=i.n(o),s=i(82684),c=i(20026),a=i.n(c),d=i(92083),h=i.n(d),v=i(21764),p=i(69864),m=i(34376),f=i(71610),j=i(71180),x=i(90299),g=i(14805),Z=i(70652),b=i(50724),y=i(9134),P=i(39457),_=i(25976),k=i(39867),O=i(55485),S=i(85854),w=i(38276),C=i(75499),I=i(30160),T=i(17488),M=i(12468),E=i(44375),A=i(70515),D=i(55283),N=i(86735),L=i(28598);function q(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function H(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?q(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var z=function(e){var n=e.blocks,i=e.updateVariables,t=e.variables,l=(0,s.useContext)(_.ThemeContext),o=(0,s.useCallback)((function(e,n){return i((function(){var i=(null===t||void 0===t?void 0:t.__mage_variables)||{},l=(null===i||void 0===i?void 0:i.blocks)||{},o=l[e]||{},u=(null===o||void 0===o?void 0:o.configuration)||{};return H(H({},t),{},{__mage_variables:H(H({},i),{},{blocks:H(H({},l),{},(0,r.Z)({},e,H(H({},o),{},{configuration:H(H({},u),n)})))})})}))}),[i,t]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(S.Z,{children:"dbt runtime settings"}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsx)(C.Z,{columnFlex:[1,null,null,null],columns:[{uuid:"Block"},{uuid:"Flags"},{uuid:"Prefix"},{uuid:"Suffix"}],compact:!0,rows:null===n||void 0===n?void 0:n.map((function(e){var n,i,r,u=e.type,s=e.uuid,c=(0,E.IU)(e).name,a=(0,D.qn)(u,{blockColor:e.color,theme:l}).accent,d=null===t||void 0===t||null===(n=t.__mage_variables)||void 0===n||null===(i=n.blocks)||void 0===i||null===(r=i[s])||void 0===r?void 0:r.configuration,h=d||{},v=h.prefix,p=h.suffix,m=(null===d||void 0===d?void 0:d.flags)||[],f=!(null===m||void 0===m||!m.includes(E.Dy));return[(0,L.jsx)(M.Z,{block:!0,label:(0,L.jsx)(I.ZP,{monospace:!0,small:!0,children:s}),size:null,widthFitContent:!0,children:(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(k.Z,{color:a,size:1.5*A.iI,square:!0}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsxs)(I.ZP,{monospace:!0,small:!0,children:[v&&(0,L.jsx)(I.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:v}),c,p&&(0,L.jsx)(I.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:p})]})]})},"uuid-".concat(s)),(0,L.jsx)(O.ZP,{alignItems:"center",children:(0,L.jsx)(Z.Z,{checked:f,label:E.Dy,monospace:!0,onClick:function(){return o(s,{flags:f?(0,N.Od)(m,(function(e){return E.Dy===e})):m.concat(E.Dy)})},small:!0})},"flags-".concat(s)),(0,L.jsx)(T.Z,{compact:!0,monospace:!0,onChange:function(e){return o(s,{prefix:e.target.value})},placeholder:"N+, +",small:!0,value:v,width:10*A.iI},"prefix-".concat(s)),(0,L.jsx)(T.Z,{compact:!0,monospace:!0,onChange:function(e){return o(s,{suffix:e.target.value})},placeholder:"+, +N",small:!0,value:p,width:10*A.iI},"suffix-".concat(s))]}))})})]})},U=i(97196),F=i(15338),R=i(97618),W=i(48670),B=i(26304),V=i(44897),Y=i(95363),X=i(61896),G=["children","large","lineHeight","ordered"];function K(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function J(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?K(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Q=(0,_.css)([""," "," "," "," "," "," "," "," "," ",""],(function(e){return!e.muted&&"\n    color: ".concat((e.theme.content||V.Z.content).default,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.content||V.Z.content).muted,";\n  ")}),(function(e){return e.inverted&&"\n    color: ".concat((e.theme.content||V.Z.content).inverted,";\n  ")}),(function(e){return e.color&&"\n    color: ".concat(e.color,";\n  ")}),(function(e){return!e.monospace&&"\n    font-family: ".concat(Y.ry,";\n  ")}),(function(e){return e.monospace&&"\n    font-family: ".concat(Y.Vp,";\n  ")}),(function(e){return e.large&&"\n    ".concat(X.x_,"\n  ")}),(function(e){return!e.large&&!e.small&&"\n    ".concat(X.i3,"\n  ")}),(function(e){return e.small&&"\n    ".concat(X.J5,"\n  ")}),(function(e){return e.lineHeight&&"\n    line-height: ".concat(e.lineHeight,"px !important;\n  ")})),$=_.default.ul.withConfig({displayName:"List__UnorderedListStyle",componentId:"sc-1f6yhbi-0"})(["",""],Q),ee=_.default.ol.withConfig({displayName:"List__OrderedListStyle",componentId:"sc-1f6yhbi-1"})(["",""],Q),ne=_.default.li.withConfig({displayName:"List__ListItemStyle",componentId:"sc-1f6yhbi-2"})(["",""],(function(e){return e.large&&e.marginTop&&"\n    margin-top: ".concat(1*A.iI,"px;\n  ")}));var ie,te=function(e){var n=e.children,i=e.large,t=e.lineHeight,r=e.ordered,l=(0,B.Z)(e,G),o=r?ee:$;return(0,L.jsx)(o,J(J({large:i,lineHeight:t},l),{},{children:s.Children.map(n,(function(e,n){var t;return(0,L.jsx)(ne,J(J({large:i,marginTop:n>=1},l),{},{children:s.cloneElement(e)}),(null===(t=e.props)||void 0===t?void 0:t.key)||n)}))}))},re=i(37899),le=i(75457),oe=i(30229),ue=i(57653),se=i(83784),ce=i(44085),ae=i(81334),de=i(69650),he=i(81769),ve=i(54193),pe=i(72473),me=i(81728),fe=i(16488),je=i(70320),xe=(ie={},(0,r.Z)(ie,ve.zj.DATE,pe.CalendarDate),(0,r.Z)(ie,ve.zj.DATETIME,pe.Schedule),(0,r.Z)(ie,ve.zj.DICTIONARY,pe.DocumentIcon),(0,r.Z)(ie,ve.zj.FLOAT,pe.NumberWithDecimalHash),(0,r.Z)(ie,ve.zj.INTEGER,pe.NumberHash),(0,r.Z)(ie,ve.zj.LIST,pe.TodoList),(0,r.Z)(ie,ve.zj.STRING,pe.Alphabet),ie);var ge=function(e){var n,i,t,r=e.containerRef,o=e.date,u=e.interactions,c=e.pipeline,a=e.pipelineInteraction,d=e.pipelineSchedule,h=e.setVariables,v=e.showSummary,p=e.time,m=e.triggerTypes,f=e.variables,j=(0,s.useMemo)((function(){return(0,N.HK)(u||[],(function(e){return e.uuid}))}),[u]),x=(0,s.useMemo)((function(){return(null===c||void 0===c?void 0:c.blocks)||[]}),[c]),g=(0,s.useMemo)((function(){return(null===a||void 0===a?void 0:a.blocks)||{}}),[a]),Z=(0,s.useMemo)((function(){var e=[];null===x||void 0===x||x.length;return null===x||void 0===x||x.map((function(n,i){var t=(n||{uuid:null}).uuid,l=(null===g||void 0===g?void 0:g[t])||[];null===l||void 0===l||l.length;e.push((0,L.jsx)(w.Z,{p:A.cd,children:null===l||void 0===l?void 0:l.map((function(e,n){return(0,L.jsx)(w.Z,{mt:n>=1?2*A.cd:0,children:(0,L.jsx)(he.Z,{blockInteraction:e,containerRef:r,interaction:null===j||void 0===j?void 0:j[null===e||void 0===e?void 0:e.uuid],setVariables:h,variables:f})},"".concat(null===e||void 0===e?void 0:e.uuid,"-").concat(n))}))}))})),e}),[x,r,j,h,f]),b=(0,je.qB)(),y=(0,s.useMemo)((function(){return o&&null!==p&&void 0!==p&&p.hour&&null!==p&&void 0!==p&&p.minute?(0,fe.XM)(o,p,{convertToUtc:b,includeSeconds:!0,localTimezone:b}):null}),[o,b,p]),P=(0,s.useMemo)((function(){var e=[];null===x||void 0===x||x.length;return null===x||void 0===x||x.map((function(n,i){var t=(n||{uuid:null}).uuid,r=(null===g||void 0===g?void 0:g[t])||[];null===r||void 0===r||r.forEach((function(n,r){var o=null===j||void 0===j?void 0:j[null===n||void 0===n?void 0:n.uuid];Object.entries((null===o||void 0===o?void 0:o.variables)||{}).forEach((function(n,o){var u,s=(0,l.Z)(n,2),c=s[0],a=s[1],d=a.name,h=a.required,v=a.types,p=null===f||void 0===f?void 0:f[c],m="undefined"===typeof p,j=h&&m,x=(null===xe||void 0===xe?void 0:xe[v[0]])||pe.Alphabet,g=[];"undefined"!==typeof p?p&&Array.isArray(p||[])?null===p||void 0===p||p.forEach((function(e){g.push(e&&"object"===typeof e?g.push(JSON.stringify(e)):g.push(String(e)))})):p&&"object"===typeof p?Object.entries(p||{}).forEach((function(e){var n=(0,l.Z)(e,2),i=n[0];n[1]&&g.push(String(i))})):g.push(String(p)):g.push(p||""),e.push([(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(x,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,monospace:!0,children:c})]},"".concat(t,"-").concat(c,"-label-").concat(d,"-").concat(i,"-").concat(r,"-").concat(o)),(0,L.jsx)(w.Z,{py:A.cd,children:(0,L.jsxs)(I.ZP,{danger:j,monospace:!j,muted:m,children:[m&&!j&&"-",j&&"This is required",!m&&!j&&(null===g||void 0===g||null===(u=g.map((function(e){return String(e)})))||void 0===u?void 0:u.join(", "))]})},"".concat(t,"-").concat(c,"-value-").concat(d,"-").concat(p,"-").concat(i,"-").concat(r,"-").concat(o))])}))}))})),(0,L.jsx)(C.Z,{columnFlex:[null,1],rows:e})}),[x,j,f]);return(0,L.jsxs)(L.Fragment,{children:[!v&&Z,v&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Z,{p:A.cd,children:(0,L.jsx)(S.Z,{children:"Settings"})}),(0,L.jsx)(F.Z,{light:!0,short:!0}),(0,L.jsx)(C.Z,{columnFlex:[null,1],rows:[[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Lightning,{default:!0}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Trigger type"})]},"trigger_type"),(0,L.jsx)(w.Z,{py:A.cd,children:(0,L.jsx)(I.ZP,{danger:!(null!==d&&void 0!==d&&d.schedule_type),monospace:!0,children:null!==d&&void 0!==d&&d.schedule_type?null===m||void 0===m||null===(n=m.find((function(e){return e.uuid===(null===d||void 0===d?void 0:d.schedule_type)})))||void 0===n||null===(i=n.label)||void 0===i?void 0:i.call(n):"This is required"})},"trigger_type_input")],[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Alphabet,{default:!0}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Trigger name"})]},"trigger_name"),(0,L.jsx)(w.Z,{py:A.cd,children:(0,L.jsx)(I.ZP,{danger:!(null!==d&&void 0!==d&&d.name),monospace:!0,children:(null===d||void 0===d?void 0:d.name)||"This is required"})},"trigger_name_input")],[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Alphabet,{default:!0}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Trigger description"})]},"trigger_description"),(0,L.jsx)(w.Z,{py:A.cd,children:(0,L.jsx)(I.ZP,{monospace:!0,muted:!(null!==d&&void 0!==d&&d.description),children:(null===d||void 0===d?void 0:d.description)||"-"})},"trigger_description_input")],[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Schedule,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Frequency"})]},"frequency"),(0,L.jsx)(w.Z,{py:A.cd,children:(0,L.jsxs)(I.ZP,{danger:!(null!==d&&void 0!==d&&d.schedule_interval),monospace:!0,muted:!(null!==d&&void 0!==d&&d.schedule_interval),children:[(null===d||void 0===d?void 0:d.schedule_interval)&&(0,me.vg)((null===d||void 0===d||null===(t=d.schedule_interval)||void 0===t?void 0:t.substring(1))||""),!(null!==d&&void 0!==d&&d.schedule_interval)&&"This is required"]})},"frequency_input")],[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.CalendarDate,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Start date and time"})]},"start_time"),(0,L.jsx)(w.Z,{py:A.cd,children:(0,L.jsx)(I.ZP,{danger:!y,monospace:!!y,muted:!y,children:y||"This is required"})},"start_time_input")]]}),(0,L.jsx)(w.Z,{p:A.cd,children:(0,L.jsx)(S.Z,{children:"Customize"})}),(0,L.jsx)(F.Z,{light:!0,short:!0}),P]})]})},Ze=i(35686),be=i(77417),ye=i(44425),Pe=i(88785),_e=i(3917),ke=i(82359),Oe=i(28795),Se=i(41143),we={label:function(){return"CUSTOMIZE"},uuid:"customize"},Ce={label:function(){return"SETTINGS"},uuid:"settings"},Ie={label:function(){return"REVIEW"},uuid:"review"},Te=[Ce,we,Ie],Me=i(32080),Ee=i(22286),Ae=i(79500),De=i(8916),Ne=i(42122),Le=i(72619);function qe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function He(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?qe(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qe(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var ze=function(e){var n=e.creatingWithLimitation,i=e.errors,o=e.fetchPipelineSchedule,c=e.onCancel,d=e.pipeline,_=e.pipelineSchedule,k=e.setErrors,M=e.variables,E=e.useCreateScheduleMutation,q=(0,be.Z)().project,H=(0,s.useRef)(null),B=(0,m.useRouter)(),V=(0,je.qB)(),Y=null===d||void 0===d?void 0:d.uuid,X=(0,s.useMemo)((function(){return null===_||void 0===_?void 0:_.id}),[_]),G=(null===d||void 0===d?void 0:d.type)===ue.qL.STREAMING,K=(0,s.useMemo)((function(){var e;return null===_||void 0===_||null===(e=_.variables)||void 0===e?void 0:e[oe.PN]}),[_]),J=(0,s.useState)(K?"string"===typeof K&&(0,me.Pb)(K)?JSON.stringify(K):K:null),Q=J[0],$=J[1],ee=(0,s.useState)([]),ne=ee[0],ie=ee[1],he=(0,s.useState)(!0),ve=he[0],xe=he[1],qe=(0,s.useState)(!1),ze=qe[0],Ue=qe[1],Fe=(0,s.useState)(!1),Re=Fe[0],We=Fe[1],Be=(0,s.useState)(null),Ve=Be[0],Ye=Be[1],Xe=(0,s.useState)({}),Ge=Xe[0],Ke=Xe[1],Je=(0,s.useState)(null),Qe=Je[0],$e=Je[1],en=(0,s.useState)(null),nn=en[0],tn=en[1],rn=(0,s.useState)(!1),ln=rn[0],on=rn[1],un=(0,s.useState)(null),sn=un[0],cn=un[1],an=(0,s.useState)(Te[0].uuid),dn=an[0],hn=an[1],vn=(0,s.useMemo)((function(){var e;return!(null===q||void 0===q||null===(e=q.features)||void 0===e||!e[ke.d.INTERACTIONS])}),[null===q||void 0===q?void 0:q.features]),pn=(0,s.useMemo)((function(){return!X&&n}),[n,X]),mn=Ze.ZP.pipeline_interactions.detail(vn&&Y,{filter_for_permissions:1}).data,fn=Ze.ZP.interactions.pipeline_interactions.list(vn&&Y).data,jn=(0,s.useMemo)((function(){return(null===mn||void 0===mn?void 0:mn.pipeline_interaction)||{}}),[mn]),xn=(0,s.useMemo)((function(){return(null===fn||void 0===fn?void 0:fn.interactions)||[]}),[fn]),gn=(0,s.useMemo)((function(){var e;return vn&&(null===(e=Object.keys((null===jn||void 0===jn?void 0:jn.blocks)||{}))||void 0===e?void 0:e.length)>=1}),[vn,jn]),Zn=(0,s.useMemo)((function(){return!!X&&gn}),[gn,X]),bn=(0,s.useMemo)((function(){var e,n={};return null===jn||void 0===jn||null===(e=jn.permissions)||void 0===e||e.forEach((function(e){var i=e.triggers;null===i||void 0===i||i.forEach((function(e){var i=e.schedule_interval,t=e.schedule_type;null!==n&&void 0!==n&&n[t]||(n[t]={}),i&&(n[t][i]=!0)}))})),n}),[jn]),yn=(0,s.useMemo)((function(){return(0,De.wx)(M,(function(e){return e.uuid===se.C}))}),[M]),Pn=(0,s.useMemo)((function(){return Qe||{}}),[Qe]),_n=Pn.description,kn=Pn.name,On=Pn.schedule_interval,Sn=Pn.schedule_type,wn=Pn.settings,Cn=Pn.start_time,In=Pn.tags,Tn=Pn.variables,Mn=void 0===Tn?{}:Tn;(0,s.useEffect)((function(){!Ve&&wn&&Ye(wn)}),[Ve,wn]);var En=(0,s.useState)(null),An=En[0],Dn=En[1],Nn=(0,s.useState)({hour:"00",minute:"00"}),Ln=Nn[0],qn=Nn[1],Hn=(0,s.useState)({dayOfMonth:null,dayOfWeek:null,hour:null,minute:null,second:null}),zn=Hn[0],Un=Hn[1],Fn=Ze.ZP.event_rules.detail(oe.Xm.EVENT===Sn?"aws":null).data,Rn=(0,s.useMemo)((function(){var e;return(null===Fn||void 0===Fn||null===(e=Fn.event_rule)||void 0===e?void 0:e.rules)||[]}),[Fn]),Wn=(0,s.useMemo)((function(){return(0,N.HK)(Rn,(function(e){return e.name}))}),[Rn]),Bn=(0,p.Db)(Ze.ZP.pipeline_schedules.useUpdate(X),{onSuccess:function(e){return(0,Le.wD)(e,{callback:function(){null===o||void 0===o||o(),B.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(Y,"/triggers/").concat(X))},onErrorCallback:function(e,n){return k({errors:n,response:e})}})}}),Vn=(0,l.Z)(Bn,2),Yn=Vn[0],Xn=Vn[1].isLoading,Gn=(0,s.useMemo)((function(){return Mn||{}}),[Mn]);(0,s.useEffect)((function(){var e=h().utc().format(_e.TD),n=(0,Ae.a)(Cn||e,{localTimezone:V});if(Dn(null===n||void 0===n?void 0:n.date),qn(null===n||void 0===n?void 0:n.time),Cn){var i=h()(Cn).utc();Un({dayOfMonth:i.date(),dayOfWeek:i.day(),hour:i.hours(),minute:i.minutes(),second:i.seconds()})}}),[V,Cn]),(0,s.useEffect)((function(){Gn&&Object.keys(Gn).length>0&&xe(!0)}),[Gn]),(0,s.useEffect)((function(){Ke(ve?null===yn||void 0===yn?void 0:yn.reduce((function(e,n){var i=n.uuid,t=n.value;return He(He({},e),{},(0,r.Z)({},i,Gn[i]||t))}),{}):null)}),[yn,ve,Gn]);var Kn=(0,s.useMemo)((function(){return(0,fe._U)(On)}),[On]),Jn=(0,s.useMemo)((function(){return Kn&&sn?a().toString(sn,{throwExceptionOnParseError:!1}):""}),[sn,Kn]),Qn=(0,s.useMemo)((function(){return null===Jn||void 0===Jn?void 0:Jn.toLowerCase().includes("error")}),[Jn]);(0,s.useEffect)((function(){if(_&&!Qe){if(ie(_.event_matchers),(0,fe._U)(null===_||void 0===_?void 0:_.schedule_interval)){var e=V?(0,fe.lO)(null===_||void 0===_?void 0:_.schedule_interval):null===_||void 0===_?void 0:_.schedule_interval;cn(e),$e(He(He({},_),{},{schedule_interval:"custom"}))}else $e(G?He(He({},_),{},{schedule_interval:oe.U5.ONCE}):_);var n=_.sla;if(n){Ue(!0);var i=(0,fe.gU)(n),t=i.time,r=i.unit;$e((function(e){return He(He({},e),{},{slaAmount:t,slaUnit:r})}))}}}),[V,G,_,Qe,On]);var $n=(0,s.useMemo)((function(){return!(null===Ve||void 0===Ve||!Ve.landing_time_enabled)}),[Ve]),ei=(0,s.useMemo)((function(){return oe.Xm.TIME!==Sn||![oe.U5.DAILY,oe.U5.HOURLY,oe.U5.MONTHLY,oe.U5.WEEKLY].includes(On)}),[On,Sn]),ni=(0,s.useMemo)((function(){return $n&&!ei}),[ei,$n]),ii=(0,s.useCallback)((function(){var e=He(He({},(0,Ne.GL)(Qe,["name","description","schedule_type","tags"])),{},{event_matchers:[],schedule_interval:null,start_time:null,variables:(0,De.e7)(He(He({},Ge),Q?(0,r.Z)({},oe.PN,Q):{}))});if(ni){var n=zn.dayOfMonth,i=zn.dayOfWeek,t=zn.hour,l=zn.minute,o=zn.second,u=h()("2023-07-01").utc();(0,me.HW)(n)&&(u=u.date(n)),(0,me.HW)(i)&&(u=u.day(i)),(0,me.HW)(t)&&(u=u.hours(t)),(0,me.HW)(l)&&(u=u.minutes(l)),(0,me.HW)(o)&&(u=u.seconds(o)),e.schedule_interval=Kn?sn:Qe.schedule_interval,e.start_time=u.toISOString()}else oe.Xm.EVENT===Qe.schedule_type?e.event_matchers=ne:(e.schedule_interval=Kn?V&&!Qn&&sn?(0,fe.lO)(sn,!0):sn:Qe.schedule_interval,e.start_time=An&&null!==Ln&&void 0!==Ln&&Ln.hour&&null!==Ln&&void 0!==Ln&&Ln.minute?(0,fe.XM)(An,Ln,{convertToUtc:V,includeSeconds:!0,localTimezone:V}):null);if(ze){var s=null===Qe||void 0===Qe?void 0:Qe.slaAmount,c=null===Qe||void 0===Qe?void 0:Qe.slaUnit;if(!s||isNaN(s)||!c)return void v.Am.error("Please enter a valid SLA",{position:v.Am.POSITION.BOTTOM_RIGHT,toastId:"sla_error"});e.sla=(0,fe.vJ)(s,c)}else null!==_&&void 0!==_&&_.sla&&(e.sla=0);e.settings=Ve,Yn({pipeline_schedule:He(He({},e),{},{variables:nn||(null===e||void 0===e?void 0:e.variables)})})}),[Q,Qn,sn,An,V,ze,ne,Kn,zn,_,Ge,Qe,Ve,ni,Ln,Yn,nn]),ti=(0,s.useMemo)((function(){if(null===_||void 0===_||!_.runtime_average)return"Trigger doesn\u2019t have enough history to estimate runtime.";var e=Number(null===_||void 0===_?void 0:_.runtime_average),n=Math.max(Math.floor(e/3600),0),i=Math.max(Math.floor((e-60*n*60)/60),0),t=Math.max(Math.floor(e-(60*n*60+60*i)),0),r=[];return n>=1&&r.push((0,me._6)("hour",n,!0)),i>=1&&r.push((0,me._6)("minute",i,!0)),t>=1&&r.push((0,me._6)("second",t,!0)),r.join(" ")}),[_]),ri=(0,s.useMemo)((function(){if(!ni)return null;var e=[(0,L.jsxs)(w.Z,{mr:1,children:[(0,L.jsx)(w.Z,{mb:1,children:(0,L.jsx)(I.ZP,{bold:!0,default:!0,small:!0,children:"Minute"})}),(0,L.jsxs)(ce.Z,{compact:!0,monospace:!0,onChange:function(e){Un((function(n){return He(He({},n),{},{minute:e.target.value})}))},value:(null===zn||void 0===zn?void 0:zn.minute)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(60).map((function(e,n){return(0,L.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Minute"),(0,L.jsxs)(w.Z,{mr:1,children:[(0,L.jsx)(w.Z,{mb:1,children:(0,L.jsx)(I.ZP,{bold:!0,default:!0,small:!0,children:"Second"})}),(0,L.jsxs)(ce.Z,{compact:!0,monospace:!0,onChange:function(e){Un((function(n){return He(He({},n),{},{second:e.target.value})}))},value:(null===zn||void 0===zn?void 0:zn.second)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(60).map((function(e,n){return(0,L.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Second")];return[oe.U5.DAILY,oe.U5.MONTHLY,oe.U5.WEEKLY].includes(On)&&e.unshift((0,L.jsxs)(w.Z,{mr:1,children:[(0,L.jsx)(w.Z,{mb:1,children:(0,L.jsx)(I.ZP,{bold:!0,default:!0,small:!0,children:"Hour"})}),(0,L.jsxs)(ce.Z,{compact:!0,monospace:!0,onChange:function(e){Un((function(n){return He(He({},n),{},{hour:e.target.value})}))},value:(null===zn||void 0===zn?void 0:zn.hour)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(24).map((function(e,n){return(0,L.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Hour")),oe.U5.WEEKLY===On?e.unshift((0,L.jsxs)(w.Z,{mr:1,children:[(0,L.jsx)(w.Z,{mb:1,children:(0,L.jsx)(I.ZP,{bold:!0,default:!0,small:!0,children:"Day of the week"})}),(0,L.jsxs)(ce.Z,{compact:!0,monospace:!0,onChange:function(e){Un((function(n){return He(He({},n),{},{dayOfWeek:e.target.value})}))},value:(null===zn||void 0===zn?void 0:zn.dayOfWeek)||"",children:[(0,L.jsx)("option",{value:""}),(0,L.jsx)("option",{value:6,children:"Sunday"}),(0,L.jsx)("option",{value:0,children:"Monday"}),(0,L.jsx)("option",{value:1,children:"Tuesday"}),(0,L.jsx)("option",{value:2,children:"Wednesday"}),(0,L.jsx)("option",{value:3,children:"Thursday"}),(0,L.jsx)("option",{value:4,children:"Friday"}),(0,L.jsx)("option",{value:5,children:"Saturday"})]})]},"Day of the week")):oe.U5.MONTHLY===On&&e.unshift((0,L.jsxs)(w.Z,{mr:1,children:[(0,L.jsx)(w.Z,{mb:1,children:(0,L.jsx)(I.ZP,{bold:!0,default:!0,small:!0,children:"Day of the month"})}),(0,L.jsxs)(ce.Z,{compact:!0,monospace:!0,onChange:function(e){Un((function(n){return He(He({},n),{},{dayOfMonth:e.target.value})}))},value:(null===zn||void 0===zn?void 0:zn.dayOfMonth)||"",children:[(0,L.jsx)("option",{value:""}),(0,N.w6)(31).map((function(e,n){return(0,L.jsx)("option",{value:n+1,children:n+1>=10?String(n+1):"0".concat(n+1)},n+1)}))]})]},"Day of the month")),(0,L.jsx)(O.ZP,{children:e})}),[zn,On,ni]),li=(0,s.useMemo)((function(){return[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Alphabet,{default:!0}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Trigger name"})]},"trigger_name"),(0,L.jsx)(T.Z,{monospace:!0,onChange:function(e){e.preventDefault(),$e((function(n){return He(He({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:kn},"trigger_name_input")]}),[kn]),oi=(0,s.useMemo)((function(){return[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Alphabet,{default:!0}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Trigger description"})]},"trigger_description"),(0,L.jsx)(T.Z,{monospace:!0,onChange:function(e){e.preventDefault(),$e((function(n){return He(He({},n),{},{description:e.target.value})}))},placeholder:"Description",value:_n},"trigger_description_input")]}),[_n]),ui=(0,s.useMemo)((function(){var e=[li,oi,[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Schedule,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Frequency"})]},"frequency"),(0,L.jsxs)("div",{children:[(0,L.jsxs)(ce.Z,{monospace:!0,onChange:function(e){e.preventDefault();var n=e.target.value;$e((function(e){return He(He({},e),{},{schedule_interval:n})}))},placeholder:"Choose the frequency to run",value:On,children:[Object.values(oe.U5).reduce((function(e,n){var i;return!pn||null!==bn&&void 0!==bn&&null!==(i=bn[oe.Xm.TIME])&&void 0!==i&&i[n]?e.concat((0,L.jsx)("option",{value:n,children:n.substring(1)},n)):e}),[]),!pn&&(0,L.jsx)("option",{value:"custom",children:"custom"},"custom")]}),!pn&&(0,L.jsx)(w.Z,{mt:1,p:1,children:(0,L.jsxs)(I.ZP,{muted:!0,small:!0,children:["If you don't see the frequency option you need, select ",(0,L.jsx)(I.ZP,{inline:!0,monospace:!0,small:!0,children:"custom"})," and enter CRON syntax."]})})]},"frequency_input")]];return pn||e.push([(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Switch,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Enable landing time"})]},"frequency"),(0,L.jsxs)("div",{children:[(0,L.jsx)(de.Z,{checked:$n,disabled:ei,onCheck:function(){Ye((function(e){return He(He({},e),{},{landing_time_enabled:!$n})}))}}),(0,L.jsxs)(w.Z,{mt:1,p:1,children:[ei&&(0,L.jsxs)(I.ZP,{muted:!0,small:!0,children:["In order to enable landing time, the trigger\u2019s frequency must be ",(0,L.jsx)(I.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.HOURLY}),", ",(0,L.jsx)(I.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.DAILY}),", ",(0,L.jsx)(I.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.WEEKLY}),", or ",(0,L.jsx)(I.ZP,{inline:!0,monospace:!0,small:!0,children:oe.U5.MONTHLY}),"."]}),!ei&&(0,L.jsx)(I.ZP,{muted:!0,small:!0,children:"Instead of starting at a specific time, this trigger will schedule pipeline runs at a time where it will finish by the specified time below."})]})]},"frequency_input")]),ni&&e.push([(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Schedule,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Average runtime"})]},"runtime_average"),(0,L.jsx)(O.ZP,{alignItems:"center",style:{minHeight:"".concat(5.75*A.iI,"px")},children:(0,L.jsx)(I.ZP,{monospace:!0,children:ti})},"runtime_average_value")]),e.push([(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.CalendarDate,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsxs)(I.ZP,{default:!0,children:[ni&&"Pipeline complete by",!ni&&"Start date and time"]})]},"start_time"),ni?ri:(0,L.jsxs)("div",{style:{minHeight:"".concat(5.75*A.iI,"px")},children:[!ln&&(0,L.jsx)(T.Z,{monospace:!0,onClick:function(){return on((function(e){return!e}))},placeholder:"YYYY-MM-DD HH:MM",value:An?(0,fe.XM)(An,Ln,{localTimezone:V}):""}),(0,L.jsx)("div",{style:{width:"400px"},children:(0,L.jsx)(b.Z,{disableEscape:!0,onClickOutside:function(){return on(!1)},open:ln,style:{position:"relative"},children:(0,L.jsx)(g.Z,{localTime:V,selectedDate:An,selectedTime:Ln,setSelectedDate:Dn,setSelectedTime:qn,topPosition:!0})})})]},"start_time_input")]),G&&e.splice(2,2),Kn&&e.splice(2,0,[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.Code,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"Cron expression"})]},"cron_expression"),(0,L.jsxs)("div",{children:[(0,L.jsx)(T.Z,{monospace:!0,onChange:function(e){e.preventDefault(),cn(e.target.value)},placeholder:"* * * * *",value:sn}),(0,L.jsxs)(w.Z,{mt:1,p:1,children:[(0,L.jsx)(I.ZP,{monospace:!0,xsmall:!0,children:"[minute] [hour] [day(month)] [month] [day(week)]"}),(0,L.jsx)(w.Z,{mb:"2px"}),sn?(0,L.jsx)(I.ZP,{danger:Qn,muted:!0,small:!0,children:Qn?"Invalid cron expression. Please check the cron syntax.":(0,L.jsxs)(L.Fragment,{children:['"',Jn,'"']})}):null,V&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(I.ZP,{bold:!0,inline:!0,small:!0,warning:!0,children:"Note:\xa0"}),(0,L.jsxs)(I.ZP,{inline:!0,small:!0,children:["If you have the display_local_timezone setting enabled, the local cron expression above will match your local timezone only",(0,L.jsx)("br",{}),"if the minute and hour values are single values without any special characters, such as the comma, hyphen, or slash.",(0,L.jsx)("br",{}),"You can still use cron expressions with special characters for the minute/hour values, but it will be based in UTC time."]})]})]})]},"cron_expression_input")]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Z,{mb:2,px:A.cd,children:(0,L.jsx)(S.Z,{children:"Settings"})}),(0,L.jsx)(F.Z,{light:!0,short:!0}),(0,L.jsx)(C.Z,{columnFlex:[null,1],rows:e})]})}),[Qn,sn,An,V,pn,Kn,G,ei,$n,ri,bn,Jn,ti,On,ln,ni,Ln,li,oi]),si=(0,s.useCallback)((function(e,n){ie((function(i){return Object.entries(n).forEach((function(n){var t=(0,l.Z)(n,2),r=t[0],o=t[1];i[e][r]=o})),(0,t.Z)(i)}))}),[ie]),ci=(0,s.useMemo)((function(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Z,{mb:A.cd,px:A.cd,children:(0,L.jsx)(S.Z,{children:"Settings"})}),(0,L.jsx)(F.Z,{light:!0,short:!0}),(0,L.jsx)(C.Z,{columnFlex:[null,1],rows:[li,oi]}),(0,L.jsxs)(w.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(S.Z,{children:"Events"}),(0,L.jsxs)(I.ZP,{muted:!0,children:["Add 1 or more event that will trigger this pipeline to run.",(0,L.jsx)("br",{}),"If you add more than 1 event, this pipeline will trigger if any of the events are received."]}),(0,L.jsxs)(w.Z,{mt:A.Mq,children:[(0,L.jsx)(I.ZP,{bold:!0,large:!0,children:"AWS events"}),(0,L.jsxs)(I.ZP,{muted:!0,children:["In order to retrieve all the possible AWS events you can trigger your pipeline from,",(0,L.jsx)("br",{}),"you\u2019ll need to set 3 environment variables (",(0,L.jsx)(W.Z,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html",openNewWindow:!0,underline:!0,children:"more info here"}),"):"]}),(0,L.jsx)(w.Z,{mt:1,children:(0,L.jsxs)(te,{monospace:!0,ordered:!0,children:[(0,L.jsx)(I.ZP,{monospace:!0,children:"AWS_REGION_NAME"}),(0,L.jsx)(I.ZP,{monospace:!0,children:"AWS_ACCESS_KEY_ID"}),(0,L.jsx)(I.ZP,{monospace:!0,children:"AWS_SECRET_ACCESS_KEY"})]})})]})]}),(0,L.jsx)(F.Z,{light:!0,short:!0}),(null===ne||void 0===ne?void 0:ne.length)>=1&&(0,L.jsx)(C.Z,{alignTop:!0,columnFlex:[1,1,2,null],columns:[{uuid:"Provider"},{uuid:"Event"},{uuid:"Pattern"},{label:function(){return""},uuid:"delete"}],rows:null===ne||void 0===ne?void 0:ne.map((function(e,n){var i=e.event_type,t=e.name,r=e.pattern,l=e.id||"".concat(i,"-").concat(t,"-").concat(n,"-").concat(JSON.stringify(r)),o=[];return r&&JSON.stringify(r,null,2).split("\n").forEach((function(e){o.push("    ".concat(e))})),[(0,L.jsx)(ce.Z,{monospace:!0,onChange:function(e){return si(n,{event_type:e.target.value})},placeholder:"Event provider",value:i||"",children:U.S5.map((function(e){var n=e.label,i=e.uuid;return(0,L.jsx)("option",{value:i,children:n()},i)}))},"event-provider-".concat(l)),(0,L.jsx)(ce.Z,{monospace:!0,onChange:function(e){var i,t=e.target.value,r=null===(i=Wn[t])||void 0===i?void 0:i.event_pattern;si(n,{name:t,pattern:r?JSON.parse(r):null})},placeholder:"Event name",value:t,children:Rn.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))},"event-name-".concat(l)),r&&(0,L.jsx)(y.Z,{language:"json",small:!0,source:o.join("\n")}),(0,L.jsx)(j.ZP,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return ie((function(e){return(0,N.oM)(e,n)}))},children:(0,L.jsx)(pe.Trash,{default:!0,size:2*A.iI})},"remove_event")]}))}),(0,L.jsx)(w.Z,{p:A.cd,children:(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(pe.Add,{size:2*A.iI}),onClick:function(){return ie((function(e){return e.concat({})}))},outline:!0,children:"Add event matcher"})})]})}),[ne,Rn,Wn,li,oi,si]),ai=(0,s.useMemo)((function(){var e=(0,fe.M8)(_,Re);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Z,{mb:A.cd,px:A.cd,children:(0,L.jsx)(S.Z,{children:"Settings"})}),(0,L.jsx)(F.Z,{light:!0,short:!0}),(0,L.jsx)(C.Z,{columnFlex:[null,1],rows:[li,oi]}),(0,L.jsxs)(w.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(S.Z,{children:"Endpoint"}),(0,L.jsxs)(I.ZP,{muted:!0,children:["Make a ",(0,L.jsx)(I.ZP,{bold:!0,inline:!0,monospace:!0,children:"POST"})," request to the following endpoint:"]}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsx)(P.Z,{copiedText:e,linkText:e,monospace:!0,withCopyIcon:!0})}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(w.Z,{mr:1,children:(0,L.jsx)(de.Z,{checked:Re,onCheck:function(){return We(!Re)}})}),(0,L.jsx)(I.ZP,{muted:!0,children:"Show alternative endpoint to pass token in headers"})]})})]}),Re&&(0,L.jsxs)(w.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(S.Z,{children:"Headers"}),(0,L.jsx)(I.ZP,{muted:!0,children:"You will need to include the following headers in your request to authenticate with the server."}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsx)(P.Z,{copiedText:"Content-Type: application/json\n  Authorization: Bearer ".concat(null===_||void 0===_?void 0:_.token,"\n  "),withCopyIcon:!0,children:(0,L.jsx)(y.Z,{language:"json",small:!0,source:"\n      Content-Type: application/json\n      Authorization: Bearer ".concat(null===_||void 0===_?void 0:_.token,"\n  ")})})})]}),(0,L.jsxs)(w.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(S.Z,{children:"Payload"}),(0,L.jsx)(I.ZP,{muted:!0,children:"You can optionally include runtime variables in your request payload. These runtime variables are accessible from within each pipeline block."}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsx)(P.Z,{copiedText:'{\n  "pipeline_run": {\n    "variables": {\n      "key1": "value1",\n      "key2": "value2"\n    }\n  }\n}\n',withCopyIcon:!0,children:(0,L.jsx)(y.Z,{language:"json",small:!0,source:'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\n'})})})]}),(0,L.jsxs)(w.Z,{mb:2,mt:5,px:A.cd,children:[(0,L.jsx)(S.Z,{children:"Sample cURL command"}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsx)(y.Z,{language:"bash",small:!0,source:Re?"\n    curl -X POST ".concat(e," \\\n      --header 'Content-Type: application/json' \\\n      --header 'Authorization: Bearer ").concat(null===_||void 0===_?void 0:_.token,'\' \\\n      --data \'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\'\n  '):"\n    curl -X POST ".concat(e,' \\\n      --header \'Content-Type: application/json\' \\\n      --data \'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\'\n')})})]})]})}),[_,We,oi,li,Re]),di=!Sn||oe.Xm.TIME===Sn&&!(G&&An||!G&&An&&On)||oe.Xm.EVENT===Sn&&(!(null!==ne&&void 0!==ne&&ne.length)||!ne.every((function(e){var n=e.event_type,i=e.name;return n&&i}))),hi=(0,s.useMemo)((function(){var e;return(null===d||void 0===d||null===(e=d.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return ye.tf.DBT===n})))||[]}),[d]),vi=(0,s.useMemo)((function(){return null!==d&&void 0!==d&&d.blocks?(0,Me.n)(d):null}),[d]),pi=(0,s.useMemo)((function(){var e,n;return(0,L.jsxs)(w.Z,{py:A.cd,children:[(0,L.jsxs)(w.Z,{mb:A.HN,px:A.cd,children:[(0,L.jsx)(S.Z,{children:"Run settings"}),(0,L.jsxs)(w.Z,{mt:A.Mq,children:[!G&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(w.Z,{mb:A.Mq,children:[(0,L.jsx)(I.ZP,{children:"Set a timeout for each run of this trigger (optional)"}),(0,L.jsx)(w.Z,{mb:1}),(0,L.jsx)(T.Z,{label:"Timeout (in seconds)",onChange:function(e){return Ye((function(n){return He(He({},n),{},{timeout:e.target.value})}))},primary:!0,setContentOnMount:!0,type:"number",value:null===Ve||void 0===Ve?void 0:Ve.timeout})]}),(0,L.jsxs)(w.Z,{mb:A.Mq,children:[(0,L.jsx)(I.ZP,{children:"Status for runs that exceed the timeout (default: failed)"}),(0,L.jsx)(w.Z,{mb:1}),(0,L.jsxs)(ce.Z,{fullWidth:!0,monospace:!0,onChange:function(e){e.preventDefault(),Ye((function(n){return He(He({},n),{},{timeout_status:e.target.value})}))},placeholder:"Timeout status",value:null===Ve||void 0===Ve?void 0:Ve.timeout_status,children:[(0,L.jsx)("option",{value:Se.V.FAILED,children:"Failed"}),(0,L.jsx)("option",{value:Se.V.CANCELLED,children:"Cancelled"})]})]})]}),(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(w.Z,{mr:2,children:(0,L.jsx)(de.Z,{checked:ze,onCheck:function(e){Ue(e),e||$e((function(e){return He(He({},e),{},{slaAmount:0})}))}})}),(0,L.jsx)(I.ZP,{default:!0,monospace:!0,children:"Configure trigger SLA"})]}),ze&&(0,L.jsx)(C.Z,{columnFlex:[null,1],rows:[[(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(pe.CalendarDate,{default:!0,size:1.5*A.iI}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:!0,children:"SLA"})]},"sla_detail"),(0,L.jsxs)(O.ZP,{children:[(0,L.jsx)(R.Z,{flex:1,children:(0,L.jsx)(T.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),$e((function(n){return He(He({},n),{},{slaAmount:e.target.value})}))},placeholder:"Time",value:null===Qe||void 0===Qe?void 0:Qe.slaAmount})}),(0,L.jsx)(R.Z,{flex:1,children:(0,L.jsx)(ce.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),$e((function(n){return He(He({},n),{},{slaUnit:e.target.value})}))},placeholder:"Select time unit",small:!0,value:null===Qe||void 0===Qe?void 0:Qe.slaUnit,children:Object.keys(fe.tL).map((function(e){return(0,L.jsx)("option",{value:e,children:"".concat(e,"(s)")},e)}))})})]},"sla_input_detail")]]})]}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsx)(O.ZP,{alignItems:"center",children:(0,L.jsx)(Z.Z,{checked:null===Ve||void 0===Ve?void 0:Ve.allow_blocks_to_fail,label:"Keep running pipeline even if blocks fail",onClick:function(){return Ye((function(e){return He(He({},e),{},{allow_blocks_to_fail:!(null!==Ve&&void 0!==Ve&&Ve.allow_blocks_to_fail)})}))}})})}),oe.Xm.TIME===Sn&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Z,{mt:A.cd,children:(0,L.jsx)(O.ZP,{alignItems:"center",children:(0,L.jsx)(Z.Z,{checked:null===Ve||void 0===Ve?void 0:Ve.skip_if_previous_running,label:"Skip run if previous run still in progress",onClick:function(){return Ye((function(e){return He(He({},e),{},{skip_if_previous_running:!(null!==Ve&&void 0!==Ve&&Ve.skip_if_previous_running)})}))}})})}),(0,L.jsx)(w.Z,{mt:A.cd,children:(0,L.jsx)(O.ZP,{alignItems:"center",children:(0,L.jsx)(Z.Z,{checked:null===Ve||void 0===Ve?void 0:Ve.create_initial_pipeline_run,label:"Create initial pipeline run if start date is before current execution period",onClick:function(){return Ye((function(e){return He(He({},e),{},{create_initial_pipeline_run:!(null!==Ve&&void 0!==Ve&&Ve.create_initial_pipeline_run)})}))}})})})]})]}),(0,L.jsxs)(w.Z,{mb:A.HN,children:[(0,L.jsxs)(w.Z,{px:A.cd,children:[(0,L.jsx)(S.Z,{children:"Runtime variables"}),(0,Ne.Qr)(yn)&&(0,L.jsxs)(w.Z,{mt:1,children:[(0,L.jsx)(I.ZP,{default:!0,children:"This pipeline has no runtime variables."}),(0,L.jsx)(u(),{as:"/pipelines/".concat(Y,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,L.jsx)(W.Z,{primary:!0,children:"Click here"})})," ",(0,L.jsx)(I.ZP,{default:!0,inline:!0,children:"to add variables to this pipeline."})]})]}),(0,L.jsx)(w.Z,{mt:A.Mq,children:(0,L.jsx)(re.Z,{enableVariablesOverwrite:!0,originalVariables:null===_||void 0===_?void 0:_.variables,runtimeVariables:Ge,setRuntimeVariables:Ke})})]}),vi&&(null===(e=Object.keys(vi||{}))||void 0===e?void 0:e.length)>=1&&(0,L.jsxs)(w.Z,{mb:A.HN,children:[(0,L.jsx)(w.Z,{px:A.cd,children:(0,L.jsx)(S.Z,{children:"Override bookmark values"})}),(0,L.jsx)(f.Z,{bookmarkValues:Q,originalBookmarkValues:null===_||void 0===_||null===(n=_.variables)||void 0===n?void 0:n[oe.PN],pipeline:d,setBookmarkValues:$})]}),(null===hi||void 0===hi?void 0:hi.length)>=1&&(0,L.jsx)(w.Z,{mb:A.HN,children:(0,L.jsx)(z,{blocks:hi,updateVariables:Ke,variables:He(He({},Gn),Ge)})})]})}),[vi,Q,hi,ze,yn,G,d,null===_||void 0===_?void 0:_.variables,Y,Ge,Qe,Sn,Gn,$,Ue,Ke,Ve]),mi=Ze.ZP.tags.list().data,fi=(0,s.useMemo)((function(){return((null===mi||void 0===mi?void 0:mi.tags)||[]).filter((function(e){var n=e.uuid;return!(null!==In&&void 0!==In&&In.includes(n))}))}),[mi,In]),ji=(0,s.useMemo)((function(){return(0,fe.ri)(G)}),[G]),xi=(0,s.useMemo)((function(){return(0,L.jsx)(ge,{containerRef:H,date:An,interactions:xn,pipeline:d,pipelineInteraction:jn,pipelineSchedule:Qe,setVariables:function(e){$e((function(n){var i=He({},e((null===n||void 0===n?void 0:n.variables)||{})),t=He({},i);return null===xn||void 0===xn||xn.forEach((function(e){Object.entries((null===e||void 0===e?void 0:e.variables)||{}).forEach((function(e){var n=(0,l.Z)(e,2),i=n[0],r=n[1].types;t&&i in t&&(t[i]=(0,Ee.M)(t[i],r))}))})),tn(t),He(He({},n),{},{variables:i})}))},showSummary:Ie.uuid===dn,time:Ln,triggerTypes:ji,variables:null===Qe||void 0===Qe?void 0:Qe.variables})}),[H,An,xn,d,jn,Qe,dn,$e,tn,Ln,ji]),gi=(0,s.useMemo)((function(){return oe.fq.ACTIVE===(null===Qe||void 0===Qe?void 0:Qe.status)}),[Qe]),Zi=E?null===E||void 0===E?void 0:E((function(e){return B.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===d||void 0===d?void 0:d.uuid,"/triggers/").concat(e))})):[null,{isLoading:!1}],bi=(0,l.Z)(Zi,2),yi=bi[0],Pi=bi[1].isLoading,_i=(0,s.useCallback)((function(){null===yi||void 0===yi||yi({pipeline_schedule:He(He({},Qe),{},{variables:nn||(null===Qe||void 0===Qe?void 0:Qe.variables)})})}),[yi,nn,Qe]),ki=(0,s.useMemo)((function(){var e,n;return X?(e=(0,L.jsx)(j.ZP,{linkProps:{as:"/pipelines/".concat(Y,"/triggers/").concat(X),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel and go back"}),n=(0,L.jsx)(j.ZP,{onClick:ii,primary:!0,children:"Save trigger"})):Ce.uuid===dn?(e=(0,L.jsx)(j.ZP,{onClick:function(){return null===c||void 0===c?void 0:c()},secondary:!0,children:"Cancel and go back"}),n=(0,L.jsx)(j.ZP,{afterIcon:(0,L.jsx)(pe.PaginateArrowRight,{}),onClick:function(){return hn(we.uuid)},primary:!0,children:"Next: Customize"})):we.uuid===dn?(e=(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(pe.PaginateArrowLeft,{}),onClick:function(){return hn(Ce.uuid)},secondary:!0,children:"Back: Settings"}),n=(0,L.jsx)(j.ZP,{afterIcon:(0,L.jsx)(pe.PaginateArrowRight,{}),onClick:function(){return hn(Ie.uuid)},primary:!0,children:"Next: Review"})):Ie.uuid===dn&&(e=(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(pe.PaginateArrowLeft,{}),onClick:function(){return hn(we.uuid)},secondary:!0,children:"Back: Customize"}),n=(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(j.ZP,{beforeIcon:(0,L.jsx)(pe.Lightning,{}),loading:Pi,onClick:function(){return _i()},primary:!0,children:X?"Save trigger":"Create trigger"}),!X&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Z,{mr:A.cd}),(0,L.jsx)(de.Z,{checked:gi,compact:!0,onCheck:function(e){return $e((function(n){return He(He({},n),{},{status:e(gi)?oe.fq.ACTIVE:oe.fq.INACTIVE})}))}}),(0,L.jsx)(w.Z,{mr:1}),(0,L.jsx)(I.ZP,{default:gi,muted:!gi,small:!0,children:"Set trigger to be active immediately after creating"})]})]})),(0,L.jsx)(w.Z,{p:A.cd,children:(0,L.jsxs)(O.ZP,{alignItems:"center",children:[e,e&&n&&(0,L.jsx)(w.Z,{mr:A.cd}),n]})})}),[_i,Pi,gi,c,ii,X,Y,dn,hn]),Oi=(0,s.useMemo)((function(){var e,n,i,t,r,l,o;return"undefined"===typeof(null===d||void 0===d||null===(e=d.settings)||void 0===e||null===(n=e.triggers)||void 0===n?void 0:n.save_in_code_automatically)?null===q||void 0===q||null===(i=q.pipelines)||void 0===i||null===(t=i.settings)||void 0===t||null===(r=t.triggers)||void 0===r?void 0:r.save_in_code_automatically:null===d||void 0===d||null===(l=d.settings)||void 0===l||null===(o=l.triggers)||void 0===o?void 0:o.save_in_code_automatically}),[d,q]);return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(le.Z,{after:!pn&&pi,afterHidden:pn,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat(Y,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return null===_||void 0===_?void 0:_.name},linkProps:{as:"/pipelines/".concat(Y,"/triggers/").concat(X),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],errors:i,pageName:Oe.M.TRIGGERS,pipeline:d,setErrors:k,subheader:pn||Zn?(0,L.jsx)(w.Z,{px:A.cd,children:(0,L.jsx)(x.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return hn(n)},regularSizeText:!0,selectedTabUUID:dn,tabs:Te,underlineColor:(0,D.qn)(ye.tf.DATA_LOADER).accent,underlineStyle:!0})}):(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(j.ZP,{disabled:di,loading:Xn,onClick:ii,outline:!0,primary:!0,children:"Save changes"}),(0,L.jsx)(w.Z,{mr:A.cd}),(0,L.jsx)(j.ZP,{linkProps:{as:"/pipelines/".concat(Y,"/triggers/").concat(X),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"}),Oi&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(w.Z,{mr:A.cd}),(0,L.jsxs)(I.ZP,{default:!0,xsmall:!0,children:["This trigger will automatically be persisted in code.",(0,L.jsx)("br",{}),"To change this behavior, update the ",(0,L.jsx)(u(),{as:"/pipelines/".concat(Y,"/settings"),href:"/pipelines/[pipeline]/settings",passHref:!0,children:(0,L.jsx)(W.Z,{openNewWindow:!0,xsmall:!0,children:"pipeline\u2019s settings"})})," or ",(0,L.jsx)(u(),{as:"/settings/workspace/preferences",href:"/settings/workspace/preferences",passHref:!0,children:(0,L.jsx)(W.Z,{openNewWindow:!0,xsmall:!0,children:"project settings"})}),"."]})]})]}),subheaderNoPadding:pn||Zn,title:function(){return null!==_&&void 0!==_&&_.name?"Edit ".concat(null===_||void 0===_?void 0:_.name):"New trigger"},uuid:"triggers/edit",children:(0,L.jsxs)("div",{ref:H,children:[(pn||Zn)&&(0,L.jsx)(F.Z,{light:!0}),(pn||Zn)&&(we.uuid===dn||Ie.uuid===dn)&&xi,(!pn||Ce.uuid===dn)&&(!Zn||Ce.uuid===dn)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(w.Z,{p:A.cd,children:[(0,L.jsxs)(w.Z,{mb:2,children:[(0,L.jsx)(S.Z,{children:"Trigger type"}),(0,L.jsx)(I.ZP,{muted:!0,children:"How would you like this pipeline to be triggered?"})]}),(0,L.jsx)(O.ZP,{children:ji.reduce((function(e,n){var i=n.label,t=n.description,r=n.uuid,l=Sn===r,o=Sn&&!l;return!pn||null!==bn&&void 0!==bn&&bn[r]?e.concat((0,L.jsx)(j.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){oe.Xm.EVENT!==r||null!==ne&&void 0!==ne&&ne.length||ie([{}]),$e((function(e){return He(He({},e),{},{schedule_type:r})}))},children:(0,L.jsx)(Pe.U,{selected:l,children:(0,L.jsxs)(O.ZP,{alignItems:"center",children:[(0,L.jsx)(R.Z,{children:(0,L.jsx)("input",{checked:l,type:"radio"})}),(0,L.jsx)(w.Z,{mr:A.cd}),(0,L.jsxs)(R.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,L.jsx)(S.Z,{bold:!0,default:!l&&!o,level:5,muted:!l&&o,children:i()}),(0,L.jsx)(I.ZP,{default:!l&&!o,leftAligned:!0,muted:o,children:t()})]})]})})},r)):e}),[])})]}),(0,L.jsxs)(w.Z,{mt:A.HN,children:[oe.Xm.TIME===Sn&&ui,oe.Xm.EVENT===Sn&&ci,oe.Xm.API===Sn&&ai]}),!pn&&(0,L.jsxs)(w.Z,{mt:A.HN,px:A.cd,children:[(0,L.jsxs)(w.Z,{mb:2,children:[(0,L.jsx)(S.Z,{children:"Tags"}),(0,L.jsx)(I.ZP,{muted:!0,children:"Add or remove tags from this trigger."})]}),(0,L.jsx)(ae.Z,{removeTag:function(e){$e((function(n){return He(He({},n),{},{tags:null===In||void 0===In?void 0:In.filter((function(n){return n!==e.uuid}))})}))},selectTag:function(e){$e((function(n){return He(He({},n),{},{tags:(0,N.$C)(e.uuid,In,(function(n){return n===e.uuid}))})}))},selectedTags:null===In||void 0===In?void 0:In.map((function(e){return{uuid:e}})),tags:fi,uuid:"TagsAutocompleteInputField-trigger-".concat(X)})]})]}),(pn||Zn)&&ki]})})})}},97196:function(e,n,i){i.d(n,{S5:function(){return l},_P:function(){return o}});var t,r=i(86735);!function(e){e.AWS="aws_event"}(t||(t={}));var l=[{label:function(){return"AWS"},uuid:t.AWS}],o=(0,r.HK)(l,(function(e){return e.uuid}))},32080:function(e,n,i){i.d(n,{n:function(){return l}});var t=i(44425),r=i(61599);function l(e){var n,i={};return null===e||void 0===e||null===(n=e.blocks)||void 0===n||n.forEach((function(e){var n=e.catalog,l=e.type,o=e.uuid;if(t.tf.DATA_LOADER===l&&null!==n&&void 0!==n&&n.streams){var u,s=null===n||void 0===n||null===(u=n.streams)||void 0===u?void 0:u.filter((function(e){var n=e.replication_method;return r._B.INCREMENTAL===n}));(null===s||void 0===s?void 0:s.length)>=1&&(o in i||(i[o]={block:e,streams:[]}),i[o].streams.push(s))}})),i}}}]);
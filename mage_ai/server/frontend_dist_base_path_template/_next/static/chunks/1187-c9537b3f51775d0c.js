"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1187],{94629:function(e,t,n){n.d(t,{Z:function(){return _}});var o=n(82394),i=n(21831),r=n(82684),l=n(50724),s=n(1402),u=n(97618),c=n(70613),d=n(31557),a=n(68899),p=n(28598);function h(e,t){var n=e.children,o=e.noPadding;return(0,p.jsx)(a.HS,{noPadding:o,ref:t,children:n})}var f=r.forwardRef(h),v=n(62547),m=n(82571),j=n(77417),x=n(46684),g=n(75375);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){e.addProjectBreadcrumbToCustomBreadcrumbs;var n=e.after,o=e.afterHeader,r=e.afterHidden,h=e.afterWidth,b=e.afterWidthOverride,Z=e.appendBreadcrumbs,_=e.before,O=e.beforeHeader,P=e.beforeWidth,k=e.breadcrumbs,S=e.children,E=e.contained,w=e.errors,A=e.headerMenuItems,R=e.headerOffset,C=e.hideAfterCompletely,I=e.mainContainerHeader,T=e.navigationItems,N=e.setAfterHidden,D=e.setAfterWidth,L=e.setBeforeWidth,U=e.setErrors,B=e.subheaderChildren,M=e.subheaderNoPadding,H=e.title,F=e.uuid,G=(0,g.Z)(F,{beforeResizeOffset:g.H,setWidthAfter:D,setWidthBefore:L,widthAfter:h,widthBefore:P,widthOverrideAfter:b}),W=G.mainContainerRef,Y=G.mousedownActiveAfter,Q=G.mousedownActiveBefore,V=G.setMousedownActiveAfter,K=G.setMousedownActiveBefore,q=G.setWidthAfter,z=G.setWidthBefore,X=G.widthAfter,$=G.widthBefore,J=(0,j.Z)().project,ee=[];return k&&ee.push.apply(ee,(0,i.Z)(k)),null!==k&&void 0!==k&&k.length&&!Z||!J||null!==k&&void 0!==k&&k.length||ee.unshift({bold:!Z,label:function(){return H}}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Z,{title:H}),(0,p.jsx)(d.Z,{breadcrumbs:ee,menuItems:A}),(0,p.jsxs)(a.Nk,{ref:t,children:[0!==(null===T||void 0===T?void 0:T.length)&&(0,p.jsx)(a.lm,{showMore:!0,children:(0,p.jsx)(m.Z,{navigationItems:T,showMore:!0})}),(0,p.jsx)(u.Z,{flex:1,flexDirection:"column",children:(0,p.jsxs)(v.Z,{after:n,afterHeader:o,afterHeightOffset:x.Mz,afterHidden:r,afterMousedownActive:Y,afterWidth:X,before:_,beforeHeader:O,beforeHeightOffset:x.Mz,beforeMousedownActive:Q,beforeWidth:_?$:a.k1,contained:E,headerOffset:R,hideAfterCompletely:!n||C,leftOffset:_?a.k1:null,mainContainerHeader:I,mainContainerRef:W,setAfterHidden:N,setAfterMousedownActive:V,setAfterWidth:q,setBeforeMousedownActive:K,setBeforeWidth:z,children:[B&&(0,p.jsx)(f,{noPadding:M,children:B}),S]})})]}),w&&(0,p.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===U||void 0===U?void 0:U(null)},children:(0,p.jsx)(s.Z,y(y({},w),{},{onClose:function(){return null===U||void 0===U?void 0:U(null)}}))})]})}var _=r.forwardRef(Z)},46866:function(e,t,n){n.d(t,{Z:function(){return he}});var o=n(30018),i=n(21831),r=n(82394),l=n(75582),s=n(12691),u=n.n(s),c=n(25976),d=n(21764),a=n(82684),p=n(69864),h=n(34376),f=n(32013),v=n(98777),m=n(71180),j=n(31882),x=n(97618),g=n(55485),b=n(14466),y=n(48670),Z=n(88543),_=n(38276),O=n(30160),P=n(35686),k=n(72473),S=n(8193),E=n(70515),w=n(81728),A=n(3917),R=n(55283),C=n(50178),I=n(86735),T=n(72619),N=n(44085),D=n(17488),L=n(28598);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M="CUSTOM_VALUE_TYPE",H={compact:!0,monospace:!0,small:!0};var F=function(e){var t=e.leftKey,n=e.leftObjectKeys,o=e.leftObjectType,i=e.leftObjectTypeState,l=e.leftValue,s=e.leftValueType,u=e.rightAligned,c=e.setLeftKey,d=e.setLeftObjectTypeState,p=e.updatePredicate,h=(0,a.useRef)(null),f=(0,a.useState)(),v=f[0],j=f[1];(0,a.useEffect)((function(){var e,t;j(null===h||void 0===h||null===(e=h.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.width)}),[]),(0,a.useEffect)((function(){var e,t;j(null===h||void 0===h||null===(e=h.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.width)}),[o,i]);var x=(0,a.useMemo)((function(){return{alignItems:"center",justifyContent:u?"flex-start":"flex-end"}}),[u]),y=(0,a.useMemo)((function(){var e=(0,L.jsx)(O.ZP,{default:!0,small:!0,children:"Value data type"}),t=(0,L.jsx)(N.Z,{compact:!0,onChange:function(e){return p((0,r.Z)({},u?"right_value_type":"left_value_type",B(B({},s),{},{value_data_type:e.target.value})))},placeholder:"required",small:!0,value:null===s||void 0===s?void 0:s.value_data_type,children:Object.values(b.t4).map((function(e){return(0,L.jsx)("option",{value:e,children:e.toLowerCase()},e)}))});return(0,L.jsxs)(g.ZP,B(B({},x),{},{children:[u?t:e,(0,L.jsx)(_.Z,{mr:1}),u?e:t]}))}),[s,u,x,p]),Z=(0,a.useMemo)((function(){var e=(0,L.jsx)(O.ZP,{default:!0,small:!0,children:"Get value from"}),t=M===String(i)||!o&&l,n=(0,L.jsxs)(N.Z,B(B({},H),{},{onChange:function(e){var t,n,o=e.target.value;(d(o),M===o)?p((t={},(0,r.Z)(t,u?"right_object_keys":"left_object_keys",null),(0,r.Z)(t,u?"right_object_type":"left_object_type",null),t)):p((n={},(0,r.Z)(n,u?"right_object_type":"left_object_type",o),(0,r.Z)(n,u?"right_value":"left_value",null),n))},placeholder:"required",value:t?M:o,children:[(0,L.jsx)("option",{value:M,children:"Custom value"}),Object.values(b.XG).map((function(e){return(0,L.jsx)("option",{value:e,children:e.toLowerCase()},e)}))]})),s=t&&(0,L.jsxs)(L.Fragment,{children:[!u&&(0,L.jsx)(_.Z,{mr:1}),(0,L.jsx)(D.Z,B(B({},H),{},{onChange:function(e){return p((0,r.Z)({},u?"right_value":"left_value",e.target.value))},value:l||""})),u&&(0,L.jsx)(_.Z,{mr:1})]});return(0,L.jsxs)(g.ZP,B(B({},x),{},{children:[!u&&e,u&&s,u&&n,(0,L.jsx)(_.Z,{mr:1}),!u&&n,!u&&s,u&&e]}))}),[o,i,l,d,x,p]),P=(0,a.useMemo)((function(){return(0,L.jsxs)(L.Fragment,{children:[u&&(0,L.jsx)("div",{style:{paddingRight:4}}),(0,L.jsx)(m.ZP,{compact:!0,disabled:!t,onClick:function(){p((0,r.Z)({},u?"right_object_keys":"left_object_keys",(n||[]).concat(t))),c(null)},padding:"2px 6px",ref:h,small:!0,children:"Add key"}),!u&&(0,L.jsx)("div",{style:{paddingRight:4}})]})}),[t,n,u,c,p]),S=(0,a.useMemo)((function(){var e=(0,L.jsx)(O.ZP,{default:!0,small:!0,children:"Value extraction keys"}),i=(0,L.jsx)(D.Z,B(B({},H),{},{buttonAfter:!u&&P,buttonAfterWidth:u||"undefined"===typeof v?null:v+10,buttonBefore:u&&P,buttonBeforeWidth:u&&"undefined"!==typeof v?v+10:null,onChange:function(e){c(e.target.value)},placeholder:"Enter key...",value:t||""}));L.Fragment,L.Fragment;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(g.ZP,B(B({},x),{},{children:[u?i:e,(0,L.jsx)(_.Z,{mr:1}),u?e:i]})),(null===n||void 0===n?void 0:n.length)>=1&&(0,L.jsx)(_.Z,{mt:1,children:(0,L.jsxs)(g.ZP,B(B({},x),{},{children:[(0,L.jsx)(O.ZP,{default:!0,monospace:!0,xsmall:!0,children:o}),!(null!==n&&void 0!==n&&n.length)&&(0,L.jsxs)(O.ZP,{monospace:!0,muted:!0,xsmall:!0,children:["['",(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,xsmall:!0,children:"..."}),"']"]}),null===n||void 0===n?void 0:n.map((function(e){return(0,L.jsxs)(O.ZP,{monospace:!0,muted:!0,xsmall:!0,children:["['",(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,xsmall:!0,children:e}),"']"]})})),(0,L.jsx)("div",{style:{marginRight:4}}),(0,L.jsx)(m.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){p((0,r.Z)({},u?"right_object_keys":"left_object_keys",(n||[]).slice(0,Math.max(0,(null===n||void 0===n?void 0:n.length)-1))))},children:(0,L.jsxs)(g.ZP,{alignItems:"center",children:[(0,L.jsx)(k.Close,{danger:!0,size:1.25*E.iI}),(0,L.jsx)("div",{style:{marginRight:2}}),(0,L.jsx)(O.ZP,{default:!0,xsmall:!0,children:"Delete key"})]})})]}))})]})}),[v,P,t,n,o,u,x]);return(0,L.jsxs)(L.Fragment,{children:[y,(0,L.jsx)(_.Z,{mt:1}),Z,(0,L.jsx)(_.Z,{mt:1}),o&&M!==String(i)&&S]})},G=n(65956),W=n(44897),Y=n(61896),Q=1.25*E.iI,V=1.5*E.iI,K=E.iI/4,q=.75*E.iI,z=E.iI/2,X=(0,c.css)([""," ",""],(function(e){return!e.default&&"\n    background-color: ".concat((e.theme.accent||W.Z.accent).purple,";\n  ")}),(function(e){return e.default&&"\n    background-color: ".concat((e.theme.content||W.Z.content).muted,";\n  ")})),$=c.default.div.withConfig({displayName:"indexstyle__LabelStyle",componentId:"sc-1v7t9a0-0"})(["border-radius:100px;padding:","px ","px;",""],K,V,(function(e){return"\n    background-color: ".concat((e.theme.background||W.Z.background).chartBlock,";\n    border: ").concat(1,"px solid ").concat((e.theme.interactive||W.Z.interactive).defaultBorder,";\n  ")})),J=c.default.div.withConfig({displayName:"indexstyle__CircleStyle",componentId:"sc-1v7t9a0-1"})(["",";border-radius:","px;height:","px;width:","px;",""],X,1.25*E.iI,Q,Q,(function(e){return"\n    border: 1px solid ".concat((e.theme.interactive||W.Z.interactive).hoverBorder,";\n  ")})),ee=c.default.div.withConfig({displayName:"indexstyle__OperatorStyle",componentId:"sc-1v7t9a0-2"})(["",";min-width:","px;padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],X,Q+2*(1+V),E.iI/4,z,z,E.iI/4+1),te=c.default.div.withConfig({displayName:"indexstyle__VerticalLineStyle",componentId:"sc-1v7t9a0-3"})(["",";width:","px;margin-right:","px;"," ",""],X,q,V+1+Q/2-q/2,(function(e){return e.last&&"\n    height: calc(50% - ".concat(K+1+Y.dN/2,"px);\n  ")}),(function(e){return!e.last&&"\n    height: 100%;\n  "}));var ne=function(e){var t=e.andOrOperator,n=e.children,o=e.first,i=e.last,r=e.level,l=e.predicate,s=e.removePredicate,u=e.title,c=e.updatePredicate,d=(0,a.useRef)(null),p=(0,a.useState)(null),h=p[0],f=p[1],v=(0,a.useState)(null),j=v[0],y=v[1],Z=(0,a.useState)(null),P=Z[0],S=Z[1],w=(0,a.useState)(null),A=w[0],R=w[1],C=(0,a.useState)(null),I=(C[0],C[1]),T=(l.and_or_operator,l.left_object_keys),D=l.left_object_type,U=l.left_value,B=l.left_value_type,M=l.operator,H=l.right_object_keys,W=l.right_object_type,Y=l.right_value,Q=l.right_value_type;(0,a.useEffect)((function(){var e,t;I(null===d||void 0===d||null===(e=d.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}),[]),(0,a.useEffect)((function(){var e,t;I(null===d||void 0===d||null===(e=d.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}),[D,W]);var V=(0,a.useMemo)((function(){if(!t)return null;var e=(0,L.jsx)(O.ZP,{bold:!0,center:!0,monospace:!0,uppercase:!0,children:t});return(0,L.jsx)(ee,{default:b.YB.OR===t,children:e})}),[t,r]);return(0,L.jsxs)(g.ZP,{children:[(0,L.jsxs)(g.ZP,{alignItems:"flex-end",flexDirection:"column",children:[!o&&i&&(0,L.jsx)(te,{default:b.YB.OR===t,last:!0}),(0,L.jsx)($,{children:(0,L.jsxs)(g.ZP,{alignItems:"center",children:[(0,L.jsx)(O.ZP,{monospace:!0,children:u}),(0,L.jsx)(_.Z,{mr:1}),(0,L.jsx)(J,{default:b.YB.OR===t})]})}),!i&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(te,{default:b.YB.OR===t}),V,(0,L.jsx)(te,{default:b.YB.OR===t})]})]}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)(x.Z,{flex:1,children:(0,L.jsxs)(g.ZP,{flexDirection:"column",fullWidth:!0,ref:d,children:[(0,L.jsxs)(G.Z,{dark:!!(r%2),children:[(0,L.jsxs)(g.ZP,{children:[(0,L.jsxs)(x.Z,{flex:1,flexDirection:"column",children:[(0,L.jsxs)(g.ZP,{justifyContent:"center",children:[(0,L.jsxs)(g.ZP,{alignItems:"center",justifyContent:"flex-end",children:[!D&&"undefined"===typeof U&&(0,L.jsx)(O.ZP,{monospace:!0,muted:!0,small:!0,children:"Left expression"}),!D&&U&&(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:b.t4.STRING===(null===B||void 0===B?void 0:B.value_data_type)?"'".concat(U,"'"):U}),D&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:D}),!(null!==T&&void 0!==T&&T.length)&&(0,L.jsxs)(O.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"..."}),"']"]}),null===T||void 0===T?void 0:T.map((function(e){return(0,L.jsxs)(O.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:e}),"']"]})}))]})]}),(0,L.jsx)(_.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:M?b.N_[M]:"operator"}),(!M||!b.i9.includes(M))&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(_.Z,{mr:1}),(0,L.jsxs)(g.ZP,{alignItems:"center",justifyContent:"flex-start",children:[!W&&"undefined"===typeof Y&&(0,L.jsx)(O.ZP,{monospace:!0,muted:!0,small:!0,children:"Right expression"}),!W&&Y&&(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:b.t4.STRING===(null===Q||void 0===Q?void 0:Q.value_data_type)?"'".concat(Y,"'"):Y}),W&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:W}),!(null!==H&&void 0!==H&&H.length)&&(0,L.jsxs)(O.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"..."}),"']"]}),null===H||void 0===H?void 0:H.map((function(e){return(0,L.jsxs)(O.ZP,{monospace:!0,muted:!0,small:!0,children:["['",(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:e}),"']"]})}))]})]})]})]}),(0,L.jsx)(_.Z,{mb:E.cd}),(0,L.jsxs)(g.ZP,{alignItems:"center",children:[(0,L.jsx)(x.Z,{flex:1,flexDirection:"column",children:(0,L.jsx)(F,{leftKey:j,leftObjectKeys:T,leftObjectType:D,leftObjectTypeState:h,leftValue:U,leftValueType:B,setLeftKey:y,setLeftObjectTypeState:f,updatePredicate:c})}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)("div",{children:(0,L.jsx)(N.Z,{alignCenter:!0,compact:!0,onChange:function(e){return c({operator:e.target.value})},placeholder:"required",small:!0,value:M,children:Object.values(b.W6).map((function(e){return(0,L.jsx)("option",{value:e,children:b.N_[e]},e)}))})}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)(x.Z,{flex:1,flexDirection:"column",children:(0,L.jsx)(F,{leftKey:A,leftObjectKeys:H,leftObjectType:W,leftObjectTypeState:P,leftValue:Y,leftValueType:Q,rightAligned:!0,setLeftKey:R,setLeftObjectTypeState:S,updatePredicate:c})})]})]}),(0,L.jsx)("div",{children:(0,L.jsx)(m.ZP,{beforeIcon:(0,L.jsx)(k.Trash,{muted:!0,size:1.25*E.iI}),compact:!0,onClick:function(){return s()},small:!0,children:(0,L.jsxs)(O.ZP,{default:!0,monospace:!0,small:!0,children:["Delete ",u]})})})]}),n]}),!i&&(0,L.jsx)(_.Z,{mb:E.cd})]})})]})};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re={and_or_operator:b.YB.AND,left_value_type:{value_data_type:b.t4.STRING},operator:b.W6.EQUALS,right_value_type:{value_data_type:b.t4.STRING}};var le=function(e){var t=e.index,n=e.level,o=e.predicate,r=e.renderPredicate,l=e.setPredicate,s=(0,a.useMemo)((function(){return(null===o||void 0===o?void 0:o.predicates)||[]}),[o]),u=((0,a.useCallback)((function(e){l({predicates:e})}),[l]),(0,a.useCallback)((function(){l({predicates:(s||[]).concat(re)})}),[s,l])),c=(0,a.useCallback)((function(e,t){var n=(0,i.Z)(s);n[t]=e,l({predicates:n})}),[s,l]),d=(0,a.useMemo)((function(){return(null===s||void 0===s?void 0:s.length)||0}),[s]),p=(0,a.useCallback)((function(e,t){if(!(e<0)){var n=(0,w.bH)()[t];return 0===e||(n=n.toLowerCase(),e>=2&&(n="".concat(n).concat(e-1))),n}}),[]),h=(0,a.useMemo)((function(){return p(n,t)}),[p,t,n]);return(0,L.jsxs)(L.Fragment,{children:[null===s||void 0===s?void 0:s.map((function(e,t){var i,u=function(n){return c(ie(ie({},e),n),t)};return(0,L.jsx)(ne,{andOrOperator:null===o||void 0===o?void 0:o.and_or_operator,first:0===t,last:t===d-1,level:n+1,predicate:e,removePredicate:function(){l(ie(ie({},e),{},{predicates:(0,I.oM)(s,t)}))},title:p(n+1,t),updatePredicate:u,children:(0,L.jsx)(_.Z,{mt:(null===e||void 0===e||null===(i=e.predicates)||void 0===i?void 0:i.length)>=1?E.cd:0,children:r({index:t,level:n+1,predicate:e,renderPredicate:r,setPredicate:u})})},"predicate-".concat(t))})),(0,L.jsx)(_.Z,{mt:E.cd,children:(0,L.jsxs)(g.ZP,{alignItems:"center",children:[n>=0&&(null===s||void 0===s?void 0:s.length)>=2&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(N.Z,{compact:!0,monospace:!0,onChange:function(e){return l(ie(ie({},o),{},{and_or_operator:e.target.value}))},small:!0,paddingVertical:3,value:null===o||void 0===o?void 0:o.and_or_operator,children:Object.values(b.YB).map((function(e){return(0,L.jsx)("option",{value:e,children:(b.YB.OR===e?"".concat(e," "):e).toUpperCase()},e)}))}),(0,L.jsx)(_.Z,{mr:1})]}),(0,L.jsxs)(m.ZP,{compact:n>=0,beforeIcon:(0,L.jsx)(k.Add,{}),onClick:function(){return u()},secondary:!0,small:n>=0,children:["Add predicate",h&&" in ".concat(h)]})]})})]})};function se(e){var t=e.index,n=e.level,o=e.predicate,i=e.renderPredicate,r=e.setPredicate;return(0,L.jsx)(le,{index:t,level:n,predicate:o,renderPredicate:i,setPredicate:r})}var ue=n(42122),ce=n(70320),de=n(23780);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){var t,n,r,s,N,D,U,B,M,H,F,G,W,Y,Q,V,K,q,z,X,$,J,ee,te,ne,oe=e.isNew,ie=e.operationType,re=e.resourceType,le=e.rootProject,ae=e.uuid,he=(0,ce.qB)(),fe=(0,C.PR)(),ve=(0,h.useRouter)(),me="GlobalHookDetail/".concat(ae),je=(0,a.useContext)(c.ThemeContext),xe=(0,a.useState)(null),ge=xe[0],be=xe[1],ye=(0,a.useState)(!1),Ze=ye[0],_e=ye[1],Oe=(0,a.useState)(ie),Pe=Oe[0],ke=(Oe[1],(0,a.useState)(re)),Se=ke[0],Ee=(ke[1],(0,de.VI)(null,{},[],{uuid:me})),we=(0,l.Z)(Ee,1)[0],Ae=(0,a.useMemo)((function(){return(0,ue.hB)(pe({include_operation_types:1,include_resource_types:1,include_snapshot_validation:1,operation_type:"undefined"===typeof Pe?null:Pe,resource_type:"undefined"===typeof Se?null:Se},le?{root_project:le}:{}))}),[Pe,Se]),Re=P.ZP.global_hooks.detail(oe?"__new__":ae,Ae).data,Ce=(0,a.useMemo)((function(){return null===Re||void 0===Re?void 0:Re.global_hook}),[Re]),Ie=(0,a.useMemo)((function(){return{onErrorCallback:function(e){var t=e.error,n=t.errors,o=t.exception,i=t.message,r=t.type,l=e.response;return d.Am.error((null===n||void 0===n?void 0:n.error)||o||i,{position:d.Am.POSITION.BOTTOM_RIGHT,toastId:r}),we({errors:n,response:l})}}}),[]),Te=(0,p.Db)(P.ZP.global_hooks.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,pe({callback:function(e){var t=e.global_hook;ve.replace("/".concat(le?"platform/":"","global-hooks/").concat(t.uuid,"?operation_type=").concat(t.operation_type,"&resource_type=").concat(t.resource_type))}},Ie))}}),Ne=(0,l.Z)(Te,2),De=Ne[0],Le=Ne[1].isLoading,Ue=(0,p.Db)(P.ZP.global_hooks.useUpdate(null===Ce||void 0===Ce?void 0:Ce.uuid,Ae),{onSuccess:function(e){return(0,T.wD)(e,pe({callback:function(e){var t=e.global_hook;Je((function(e){return pe(pe({},e),t)})),d.Am.success("Global hook changes successfully saved.",{position:d.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-success-".concat(t.uuid)})}},Ie))}}),Be=(0,l.Z)(Ue,2),Me=Be[0],He=Be[1].isLoading,Fe=(0,p.Db)((function(e){var t=e.pipeline;return P.ZP.global_hooks.useUpdate(null===Ce||void 0===Ce?void 0:Ce.uuid,Ae)({global_hook:{pipeline:t,snapshot:1}})}),{onSuccess:function(e){return(0,T.wD)(e,pe({callback:function(e){var t=e.global_hook;Je((function(e){return pe(pe({},e),{},{metadata:pe(pe({},null===e||void 0===e?void 0:e.metadata),null===t||void 0===t?void 0:t.metadata),pipeline:pe(pe({},null===e||void 0===e?void 0:e.pipeline),null===t||void 0===t?void 0:t.pipeline)})})),d.Am.success("Snapshot successfully created.",{position:d.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-snapshot-success-".concat(t.uuid)})}},Ie))}}),Ge=(0,l.Z)(Fe,2),We=Ge[0],Ye=Ge[1].isLoading,Qe=(0,p.Db)(P.ZP.global_hooks.useDelete(null===Ce||void 0===Ce?void 0:Ce.uuid,Ae),{onSuccess:function(e){return(0,T.wD)(e,pe({callback:function(e){var t=e.global_hook;d.Am.success("Global hook changes successfully saved.",{position:d.Am.POSITION.BOTTOM_RIGHT,toastId:"global-hooks-success-".concat(t.uuid)}),ve.replace("/".concat(le?"platform/":"","global-hooks"))}},Ie))}}),Ve=(0,l.Z)(Qe,2),Ke=Ve[0],qe=Ve[1].isLoading,ze=P.ZP.pipelines.list().data,Xe=(0,a.useMemo)((function(){return(0,I.YC)((null===ze||void 0===ze?void 0:ze.pipelines)||[],(function(e){return e.name}))}),[ze]),$e=(0,a.useMemo)((function(){return(0,I.HK)(Xe||[],(function(e){return e.uuid}))}),[Xe]),Je=(0,a.useCallback)((function(e){be(e),_e(!0)}),[be,_e]);(0,a.useEffect)((function(){Ce&&!ge&&be(Ce)}),[ge,Ce,be]);var et=(0,a.useMemo)((function(){return null!==ge&&void 0!==ge&&ge.operation_type&&null!==ge&&void 0!==ge&&ge.resource_type?"".concat((0,w.vg)(null===ge||void 0===ge?void 0:ge.operation_type)," ").concat(null===ge||void 0===ge?void 0:ge.resource_type," operation"):null!==ge&&void 0!==ge&&ge.resource_type?"".concat(null===ge||void 0===ge?void 0:ge.resource_type," operation"):null!==ge&&void 0!==ge&&ge.operation_type?"".concat(null===ge||void 0===ge?void 0:ge.operation_type," operation"):"operation"}),[ge]),tt=(0,a.useMemo)((function(){var e;return null===$e||void 0===$e?void 0:$e[null===ge||void 0===ge||null===(e=ge.pipeline)||void 0===e?void 0:e.uuid]}),[ge,$e]),nt=(0,a.useMemo)((function(){return(null===tt||void 0===tt?void 0:tt.blocks)||[]}),[tt]),ot=(0,a.useMemo)((function(){return(0,I.HK)(nt||[],(function(e){return e.uuid}))}),[nt]),it=(0,a.useMemo)((function(){return(null===ge||void 0===ge?void 0:ge.outputs)||[]}),[ge]),rt=(0,a.useCallback)((function(e,t){var n=(0,i.Z)(it||[]);n[t]=e,Je((function(e){return pe(pe({},e),{},{outputs:n})}))}),[it,Je]),lt=(0,a.useMemo)((function(){return(0,L.jsx)(m.ZP,{beforeIcon:(0,L.jsx)(k.Add,{}),compact:(null===it||void 0===it?void 0:it.length)>=1,small:(null===it||void 0===it?void 0:it.length)>=1,onClick:function(){return Je((function(e){return pe(pe({},e),{},{outputs:((null===e||void 0===e?void 0:e.outputs)||[]).concat({block:{uuid:null},key:b.TT.PAYLOAD})})}))},secondary:!0,children:"Add block output"})}),[it,Je]),st=(0,a.useMemo)((function(){return null===it||void 0===it?void 0:it.map((function(e,t){var n,o,i=e.block,r=e.key,l=e.keyMore,s=e.keys,c=null===ot||void 0===ot?void 0:ot[null===i||void 0===i?void 0:i.uuid];return o=c?(0,L.jsx)(u(),{as:"/pipelines/".concat(null===tt||void 0===tt?void 0:tt.uuid,"/edit?block_uuid=").concat(null===c||void 0===c?void 0:c.uuid),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,L.jsx)(y.Z,{block:!0,openNewWindow:!0,children:(0,L.jsx)(O.ZP,{color:(0,R.qn)(null===c||void 0===c?void 0:c.type,{blockColor:null===c||void 0===c?void 0:c.color,theme:je}).accent,monospace:!0,children:(null===c||void 0===c?void 0:c.uuid)||"[select a block]"})})}):(0,L.jsx)(O.ZP,{default:!0,monospace:!0,children:(null===c||void 0===c?void 0:c.uuid)||(null===i||void 0===i?void 0:i.uuid)||"[select a block]"}),(0,L.jsxs)(v.Z,{noBorderRadius:!0,noPaddingContent:!0,title:(0,L.jsxs)(g.ZP,{alignItems:"center",children:[o,(0,L.jsx)(_.Z,{mr:1}),(0,L.jsx)(k.PaginateArrowRight,{muted:!0}),(0,L.jsx)(_.Z,{mr:1}),(0,L.jsxs)(O.ZP,{default:!0,monospace:!0,children:[r||"{object}",(null===s||void 0===s?void 0:s.length)>=1&&(null===s||void 0===s?void 0:s.map((function(e){return(0,L.jsxs)(O.ZP,{default:!0,inline:!0,monospace:!0,children:["['",e,"']"]})})))]})]}),titleXPadding:E.cd*E.iI,titleYPadding:E.cd*E.iI,children:[(0,L.jsx)(Z.S,{title:"Block to extract data from",description:"The output data from this block will be merged into the ".concat(et,"\u2019s data."),selectInput:{monospace:!0,onChange:function(n){return rt(pe(pe({},e),{},{block:pe(pe({},c),{},{uuid:n.target.value})}),t)},options:null===nt||void 0===nt?void 0:nt.map((function(e){return{label:e.name,value:e.uuid}})),placeholder:"Select a block",value:null===c||void 0===c?void 0:c.uuid}},"block-uuid-".concat(t)),(0,L.jsx)(Z.S,{title:"Object to merge block output data into",description:"Select the ".concat(et," object to merge the block output data into."),selectInput:{monospace:!0,onChange:function(n){return rt(pe(pe({},e),{},{key:n.target.value}),t)},options:null===(n=Object.values(b.TT))||void 0===n?void 0:n.map((function(e){return{label:e,value:e}})),placeholder:"Select an object",value:r}},"key-".concat(t)),(0,L.jsxs)(Z.S,{title:"Additional dictionary keys",description:(0,L.jsxs)(O.ZP,{muted:!0,small:!0,children:["If there is a nested object or value in the $",et," data that you want to merge the block output data into,",(0,L.jsx)("br",{}),"use these additional keys to instruct the hook on how nested you want to merge the block output data."]}),textInput:{fullWidth:!1,monospace:!0,placeholder:"optional",onChange:function(n){return rt(pe(pe({},e),{},{keyMore:n.target.value}),t)},value:l},children:[null===s||void 0===s?void 0:s.map((function(n){return(0,L.jsx)(_.Z,{ml:1,children:(0,L.jsx)(j.Z,{border:!0,label:n,monospace:!0,onClick:function(){rt(pe(pe({},e),{},{keys:(s||[]).filter((function(e){return e!==n}))}),t)}})},"keys-".concat(t,"-").concat(n))})),(null===s||void 0===s?void 0:s.length)>=1&&(0,L.jsx)(_.Z,{mr:E.cd}),l&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(m.ZP,{compact:!0,onClick:function(){rt(pe(pe({},e),{},{keyMore:"",keys:(s||[]).concat(l)}),t)},small:!0,children:["Add key ",l]}),(0,L.jsx)(_.Z,{mr:E.cd})]})]},"keys-".concat(t)),(0,L.jsx)(Z.S,{title:"Remove block output",children:(0,L.jsx)(m.ZP,{compact:!0,onClick:function(){return Je((function(e){return pe(pe({},e),{},{outputs:(0,I.oM)((null===e||void 0===e?void 0:e.outputs)||[],t)})}))},small:!0,children:"Remove"})})]})}))}),[nt,ot,it,tt,rt]),ut=(0,a.useMemo)((function(){return(0,ue.GL)(ge||{},["conditions","operation_type","outputs","pipeline","predicate","resource_type","run_settings","stages","strategies"])}),[ge]),ct=(0,a.useMemo)((function(){return(null===ge||void 0===ge?void 0:ge.metadata)||{created_at:null,snapshot_hash:null,snapshot_valid:!1,snapshotted_at:null,updated_at:null,user:{id:null}}}),[ge]),dt=(0,a.useMemo)((function(){return null===ge||void 0===ge?void 0:ge.predicate}),[ge]),at=(0,a.useMemo)((function(){return(0,L.jsx)(_.Z,{p:E.cd,children:se({level:-1,predicate:dt,renderPredicate:se,setPredicate:function(e){return Je((function(t){return pe(pe({},t),{},{predicate:pe(pe({},e),{},{and_or_operator:b.YB.OR})})}))}})})}),[dt,Je]);return(0,L.jsxs)(_.Z,{mb:8,p:E.cd,children:[(0,L.jsxs)(Z.Z,{title:"What to run hook for",children:[(0,L.jsx)(Z.S,{description:"This hook\u2019s UUID must be unique across all hooks for the same resource type and operation type.",invalid:Ze&&!(null!==ge&&void 0!==ge&&ge.uuid),textInput:oe?{monospace:!0,onChange:function(e){return Je((function(t){return pe(pe({},t),{},{uuid:e.target.value})}))},placeholder:"e.g. bootstrap pipeline blocks",value:null===ge||void 0===ge?void 0:ge.uuid}:null,title:"Hook UUID",children:!oe&&(0,L.jsx)(_.Z,{px:E.cd,children:(0,L.jsx)(O.ZP,{large:!0,monospace:!0,children:ae})})}),(0,L.jsx)(Z.S,{description:"Select the resource this hook should be attached to.",invalid:Ze&&!(null!==ge&&void 0!==ge&&ge.resource_type),selectInput:{monospace:!0,onChange:function(e){return Je((function(t){return pe(pe({},t),{},{resource_type:e.target.value})}))},options:null===ge||void 0===ge||null===(t=ge.resource_types)||void 0===t?void 0:t.map((function(e){return{label:(0,w.j3)(e),value:e}})),placeholder:"e.g. Pipeline",value:null===ge||void 0===ge?void 0:ge.resource_type},title:"Resource type"}),(0,L.jsx)(Z.S,{description:"When a specific operation occurs for a given resource, this hook will be invoked for that specific operation on the configured resource.",invalid:Ze&&!(null!==ge&&void 0!==ge&&ge.operation_type),selectInput:{monospace:!0,onChange:function(e){return Je((function(t){return pe(pe({},t),{},{operation_type:e.target.value})}))},options:null===ge||void 0===ge||null===(n=ge.operation_types)||void 0===n?void 0:n.map((function(e){return{label:(0,w.vg)(e),value:e}})),placeholder:"e.g. Update",value:null===ge||void 0===ge?void 0:ge.operation_type},title:"Operation type"}),!oe&&(0,L.jsx)(f.Z,{noBorder:!0,noBoxShadow:!0,visibleMappingForced:{0:!0},children:(0,L.jsxs)(v.Z,{noBorderRadius:!0,noPaddingContent:!0,title:"Targeting",titleXPadding:E.cd*E.iI,titleYPadding:E.cd*E.iI,children:[(0,L.jsx)(_.Z,{p:E.cd,children:(0,L.jsxs)(O.ZP,{default:!0,children:["Add targeting conditions to determine what subset of ",null!==ge&&void 0!==ge&&ge.resource_type?(0,w._6)((0,w.j3)(null===ge||void 0===ge?void 0:ge.resource_type),2,null,!0):"resources"," this hook should run for."]})}),at]})})]}),!oe&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(_.Z,{mb:E.cd}),(0,L.jsxs)(Z.Z,{title:"When to run hook",children:[(0,L.jsx)(Z.S,{title:"Before operation starts",description:"If enabled, this hook will be invoked before the ".concat(et," starts."),toggleSwitch:{checked:null===ge||void 0===ge||null===(r=ge.stages)||void 0===r?void 0:r.includes(b.SQ.BEFORE),onCheck:function(e){return Je((function(t){var n,i;return pe(pe({},t),{},{stages:e(null===t||void 0===t||null===(n=t.stages)||void 0===n?void 0:n.includes(b.SQ.BEFORE))?Array.from((0,o.Z)(Set,[((null===t||void 0===t?void 0:t.stages)||[]).concat(b.SQ.BEFORE)])):(null===t||void 0===t||null===(i=t.stages)||void 0===i?void 0:i.filter((function(e){return e!==b.SQ.BEFORE})))||[]})}))}}}),(0,L.jsx)(Z.S,{title:"After operation completes",description:"If enabled, this hook will be invoked after the ".concat(et," ends."),toggleSwitch:{checked:null===ge||void 0===ge||null===(s=ge.stages)||void 0===s?void 0:s.includes(b.SQ.AFTER),onCheck:function(e){return Je((function(t){var n,i;return pe(pe({},t),{},{stages:e(null===t||void 0===t||null===(n=t.stages)||void 0===n?void 0:n.includes(b.SQ.AFTER))?Array.from((0,o.Z)(Set,[((null===t||void 0===t?void 0:t.stages)||[]).concat(b.SQ.AFTER)])):(null===t||void 0===t||null===(i=t.stages)||void 0===i?void 0:i.filter((function(e){return e!==b.SQ.AFTER})))||[]})}))}}}),(0,L.jsx)(Z.S,{title:"Run if ".concat(et," succeeds"),description:"If enabled, this hook will be invoked if the ".concat(et," is successful and doesn\u2019t error."),toggleSwitch:{checked:null===ge||void 0===ge||null===(N=ge.conditions)||void 0===N?void 0:N.includes(b.sw.SUCCESS),onCheck:function(e){return Je((function(t){var n,i;return pe(pe({},t),{},{conditions:e(null===t||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.includes(b.sw.SUCCESS))?Array.from((0,o.Z)(Set,[((null===t||void 0===t?void 0:t.conditions)||[]).concat(b.sw.SUCCESS)])):(null===t||void 0===t||null===(i=t.conditions)||void 0===i?void 0:i.filter((function(e){return e!==b.sw.SUCCESS})))||[]})}))}}}),(0,L.jsx)(Z.S,{title:"Run if ".concat(et," fails"),description:"If enabled, this hook will be invoked if the ".concat(et," fails with an error."),toggleSwitch:{checked:null===ge||void 0===ge||null===(D=ge.conditions)||void 0===D?void 0:D.includes(b.sw.FAILURE),onCheck:function(e){return Je((function(t){var n,i;return pe(pe({},t),{},{conditions:e(null===t||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.includes(b.sw.FAILURE))?Array.from((0,o.Z)(Set,[((null===t||void 0===t?void 0:t.conditions)||[]).concat(b.sw.FAILURE)])):(null===t||void 0===t||null===(i=t.conditions)||void 0===i?void 0:i.filter((function(e){return e!==b.sw.FAILURE})))||[]})}))}}})]}),(0,L.jsx)(_.Z,{mb:E.cd}),(0,L.jsxs)(Z.Z,{title:"Code to run",description:"When the current hook gets triggered, it will execute the associated pipeline.",children:[(0,L.jsx)(Z.S,{title:"Pipeline to execute",description:"Select a pipeline that will be executed every time this hook is triggered.",invalid:Ze&&!(null!==ge&&void 0!==ge&&null!==(U=ge.pipeline)&&void 0!==U&&U.uuid),selectInput:{fullWidth:!1,monospace:!0,onChange:function(e){return Je((function(t){return pe(pe({},t),{},{pipeline:pe(pe({},null===t||void 0===t?void 0:t.pipeline),{},{uuid:e.target.value})})}))},options:null===Xe||void 0===Xe?void 0:Xe.map((function(e){var t=e.name,n=e.uuid;return{label:t||n,value:n}})),placeholder:"Select a pipeline",value:null===ge||void 0===ge||null===(B=ge.pipeline)||void 0===B?void 0:B.uuid},children:(null===ge||void 0===ge||null===(M=ge.pipeline)||void 0===M?void 0:M.uuid)&&(0,L.jsx)(_.Z,{mr:2,children:(0,L.jsx)(u(),{as:"/pipelines/".concat(null===ge||void 0===ge||null===(H=ge.pipeline)||void 0===H?void 0:H.uuid,"/edit"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,L.jsx)(y.Z,{block:!0,openNewWindow:!0,children:"View pipeline"})})})}),(0,L.jsxs)(Z.S,{title:null===ge||void 0===ge||null===(F=ge.pipeline)||void 0===F||!F.uuid||null!==ct&&void 0!==ct&&ct.snapshot_hash||null!==ct&&void 0!==ct&&ct.snapshot_valid?"Valid code snapshot":"Code snapshot hasn\u2019t been created yet",description:(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(O.ZP,{muted:!0,small:!0,children:["Take a snapshot of ",null!==ge&&void 0!==ge&&null!==(G=ge.pipeline)&&void 0!==G&&G.uuid?(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null===ge||void 0===ge||null===(W=ge.pipeline)||void 0===W?void 0:W.uuid}):"the associated pipeline","\u2019s code. The snapshot is used to validate the hook before it runs.",(0,L.jsx)("br",{}),"A hook cannot run if ",null!==ge&&void 0!==ge&&null!==(Y=ge.pipeline)&&void 0!==Y&&Y.uuid?(0,L.jsx)(O.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null===ge||void 0===ge||null===(Q=ge.pipeline)||void 0===Q?void 0:Q.uuid}):"the associated pipeline","\u2019s code has changed after the most recent snapshot has been made.",(0,L.jsx)("br",{}),"If the code changes, a new snapshot must be created."]})}),invalid:(null===ge||void 0===ge||null===(V=ge.pipeline)||void 0===V?void 0:V.uuid)&&(null===ct||void 0===ct?void 0:ct.snapshot_hash)&&!(null!==ct&&void 0!==ct&&ct.snapshot_valid),warning:(null===ge||void 0===ge||null===(K=ge.pipeline)||void 0===K?void 0:K.uuid)&&!(null!==ct&&void 0!==ct&&ct.snapshot_hash)&&!(null!==ct&&void 0!==ct&&ct.snapshot_valid),children:[!(null!==ct&&void 0!==ct&&ct.snapshot_hash)&&(0,L.jsx)(O.ZP,{default:!0,large:!0,children:null!==ge&&void 0!==ge&&null!==(q=ge.pipeline)&&void 0!==q&&q.uuid?"No snapshot has been created":"Select a pipeline before taking a snapshot"}),(null===ct||void 0===ct?void 0:ct.snapshot_hash)&&(0,L.jsx)(g.ZP,{flexDirection:"column",children:(0,L.jsx)(O.ZP,{danger:!(null!==ct&&void 0!==ct&&ct.snapshot_valid),large:!0,rightAligned:!0,success:null===ct||void 0===ct?void 0:ct.snapshot_valid,children:null!==ct&&void 0!==ct&&ct.snapshot_valid?"Snapshot valid":"Snapshot outdated"})})]}),(0,L.jsx)(_.Z,{p:E.cd,children:(0,L.jsx)(g.ZP,{alignItems:"center",justifyContent:"flex-end",children:(0,L.jsxs)(g.ZP,{alignItems:"center",children:[(null===ct||void 0===ct?void 0:ct.snapshotted_at)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(O.ZP,{muted:!0,rightAligned:!0,small:!0,children:["Last snapshot at ",(0,L.jsx)(O.ZP,{inline:!0,muted:!0,small:!0,monospace:!0,children:null===ct||void 0===ct?void 0:ct.snapshotted_at})]}),(0,L.jsx)(_.Z,{mr:E.cd})]}),(0,L.jsx)(m.ZP,{disabled:!(null!==ge&&void 0!==ge&&null!==(z=ge.pipeline)&&void 0!==z&&z.uuid),loading:Ye,onClick:function(){return We({pipeline:null===ge||void 0===ge?void 0:ge.pipeline})},primary:!(null!==ct&&void 0!==ct&&ct.snapshot_valid),secondary:null===ct||void 0===ct?void 0:ct.snapshot_valid,children:null!==ct&&void 0!==ct&&ct.snapshot_hash?null!==ct&&void 0!==ct&&ct.snapshot_valid?"Update snapshot even though it\u2019s valid":"Update snapshot to make it valid":"Create snapshot of code"})]})})})]}),(0,L.jsx)(_.Z,{mb:E.cd}),(0,L.jsxs)(Z.Z,{title:"How to run hook",children:[(0,L.jsx)(Z.S,{title:"Stop operation if hook fails",description:"If enabled, the ".concat(et," will be cancelled and an error will be raised."),toggleSwitch:{checked:null===ge||void 0===ge||null===(X=ge.strategies)||void 0===X?void 0:X.includes(b.Ij.RAISE),onCheck:function(e){return Je((function(t){var n,i;return pe(pe({},t),{},{strategies:e(null===t||void 0===t||null===(n=t.strategies)||void 0===n?void 0:n.includes(b.Ij.RAISE))?Array.from((0,o.Z)(Set,[((null===t||void 0===t?void 0:t.strategies)||[]).concat(b.Ij.RAISE)])):(null===t||void 0===t||null===(i=t.strategies)||void 0===i?void 0:i.filter((function(e){return e!==b.Ij.RAISE})))||[]})}))}}}),(0,L.jsx)(Z.S,{title:"Execute hook with history and logging",description:(0,L.jsxs)(O.ZP,{muted:!0,small:!0,children:["If enabled, anytime this hook is executed an associated pipeline run and block runs will be created.",(0,L.jsx)("br",{}),"This will provide a history of the hook execution as well as logging for observability.",(0,L.jsx)("br",{}),"However, this will have a significant impact on the ",et," resolution time.",(0,L.jsx)("br",{}),"This may cause very delayed API responsed and a degraded devloper experience."]}),toggleSwitch:{checked:!(null===ge||void 0===ge||null===($=ge.run_settings)||void 0===$||!$.with_trigger),onCheck:function(e){return Je((function(t){var n;return pe(pe({},t),{},{run_settings:pe(pe({},null===t||void 0===t?void 0:t.run_settings),{},{with_trigger:e(null===t||void 0===t||null===(n=t.run_settings)||void 0===n?void 0:n.with_trigger)})})}))}}}),(0,L.jsx)(Z.S,{title:"Run hook asynchronously",description:(0,L.jsxs)(O.ZP,{muted:!0,small:!0,children:["Hooks will execute the associated pipeline synchronously and prevent the current resource operation (e.g. API request) from resolving until all associated hooks for that resource operation are completed.",(0,L.jsx)("br",{}),"Hooks running synchronously can mutate the input data and output data. However, it can slow down the user experience in the application.",(0,L.jsx)("br",{}),"Enable this setting to run hooks asynchronously and not block the current resource operation from resolving.",(0,L.jsx)("br",{}),"However, asynchronous hooks cannot mutate the input data or output data. Use this asynchronous setting when hooks don\u2019t need to mutate data."]}),toggleSwitch:{checked:!(null===ge||void 0===ge||null===(J=ge.run_settings)||void 0===J||!J.asynchronous),onCheck:function(e){return Je((function(t){var n;return pe(pe({},t),{},{run_settings:pe(pe({},null===t||void 0===t?void 0:t.run_settings),{},{asynchronous:e(null===t||void 0===t||null===(n=t.run_settings)||void 0===n?void 0:n.asynchronous)})})}))}}})]}),(0,L.jsx)(_.Z,{mb:E.cd}),(0,L.jsxs)(Z.Z,{title:"Block outputs ".concat((null===it||void 0===it?void 0:it.length)>=1?"(".concat((null===it||void 0===it?void 0:it.length)||0,")"):""),description:(0,L.jsx)(_.Z,{mt:1,children:(0,L.jsxs)(O.ZP,{muted:!0,children:["When a hook runs and executes a pipeline, the output from the pipeline\u2019s blocks",(0,L.jsx)("br",{}),"can optionally be used to mutate the ",et," input and output data."]})}),headerChildren:(null===it||void 0===it?void 0:it.length)>=1&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(_.Z,{ml:E.cd}),lt]}),children:[!(null!==it&&void 0!==it&&it.length)&&(0,L.jsx)(_.Z,{p:E.cd,children:lt}),(null===it||void 0===it?void 0:it.length)>=1&&(0,L.jsx)(f.Z,{noBorder:!0,noBoxShadow:!0,children:st})]}),(0,L.jsx)(_.Z,{mb:E.cd}),(0,L.jsxs)(Z.Z,{title:"Metadata",children:[(0,L.jsx)(Z.S,{title:"Last updated",children:(0,L.jsxs)(x.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(O.ZP,{large:!0,monospace:!0,muted:!0,children:null!==ct&&void 0!==ct&&ct.updated_at?(0,A.XG)(null===ct||void 0===ct?void 0:ct.updated_at,he):"-"}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)(k.Schedule,{muted:!0,size:S.Z}),(0,L.jsx)(_.Z,{mr:1})]})}),(0,L.jsx)(Z.S,{title:"Created at",children:(0,L.jsxs)(x.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(O.ZP,{large:!0,monospace:!0,muted:!0,children:null!==ct&&void 0!==ct&&ct.created_at?(0,A.XG)(null===ct||void 0===ct?void 0:ct.created_at,he):"-"}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)(k.Schedule,{muted:!0,size:S.Z}),(0,L.jsx)(_.Z,{mr:1})]})}),(0,L.jsx)(Z.S,{title:"Snapshotted at",children:(0,L.jsxs)(x.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(O.ZP,{large:!0,monospace:!0,muted:!0,children:null!==ct&&void 0!==ct&&ct.snapshotted_at?(0,A.XG)(null===ct||void 0===ct?void 0:ct.snapshotted_at,he):"-"}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)(k.Schedule,{muted:!0,size:S.Z}),(0,L.jsx)(_.Z,{mr:1})]})}),(0,L.jsx)(Z.S,{title:"Snapshot valid",children:(0,L.jsxs)(x.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(O.ZP,{large:!0,danger:!(null!==ct&&void 0!==ct&&ct.snapshot_valid),muted:null===ct||void 0===ct?void 0:ct.snapshot_valid,children:null!==ct&&void 0!==ct&&ct.snapshot_valid?"Valid":"Hook won\u2019t run until snapshot is valid"}),(0,L.jsx)(_.Z,{mr:E.cd}),null!==ct&&void 0!==ct&&ct.snapshot_valid?(0,L.jsx)(k.Check,{size:S.Z,success:!0}):(0,L.jsx)(k.AlertTriangle,{danger:!0,size:S.Z}),(0,L.jsx)(_.Z,{mr:1})]})}),(0,L.jsx)(Z.S,{title:"Created by",children:(0,L.jsxs)(x.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(O.ZP,{large:!0,monospace:!0,muted:!0,children:null!==ct&&void 0!==ct&&null!==(ee=ct.user)&&void 0!==ee&&ee.id?String(null===ct||void 0===ct||null===(te=ct.user)||void 0===te?void 0:te.id)===String(null===fe||void 0===fe?void 0:fe.id)?"You created this hook":"User ID ".concat(null===ct||void 0===ct||null===(ne=ct.user)||void 0===ne?void 0:ne.id):"-"}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)(k.UserSmileyFace,{muted:!0,size:S.Z}),(0,L.jsx)(_.Z,{mr:1})]})})]})]}),(0,L.jsx)(_.Z,{mt:E.HN,children:(0,L.jsxs)(g.ZP,{alignItems:"center",justifyContent:"space-between",children:[!oe&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(m.ZP,{compact:!0,danger:!0,loading:qe,onClick:function(){window.confirm("Are you sure you wantt to delete this hook?")&&Ke()},small:!0,children:"Delete global hook"}),(0,L.jsx)(_.Z,{mr:E.cd})]}),(0,L.jsxs)(x.Z,{flex:1,justifyContent:"flex-end",children:[(0,L.jsx)(m.ZP,{beforeIcon:(0,L.jsx)(k.PaginateArrowLeft,{}),disabled:Le||He||qe,onClick:function(){return ve.push("/".concat(le?"platform/":"","global-hooks"))},secondary:!0,children:Ze?"Cancel changes & go back":"Go back to all hooks"}),(0,L.jsx)(_.Z,{mr:E.cd}),(0,L.jsx)(m.ZP,{beforeIcon:(0,L.jsx)(k.Save,{}),disabled:qe,loading:Le||He,onClick:function(){return(oe?De:Me)({global_hook:pe(pe(pe({},ut),oe?{uuid:null===ge||void 0===ge?void 0:ge.uuid}:{}),{},{root_project:le})})},primary:!0,children:oe?"Create new global hook":"Save changes"})]})]})})]})}},93808:function(e,t,n){n.d(t,{Z:function(){return S}});var o=n(77837),i=n(26304),r=n(62243),l=n(29385),s=n(80022),u=n(13692),c=n(93189),d=n(15544),a=n(82394),p=n(38860),h=n.n(p),f=n(82684),v=n(56663),m=n.n(v),j=n(40761),x=n(34661),g=n(36105),b=n(50178),y=n(69419),Z=n(28598),_=["auth"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,c.Z)(this,n)}}function S(e){return function(t){(0,u.Z)(c,t);var n=k(c);function c(){var e;(0,r.Z)(this,c);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e=n.call.apply(n,[this].concat(o)),(0,a.Z)((0,s.Z)(e),"state",{auth:new j.Z(e.props.token)}),e}return(0,l.Z)(c,[{key:"componentDidMount",value:function(){this.setState({auth:new j.Z(this.props.token)})}},{key:"render",value:function(){var t=this.props,n=(t.auth,(0,i.Z)(t,_));return(0,Z.jsx)(e,P({auth:this.state.auth},n))}}],[{key:"getInitialProps",value:function(){var t=(0,o.Z)(h().mark((function t(n){var o,i,r,l,s,u,c,d,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=m()(n),i=(0,b.ex)(n),r=i.id,l=o[x.Mv],s=o[g.qt],u=new j.Z(l),c=P(P({},n),{},{auth:u,currentGroupId:r,theme:s}),(0,b.YB)(n)&&u.isExpired&&(console.log("OAuth token has expired."),d=P(P({},n.query),{},{redirect_url:n.asPath}),(0,y.nL)("/sign-in?".concat((0,y.uM)(d)),n.res)),!e.getInitialProps){t.next=12;break}return t.next=10,e.getInitialProps(c);case 10:return a=t.sent,t.abrupt("return",P(P({},a),{},{auth:u,currentGroupId:r,theme:s}));case 12:return t.abrupt("return",c);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),c}(f.Component)}},14466:function(e,t,n){n.d(t,{Ij:function(){return r},N_:function(){return v},SQ:function(){return l},TT:function(){return s},W6:function(){return p},XG:function(){return d},YB:function(){return c},i9:function(){return f},sw:function(){return u},t4:function(){return a}});var o,i,r,l,s,u,c,d,a,p,h=n(82394);!function(e){e.CREATE="create",e.DELETE="delete",e.DETAIL="detail",e.EXECUTE="execute",e.LIST="list",e.UPDATE="update",e.UPDATE_ANYWHERE="update_anywhere"}(i||(i={})),function(e){e.BREAK="break",e.CONTINUE="continue",e.RAISE="raise"}(r||(r={})),function(e){e.AFTER="after",e.BEFORE="before"}(l||(l={})),function(e){e.ERROR="error",e.META="meta",e.METADATA="metadata",e.PAYLOAD="payload",e.QUERY="query",e.RESOURCE="resource",e.RESOURCES="resources"}(s||(s={})),function(e){e.FAILURE="failure",e.SUCCESS="success"}(u||(u={})),function(e){e.AND="and",e.OR="or"}(c||(c={})),function(e){e.ERROR="error",e.HOOK="hook",e.META="meta",e.METADATA="metadata",e.OPERATION_RESOURCE="operation_resource",e.PAYLOAD="payload",e.QUERY="query",e.RESOURCE="resource",e.RESOURCES="resources",e.RESOURCE_ID="resource_id",e.RESOURCE_PARENT="resource_parent",e.RESOURCE_PARENT_ID="resource_parent_id",e.RESOURCE_PARENT_TYPE="resource_parent_type",e.USER="user"}(d||(d={})),function(e){e.BOOLEAN="BOOLEAN",e.DICTIONARY="DICTIONARY",e.FLOAT="FLOAT",e.INTEGER="INTEGER",e.LIST="LIST",e.STRING="STRING"}(a||(a={})),function(e){e.EQUALS="EQUALS",e.GREATER_THAN="GREATER_THAN",e.GREATER_THAN_OR_EQUALS="GREATER_THAN_OR_EQUALS",e.INCLUDES="INCLUDES",e.LESS_THAN="LESS_THAN",e.LESS_THAN_OR_EQUALS="LESS_THAN_OR_EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.NOT_INCLUDES="NOT_INCLUDES",e.NOT_PRESENT="NOT_PRESENT",e.PRESENT="PRESENT"}(p||(p={}));var f=[p.NOT_PRESENT,p.PRESENT],v=(o={},(0,h.Z)(o,p.EQUALS,"=="),(0,h.Z)(o,p.GREATER_THAN,">"),(0,h.Z)(o,p.GREATER_THAN_OR_EQUALS,">="),(0,h.Z)(o,p.INCLUDES,"includes"),(0,h.Z)(o,p.LESS_THAN,"<"),(0,h.Z)(o,p.LESS_THAN_OR_EQUALS,"<="),(0,h.Z)(o,p.NOT_EQUALS,"!="),(0,h.Z)(o,p.NOT_INCLUDES,"not includes"),(0,h.Z)(o,p.NOT_PRESENT,"is not present"),(0,h.Z)(o,p.PRESENT,"is present"),o)},80022:function(e,t,n){function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return o}})},15544:function(e,t,n){function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}n.d(t,{Z:function(){return o}})},13692:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(61049);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,o.Z)(e,t)}},93189:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(12539),i=n(80022);function r(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}}]);